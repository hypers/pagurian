define("modules/datatree/app",["../../lib/app","../../lib/vendor/bootstrap/js/bootstrap","../../lib/vendor/uniform/jquery.uniform","../../lib/vendor/jquery-cookie/jquery-cookie","../../lib/vendor/jquery-json/2.4/jquery-json","../../lib/vendor/moment/moment","../../lib/com/form","../../lib/com/alert","../../lib/com/dialog","../../lib/tpl/dialog.tpl","../../lib/com/select","../../lib/com/checkboxes","../../lib/tool/tool","../../lib/tool/url","../../lib/tool/str","../../lib/core/tpl","../../lib/core/layout","../../conf/locale.zh_CN","../../conf/locale.en_US","../../lib/service","../../lib/core/ajax","../../lib/core/transport","../../lib/core/validate","../../conf/route","../../conf/api","../../plugins/number-spinner/module","../../plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin.css","../../plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin","../../plugins/datatree/module","../../plugins/datatree/3.2.1/themes/default/style.css","../../plugins/datatree/3.2.1/jstree","../../plugins/datatree/extend/plugin.added"],function(require,exports,module){var app=require("../../lib/app");require("../../plugins/number-spinner/module");require("../../plugins/datatree/module");app.page.index=function(){$p.dataTree("#tree",{core:{data:[{text:"Root node",state:{opened:true},children:[{id:1,text:"Child node 1",state:{selected:true},icon:"fa fa-flash"},{text:"Child node 2",state:{disabled:true}},"Child node 3"]}]}})};app.page.advanced=function(){var treeData=[{text:"Root node",state:{opened:true},children:[{text:"Child node 1",id:"111",state:{selected:true},icon:"fa fa-flash"},{text:"Child node 2",state:{disabled:true}},"Child node 3"]}];$p.dataTree("#tree",{plugins:["checkbox","search","added"],core:{data:treeData},search:{input:"#input_search"},added:{numberSpinner:{decimals:2,min:-10,max:100,step:.1,change:function(data,entity){console.log(data)}}},change:function(e,node){console.log(node)}})};module.exports=app});define("lib/app",["lib/vendor/bootstrap/js/bootstrap","lib/vendor/uniform/jquery.uniform","lib/vendor/jquery-cookie/jquery-cookie","lib/vendor/jquery-json/2.4/jquery-json","lib/vendor/moment/moment","lib/com/form","lib/com/alert","lib/com/dialog","lib/com/select","lib/com/checkboxes","lib/tool/tool","lib/tool/url","lib/tool/str","lib/core/tpl","lib/core/layout","conf/locale.zh_CN","conf/locale.en_US","lib/service","lib/core/ajax","lib/core/transport","lib/core/validate","conf/route","conf/api"],function(require,exports,module){require("lib/vendor/bootstrap/js/bootstrap");require("lib/vendor/uniform/jquery.uniform");require("lib/vendor/jquery-cookie/jquery-cookie");require("lib/vendor/jquery-json/2.4/jquery-json");require("lib/vendor/moment/moment");require("lib/com/form");require("lib/com/alert");require("lib/com/dialog");require("lib/com/select");require("lib/com/checkboxes");require("lib/tool/tool");require("lib/tool/url");require("lib/tool/str");require("lib/core/tpl");var layout=require("lib/core/layout");var locale={zh_CN:require("conf/locale.zh_CN"),en_US:require("conf/locale.en_US")};pagurian.locale=locale[pagurian.language];pagurian.lib={service:require("lib/service"),route:require("conf/route")};var api=require("conf/api");pagurian.lib.api=api.items||{};pagurian.lib.apiPostfix=api.postfix;pagurian.log=function(){if(!window.console||!pagurian.debug){return}if(arguments.length===1){console.error(arguments[0])}if(arguments.length===2){console[arguments[1]](arguments[0])}};var app={page:{},events:{},updateUniform:function(){layout.updateUniform()},activateCurrentMenu:function(){layout.activateCurrentMenu()},init:function(){layout.init();layout.custom();layout.activateCurrentMenu();layout.resize(function(){if(app.events.resize&&"function"===typeof app.events.resize){app.events.resize()}})}};app.init();module.exports=app});define("lib/vendor/bootstrap/js/bootstrap",[],function(require,exports,module){if("undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]'),b=!0;if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350),void 0):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(){a(d).remove(),a(e).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",f);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),/bottom|top/.test(b)){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")}else this.replaceArrow(j-f,j,"top");c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach()}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(c).is("body")?a(window):a(c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery)});define("lib/vendor/uniform/jquery.uniform",[],function(require,exports,module){!function($,undef){"use strict";function attrOrProp($el){var args=Array.prototype.slice.call(arguments,1);if($el.prop){return $el.prop.apply($el,args)}return $el.attr.apply($el,args)}function bindMany($el,options,events){var name,namespaced;for(name in events){if(events.hasOwnProperty(name)){namespaced=name.replace(/ |$/g,options.eventNamespace);$el.bind(namespaced,events[name])
}}}function bindUi($el,$target,options){bindMany($el,options,{focus:function(){$target.addClass(options.focusClass)},blur:function(){$target.removeClass(options.focusClass);$target.removeClass(options.activeClass)},mouseenter:function(){$target.addClass(options.hoverClass)},mouseleave:function(){$target.removeClass(options.hoverClass);$target.removeClass(options.activeClass)},"mousedown touchbegin":function(){if(!$el.is(":disabled")){$target.addClass(options.activeClass)}},"mouseup touchend":function(){$target.removeClass(options.activeClass)}})}function classClearStandard($el,options){$el.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass)}function classUpdate($el,className,enabled){if(enabled){$el.addClass(className)}else{$el.removeClass(className)}}function classUpdateChecked($tag,$el,options){var c="checked",isChecked=$el.is(":"+c);if($el.prop){$el.prop(c,isChecked)}else{if(isChecked){$el.attr(c,c)}else{$el.removeAttr(c)}}classUpdate($tag,options.checkedClass,isChecked)}function classUpdateDisabled($tag,$el,options){classUpdate($tag,options.disabledClass,$el.is(":disabled"))}function divSpanWrap($el,$container,method){switch(method){case"after":$el.after($container);return $el.next();case"before":$el.before($container);return $el.prev();case"wrap":$el.wrap($container);return $el.parent()}return null}function divSpan($el,options,divSpanConfig){var $div,$span,id;if(!divSpanConfig){divSpanConfig={}}divSpanConfig=$.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},divSpanConfig);$div=$("<div />");$span=$("<span />");if(options.autoHide&&$el.is(":hidden")&&$el.css("display")==="none"){$div.hide()}if(divSpanConfig.divClass){$div.addClass(divSpanConfig.divClass)}if(options.wrapperClass){$div.addClass(options.wrapperClass)}if(divSpanConfig.spanClass){$span.addClass(divSpanConfig.spanClass)}id=attrOrProp($el,"id");if(options.useID&&id){attrOrProp($div,"id",options.idPrefix+"-"+id)}if(divSpanConfig.spanHtml){$span.html(divSpanConfig.spanHtml)}$div=divSpanWrap($el,$div,divSpanConfig.divWrap);$span=divSpanWrap($el,$span,divSpanConfig.spanWrap);classUpdateDisabled($div,$el,options);return{div:$div,span:$span}}function wrapWithWrapperClass($el,options){var $span;if(!options.wrapperClass){return null}$span=$("<span />").addClass(options.wrapperClass);$span=divSpanWrap($el,$span,"wrap");return $span}function highContrast(){var c,$div,el,rgb;rgb="rgb(120,2,153)";$div=$('<div style="width:0;height:0;color:'+rgb+'">');$("body").append($div);el=$div.get(0);if(window.getComputedStyle){c=window.getComputedStyle(el,"").color}else{c=(el.currentStyle||el.style||{}).color}$div.remove();return c.replace(/ /g,"")!==rgb}function htmlify(text){if(!text){return""}return $("<span />").text(text).html()}function isMsie(){return navigator.cpuClass&&!navigator.product}function isMsieSevenOrNewer(){if(typeof window.XMLHttpRequest!=="undefined"){return true}return false}function isMultiselect($el){var elSize;if($el[0].multiple){return true}elSize=attrOrProp($el,"size");if(!elSize||elSize<=1){return false}return true}function returnFalse(){return false}function noSelect($elem,options){var none="none";bindMany($elem,options,{"selectstart dragstart mousedown":returnFalse});$elem.css({MozUserSelect:none,msUserSelect:none,webkitUserSelect:none,userSelect:none})}function setFilename($el,$filenameTag,options){var filename=$el.val();if(filename===""){filename=options.fileDefaultHtml}else{filename=filename.split(/[\/\\]+/);filename=filename[filename.length-1]}$filenameTag.text(filename)}function swap($elements,newCss,callback){var restore,item;restore=[];$elements.each(function(){var name;for(name in newCss){if(Object.prototype.hasOwnProperty.call(newCss,name)){restore.push({el:this,name:name,old:this.style[name]});this.style[name]=newCss[name]}}});callback();while(restore.length){item=restore.pop();item.el.style[item.name]=item.old}}function sizingInvisible($el,callback){var targets;targets=$el.parents();targets.push($el[0]);targets=targets.not(":visible");swap(targets,{visibility:"hidden",display:"block",position:"absolute"},callback)}function unwrapUnwrapUnbindFunction($el,options){return function(){$el.unwrap().unwrap().unbind(options.eventNamespace)}}var allowStyling=true,highContrastTest=false,uniformHandlers=[{match:function($el){return $el.is("a, button, :submit, :reset, input[type='button']")},apply:function($el,options){var $div,defaultSpanHtml,ds,getHtml,doingClickEvent;defaultSpanHtml=options.submitDefaultHtml;if($el.is(":reset")){defaultSpanHtml=options.resetDefaultHtml}if($el.is("a, button")){getHtml=function(){return $el.html()||defaultSpanHtml}}else{getHtml=function(){return htmlify(attrOrProp($el,"value"))||defaultSpanHtml}}ds=divSpan($el,options,{divClass:options.buttonClass,spanHtml:getHtml()});$div=ds.div;bindUi($el,$div,options);doingClickEvent=false;bindMany($div,options,{"click touchend":function(){var ev,res,target,href;if(doingClickEvent){return}if($el.is(":disabled")){return}doingClickEvent=true;if($el[0].dispatchEvent){ev=document.createEvent("MouseEvents");ev.initEvent("click",true,true);res=$el[0].dispatchEvent(ev);if($el.is("a")&&res){target=attrOrProp($el,"target");href=attrOrProp($el,"href");if(!target||target==="_self"){document.location.href=href}else{window.open(href,target)}}}else{$el.click()}doingClickEvent=false}});noSelect($div,options);return{remove:function(){$div.after($el);$div.remove();$el.unbind(options.eventNamespace);return $el},update:function(){classClearStandard($div,options);classUpdateDisabled($div,$el,options);$el.detach();ds.span.html(getHtml()).append($el)}}}},{match:function($el){return $el.is(":checkbox")},apply:function($el,options){var ds,$div,$span;ds=divSpan($el,options,{divClass:options.checkboxClass});$div=ds.div;$span=ds.span;bindUi($el,$div,options);bindMany($el,options,{"click touchend":function(){classUpdateChecked($span,$el,options)}});classUpdateChecked($span,$el,options);return{remove:unwrapUnwrapUnbindFunction($el,options),update:function(){classClearStandard($div,options);$span.removeClass(options.checkedClass);classUpdateChecked($span,$el,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){return $el.is(":file")},apply:function($el,options){var ds,$div,$filename,$button;ds=divSpan($el,options,{divClass:options.fileClass,spanClass:options.fileButtonClass,spanHtml:options.fileButtonHtml,spanWrap:"after"});$div=ds.div;$button=ds.span;$filename=$("<span />").html(options.fileDefaultHtml);$filename.addClass(options.filenameClass);$filename=divSpanWrap($el,$filename,"after");if(!attrOrProp($el,"size")){attrOrProp($el,"size",$div.width()/10)}function filenameUpdate(){setFilename($el,$filename,options)}bindUi($el,$div,options);filenameUpdate();if(isMsie()){bindMany($el,options,{click:function(){$el.trigger("change");setTimeout(filenameUpdate,0)}})}else{bindMany($el,options,{change:filenameUpdate})}noSelect($filename,options);noSelect($button,options);return{remove:function(){$filename.remove();$button.remove();return $el.unwrap().unbind(options.eventNamespace)},update:function(){classClearStandard($div,options);setFilename($el,$filename,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){if($el.is("input")){var t=(" "+attrOrProp($el,"type")+" ").toLowerCase(),allowed=" color date datetime datetime-local email month number password search tel text time url week ";return allowed.indexOf(t)>=0}return false},apply:function($el,options){var elType,$wrapper;elType=attrOrProp($el,"type");$el.addClass(options.inputClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);if(options.inputAddTypeAsClass){$el.addClass(elType)}return{remove:function(){$el.removeClass(options.inputClass);if(options.inputAddTypeAsClass){$el.removeClass(elType)}if($wrapper){$el.unwrap()}},update:returnFalse}}},{match:function($el){return $el.is(":radio")},apply:function($el,options){var ds,$div,$span;ds=divSpan($el,options,{divClass:options.radioClass});$div=ds.div;$span=ds.span;bindUi($el,$div,options);bindMany($el,options,{"click touchend":function(){$.uniform.update($(':radio[name="'+attrOrProp($el,"name")+'"]'))}});classUpdateChecked($span,$el,options);return{remove:unwrapUnwrapUnbindFunction($el,options),update:function(){classClearStandard($div,options);classUpdateChecked($span,$el,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){if($el.is("select")&&!isMultiselect($el)){return true}return false},apply:function($el,options){var ds,$div,$span,origElemWidth;if(options.selectAutoWidth){sizingInvisible($el,function(){origElemWidth=$el.width()})}ds=divSpan($el,options,{divClass:options.selectClass,spanHtml:($el.find(":selected:first")||$el.find("option:first")).html(),spanWrap:"before"});$div=ds.div;$span=ds.span;if(options.selectAutoWidth){sizingInvisible($el,function(){swap($([$span[0],$div[0]]),{display:"block"},function(){var spanPad;spanPad=$span.outerWidth()-$span.width();$div.width(origElemWidth+spanPad);$span.width(origElemWidth)})})}else{$div.addClass("fixedWidth")}bindUi($el,$div,options);bindMany($el,options,{change:function(){$span.html($el.find(":selected").html());$div.removeClass(options.activeClass)},"click touchend":function(){var selHtml=$el.find(":selected").html();if($span.html()!==selHtml){$el.trigger("change")}},keyup:function(){$span.html($el.find(":selected").html())}});noSelect($span,options);return{remove:function(){$span.remove();$el.unwrap().unbind(options.eventNamespace);return $el},update:function(){if(options.selectAutoWidth){$.uniform.restore($el);$el.uniform(options)}else{classClearStandard($div,options);$span.html($el.find(":selected").html());classUpdateDisabled($div,$el,options)}}}}},{match:function($el){if($el.is("select")&&isMultiselect($el)){return true}return false},apply:function($el,options){var $wrapper;$el.addClass(options.selectMultiClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);return{remove:function(){$el.removeClass(options.selectMultiClass);if($wrapper){$el.unwrap()}},update:returnFalse}}},{match:function($el){return $el.is("textarea")},apply:function($el,options){var $wrapper;$el.addClass(options.textareaClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);return{remove:function(){$el.removeClass(options.textareaClass);if($wrapper){$el.unwrap()}},update:returnFalse}}}];if(isMsie()&&!isMsieSevenOrNewer()){allowStyling=false}$.uniform={defaults:{activeClass:"active",autoHide:true,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:true,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:false,selectAutoWidth:true,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:true,wrapperClass:null},elements:[]};$.fn.uniform=function(options){var el=this;options=$.extend({},$.uniform.defaults,options);if(!highContrastTest){highContrastTest=true;if(highContrast()){allowStyling=false}}if(!allowStyling){return this}if(options.resetSelector){$(options.resetSelector).mouseup(function(){window.setTimeout(function(){$.uniform.update(el)},10)})}return this.each(function(){var $el=$(this),i,handler,callbacks;if($el.data("uniformed")){$.uniform.update($el);return}for(i=0;i<uniformHandlers.length;i=i+1){handler=uniformHandlers[i];if(handler.match($el,options)){callbacks=handler.apply($el,options);$el.data("uniformed",callbacks);$.uniform.elements.push($el.get(0));return}}})};$.uniform.restore=$.fn.uniform.restore=function(elem){if(elem===undef){elem=$.uniform.elements}$(elem).each(function(){var $el=$(this),index,elementData;elementData=$el.data("uniformed");if(!elementData){return}elementData.remove();index=$.inArray(this,$.uniform.elements);if(index>=0){$.uniform.elements.splice(index,1)}$el.removeData("uniformed")})};$.uniform.update=$.fn.uniform.update=function(elem){if(elem===undef){elem=$.uniform.elements}$(elem).each(function(){var $el=$(this),elementData;elementData=$el.data("uniformed");if(!elementData){return}elementData.update($el,elementData.options)})}}(jQuery)});define("lib/vendor/jquery-cookie/jquery-cookie",[],function(require,exports,module){!function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date;s.setDate(s.getDate()+q)}o=c.json?JSON.stringify(o):String(o);return document.cookie=[c.raw?p:encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend({},g,{expires:-1}));return true}return false}})});define("lib/vendor/jquery-json/2.4/jquery-json",[],function(require,exports,module){!function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var pairs,k,name,val,type=$.type(o);if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return String(o)}if(type==="string"){return $.quoteString(o)}if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(type==="date"){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||"null")}return"["+pairs.join(",")+"]"}if(typeof o==="object"){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type!=="function"&&type!=="undefined"){val=$.toJSON(o[k]);pairs.push(name+":"+val)}}}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+str+")")}throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+str+'"'}}(jQuery)});define("lib/vendor/moment/moment",[],function(require,exports,module){!function(e){function O(e,t){return function(n){return j(e.call(this,n),t)}}function M(e){return function(t){return this.lang().ordinal(e.call(this,t))}}function _(){}function D(e){H(this,e)}function P(e){var t=this._data={},n=e.years||e.year||e.y||0,r=e.months||e.month||e.M||0,i=e.weeks||e.week||e.w||0,s=e.days||e.day||e.d||0,o=e.hours||e.hour||e.h||0,u=e.minutes||e.minute||e.m||0,a=e.seconds||e.second||e.s||0,f=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=f+a*1e3+u*6e4+o*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=f%1e3,a+=B(f/1e3),t.seconds=a%60,u+=B(a/60),t.minutes=u%60,o+=B(u/60),t.hours=o%24,s+=B(o/24),s+=i*7,t.days=s%30,r+=B(s/30),t.months=r%12,n+=B(r/12),t.years=n}function H(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function B(e){return e<0?Math.ceil(e):Math.floor(e)}function j(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function F(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function I(e){return Object.prototype.toString.call(e)==="[object Array]"}function q(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function R(e,t){return t.abbr=e,s[e]||(s[e]=new _),s[e].set(t),s[e]}function U(e){return e?(!s[e]&&o&&require("./lang/"+e),s[e]):t.fn._lang}function z(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t=e.match(a),n,r;for(n=0,r=t.length;n<r;n++)A[t[n]]?t[n]=A[t[n]]:t[n]=z(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=typeof t[n].call=="function"?t[n].call(i,e):t[n];return s}}function X(e,t){function r(t){return e.lang().longDateFormat(t)||t}var n=5;while(n--&&f.test(t))t=t.replace(f,r);return C[t]||(C[t]=W(t)),C[t](e)}function V(e){switch(e){case"DDDD":return p;case"YYYY":return d;case"YYYYY":return v;case"S":case"SS":case"SSS":case"DDD":return h;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return m;case"X":return b;case"Z":case"ZZ":return g;case"T":return y;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return c;default:return new RegExp(e.replace("\\",""))}}function $(e,t,n){var r,i,s=n._a;switch(e){case"M":case"MM":s[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":r=U(n._l).monthsParse(t),r!=null?s[1]=r:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(s[2]=~~t);break;case"YY":s[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":s[0]=~~t;break;case"a":case"A":n._isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":s[3]=~~t;break;case"m":case"mm":s[4]=~~t;break;case"s":case"ss":s[5]=~~t;break;case"S":case"SS":case"SSS":s[6]=~~(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,r=(t+"").match(x),r&&r[1]&&(n._tzh=~~r[1]),r&&r[2]&&(n._tzm=~~r[2]),r&&r[0]==="+"&&(n._tzh=-n._tzh,n._tzm=-n._tzm)}t==null&&(n._isValid=!1)}function J(e){var t,n,r=[];if(e._d)return;for(t=0;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];r[3]+=e._tzh||0,r[4]+=e._tzm||0,n=new Date(0),e._useUTC?(n.setUTCFullYear(r[0],r[1],r[2]),n.setUTCHours(r[3],r[4],r[5],r[6])):(n.setFullYear(r[0],r[1],r[2]),n.setHours(r[3],r[4],r[5],r[6])),e._d=n}function K(e){var t=e._f.match(a),n=e._i,r,i;e._a=[];for(r=0;r<t.length;r++)i=(V(t[r]).exec(n)||[])[0],i&&(n=n.slice(n.indexOf(i)+i.length)),A[t[r]]&&$(t[r],i,e);e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&e._a[3]===12&&(e._a[3]=0),J(e)}function Q(e){var t,n,r,i=99,s,o,u;while(e._f.length){t=H({},e),t._f=e._f.pop(),K(t),n=new D(t);if(n.isValid()){r=n;break}u=q(t._a,n.toArray()),u<i&&(i=u,r=n)}H(e,r)}function G(e){var t,n=e._i;if(w.exec(n)){e._f="YYYY-MM-DDT";for(t=0;t<4;t++)if(S[t][1].exec(n)){e._f+=S[t][0];break}g.exec(n)&&(e._f+=" Z"),K(e)}else e._d=new Date(n)}function Y(t){var n=t._i,r=u.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):typeof n=="string"?G(t):I(n)?(t._a=n.slice(0),J(t)):t._d=n instanceof Date?new Date(+n):new Date(n)}function Z(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function et(e,t,n){var i=r(Math.abs(e)/1e3),s=r(i/60),o=r(s/60),u=r(o/24),a=r(u/365),f=i<45&&["s",i]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",r(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,Z.apply({},f)}function tt(e,n,r){var i=r-n,s=r-e.day();return s>i&&(s-=7),s<i-7&&(s+=7),Math.ceil(t(e).add("d",s).dayOfYear()/7)}function nt(e){var n=e._i,r=e._f;return n===null||n===""?null:(typeof n=="string"&&(e._i=n=U().preparse(n)),t.isMoment(n)?(e=H({},n),e._d=new Date(+n._d)):r?I(r)?Q(e):K(e):Y(e),new D(e))}function rt(e,n){t.fn[e]=t.fn[e+"s"]=function(e){var t=this._isUTC?"UTC":"";return e!=null?(this._d["set"+t+n](e),this):this._d["get"+t+n]()}}function it(e){t.duration.fn[e]=function(){return this._data[e]}}function st(e,n){t.duration.fn["as"+e]=function(){return+this/n}}var t,n="2.0.0",r=Math.round,i,s={},o=typeof module!="undefined"&&module.exports,u=/^\/?Date\((\-?\d+)/i,a=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,f=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,l=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,c=/\d\d?/,h=/\d{1,3}/,p=/\d{3}/,d=/\d{1,4}/,v=/[+\-]?\d{1,6}/,m=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,g=/Z|[\+\-]\d\d:?\d\d/i,y=/T/i,b=/[\+\-]?\d+(\.\d{1,3})?/,w=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,E="YYYY-MM-DDTHH:mm:ssZ",S=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],x=/([\+\-]|\d\d)/gi,T="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),N={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},C={},k="DDD w W M D d".split(" "),L="M D H h m s w W".split(" "),A={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return j(this.year()%100,2)},YYYY:function(){return j(this.year(),4)},YYYYY:function(){return j(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return j(~~(this.milliseconds()/10),2)},SSS:function(){return j(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+j(~~(e/60),2)+":"+j(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+j(~~(10*e/6),4)},X:function(){return this.unix()}};while(k.length)i=k.pop(),A[i+"o"]=M(A[i]);while(L.length)i=L.pop(),A[i+i]=O(A[i],2);A.DDDD=O(A.DDD,3),_.prototype={set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i,s;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return tt(e,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},t=function(e,t,n){return nt({_i:e,_f:t,_l:n,_isUTC:!1})},t.utc=function(e,t,n){return nt({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t})},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=t.isDuration(e),i=typeof e=="number",s=r?e._data:i?{}:e,o;return i&&(n?s[n]=e:s.milliseconds=e),o=new P(s),r&&e.hasOwnProperty("_lang")&&(o._lang=e._lang),o},t.version=n,t.defaultFormat=E,t.lang=function(e,n){var r;if(!e)return t.fn._lang._abbr;n?R(e,n):s[e]||U(e),t.duration.fn._lang=t.fn._lang=U(e)},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),U(e)},t.isMoment=function(e){return e instanceof D},t.isDuration=function(e){return e instanceof P},t.fn=D.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return t.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return this._isValid==null&&(this._a?this._isValid=!q(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){var n=X(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),F(this,r,1),this},subtract:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),F(this,r,-1),this},diff:function(e,n,r){var i=this._isUTC?t(e).utc():t(e).local(),s=(this.zone()-i.zone())*6e4,o,u;return n&&(n=n.replace(/s$/,"")),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-t(this).startOf("month")-(i-t(i).startOf("month")))/o,n==="year"&&(u/=12)):(o=this-i-s,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?o/864e5:n==="week"?o/6048e5:o),r?u:B(u)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().startOf("day"),"days",!0),n=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<t([this.year()]).zone()||this.zone()<t([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){e=e.replace(/s$/,"");switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.day(0),this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)===+t(e).startOf(n)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var n=r((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add("d",e-n)},isoWeek:function(e){var t=tt(this,1,4);return e==null?t:this.add("d",(e-t)*7)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},lang:function(t){return t===e?this._lang:(this._lang=U(t),this)}};for(i=0;i<T.length;i++)rt(T[i].toLowerCase().replace(/s$/,""),T[i]);rt("year","FullYear"),t.fn.days=t.fn.day,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.duration.fn=P.prototype={weeks:function(){return B(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=et(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},lang:t.fn.lang};for(i in N)N.hasOwnProperty(i)&&(st(i,N[i]),it(i.toLowerCase()));st("Weeks",6048e5),t.lang("en",{ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),o&&(module.exports=t),typeof ender=="undefined"&&(this.moment=t),typeof define=="function"&&define.amd&&define("moment",[],function(){return t})}.call(this)});define("lib/com/form",[],function(require,exports,module){var g=window;function Form(selector,options){var self=this;this.options={isAjaxRequest:true};this.init=function(){$.extend(true,this.options,options);this.disabled=false;this.container=selector instanceof jQuery?selector:$(selector);this.submitButton=this.options.submitButton||this.container.find(".btn[type='submit']");if(!(this.submitButton instanceof jQuery))this.submitButton=$(selector+" "+this.options.submitButton);this.reset();this.initValidationRules();this.initEvent();return this};this.showLoading=function(){this.disabled=true;this.submitButton.addClass("disabled").prop("disabled",true);return this};this.hideLoading=function(){this.disabled=false;this.submitButton.removeClass("disabled").removeAttr("disabled");return this};this.initEvent=function(){this.submitButton.click(function(){if(self.disabled)return;self.submit()});this.container.submit(function(){if(self.disabled)return false;self.submit();return false})};this.reset=function(){this.hideLoading();if(this.container[0].reset!==undefined)this.container[0].reset();this.container.find(".help-block").each(function(){var tip=$(this).data("tip");if(tip){$(this).text(tip).addClass("tip")}else{$(this).empty()}});return this};this.val=function(data){function getValue(name){if(data[name]){return data[name]}var split=(name+"").split(".");if($.isPlainObject(data[split[0]])){return data[split[0]][split[1]]}return null}function setValue($element,value){if($element.is("select")){$element.find("option[value='"+value+"']").prop("selected",true)
}else if($element.is(":radio")){$element.prop("checked",$element.val()===value.toString());$.uniform.update($element)}else if($element.is(":checkbox")){var checked=false;if($.isArray(value)){for(var i=0;i<value.length;i++){if($element.val()===value[i].toString()){checked=true}}}else{checked=$element.val()===value.toString()}$element.prop("checked",checked);$.uniform.update($element)}else{$element.val(value)}}this.container.find("input,textarea,select").each(function(index){var name=$(this).attr("name");var value=getValue(name);if(name&&value!==null){setValue($(this),value)}});return this};this.initValidationRules=function(){if(!this.container.validate)return false;var reserveOptions={errorElement:"span",errorClass:"help-block",focusInvalid:true,ignore:"",rules:{},invalidHandler:function(event,validator){},highlight:function(element){},unhighlight:function(element){},success:function(label){label.closest(".form-group").removeClass("has-error")},submitHandler:function(form){return false}};$.extend(reserveOptions,this.options.validate);this.container.validate(reserveOptions);return this};this.submit=function(){this.showLoading();var data=this.container.serializeArray();var handleSubmit=this.options.submitModelEvent;var handleSubmitParams=this.options.submitModelParams;var handleDataFormat=this.options.submitDataFormat;var handleSubmitError=this.options.submitError;var handleSubmitSuccess=this.options.submitSuccess;if(handleDataFormat!==undefined)data=handleDataFormat(data,this.container);if(!this.validate()){setTimeout(function(){self.hideLoading()},500);return false}var params=[data,function(resp,valid){self.complete();if(!valid){if(handleSubmitError!==undefined)handleSubmitError(resp,valid);return}if(handleSubmitSuccess!==undefined)handleSubmitSuccess(resp,valid)}];if(handleSubmitParams!==undefined)params=handleSubmitParams.apply(this,params);if(handleSubmit!==undefined)handleSubmit.apply(this,params);if(this.options.isAjaxRequest)return false;return this};this.getFormData=function(){var data=this.container.serializeArray();var handleDataFormat=this.options.submitDataFormat;if(handleDataFormat!==undefined)data=handleDataFormat(data,this.container);return data};this.validate=function(){var $form=this.container;var validate=this.options.validate;var failA=false;var failB=false;var data=this.container.serializeArray();if($form.valid!==undefined)failA=!$form.valid();if(validate&&validate.custom!==undefined)failB=!validate.custom(data,$form);if(failA||failB)return false;return true};this.complete=function(data,valid){this.hideLoading();return this}}g[PagurianAlias].form=function(selector,options){return new Form(selector,options).init()}});define("lib/com/alert",[],function(require,exports,module){var g=window;var types=["success","info","error","warn"];function Alert(){var timer;this.show=function(message,type){var className=type||"success";var messageDom='<div class="global-message '+className+'">'+message+"</div>";var $headerMessageWrap=$(".global-message").length>0?$(".global-message").html(message).removeClass().addClass("global-message "+className):$(messageDom);if(className!=="success"){var visibleModal=false;$(".modal.in").each(function(){$(this).find(".modal-message").html(messageDom);visibleModal=true});if(visibleModal){return this}}$("body").append($headerMessageWrap);$headerMessageWrap.css({"margin-left":"-"+$headerMessageWrap.outerWidth()/2+"px"});clearTimeout(timer);timer=setTimeout(function(){$headerMessageWrap.remove()},3e3);return this}}g[PagurianAlias].alert=function(message,type){return(new Alert).show(message,type)};$.each(types,function(index,type){g[PagurianAlias].alert[type]=function(message){g[PagurianAlias].alert(message,type)}})});define("lib/com/dialog",[],function(require,exports,module){var g=window;var template=require("lib/tpl/dialog.tpl");function Dialog(selector,options){var timer;var self=this;function resize(){var scrollHeight=self.body.height();var overHeight=214;var contentHeight=$(window).height()-overHeight;if(options.width){var padding=36;self.content.width(options.width+padding);self.content.parent().width(options.width+padding)}if(scrollHeight>=contentHeight){self.body.css("max-height",contentHeight)}self.body.scrollTop(0)}this.id=$p.tool.newId();this.language={zh_CN:{title:"",buttonSubmit:"",buttonCancel:"",body:""},en_US:{title:"Title",buttonSubmit:"Confirm",buttonCancel:"Cancel",body:"Hello, I am a dialog ."}};this.reset=function(){if(this.form){this.form[0].reset();this.form.find(".help-block").each(function(){var tip=$(this).data("tip");if(tip){$(this).text(tip).addClass("tip")}else{$(this).empty()}})}this.container.find(".submit-waiting").empty();this.container.find(".modal-message").empty();this.container.find(".btn").removeClass("disabled").removeAttr("disabled");this.container.find(".form-group").removeClass("has-error");this.whisper.empty().show()};this.init=function(){var dialogBody;if(!$p.tool.isString(options.body)){dialogBody=options.body;options.body=""}options.id=this.id;this.htmlTpl=$p.tpl(template,$.extend(this.language[$p.language||"zh_CN"],options));$("body").append(this.htmlTpl);this.container=$("#modal"+this.id);this.whisper=$("#whisper"+this.id);this.form=this.container.find("form").length?this.container.find("form"):null;this.body=this.container.find(".modal-body");this.content=this.container.find(".modal-content");this.submitButton=$("#btn_submit"+this.id);this.cancelButton=$("#btn_cancel"+this.id);this.container.addClass(options.className);if(dialogBody){this.body.append(dialogBody)}this.initEvent();if(options.preload!==undefined)options.preload(this);return this};this.showLoading=function(){this.submitButton.addClass("disabled").prop("disabled",true);this.container.find(".submit-waiting").html('<i class="fa fa-spinner fa-spin"></i>');return this};this.hideLoading=function(){this.submitButton.removeClass("disabled").removeAttr("disabled");this.container.find(".submit-waiting").empty();return this};this.submitForm=function(){var data;if(self.form){data=self.form.serializeArray();var failA=self.form.valid!==undefined?!self.form.valid():false;var failB=options.validate!==undefined&&!options.validate(self,data,self.params);if(failA||failB)return this}this.showLoading();if(options.submit!==undefined)options.submit(self,data,self.params);return this};this.initEvent=function(){if(selector){$(document).delegate(selector,"click",function(){if($(this).hasClass("disabled")||$(this).attr("disabled")){return}var params=$(this).data("params");var $form=self.form;self.params=eval("("+params+")")||{};self.show()})}if(this.form){this.form.submit(function(){self.submitForm();return false})}this.submitButton.click(function(){self.submitForm()});this.cancelButton.click(function(){if(options.cancel!==undefined)options.cancel(self,self.params)})};this.complete=function(){this.hideLoading();return this};this.show=function(){this.reset();this.container.modal("show");if(options.initForm!==undefined)options.initForm(this,this.form,this.params);setTimeout(resize,200);return this};this.hide=function(){this.container.modal("hide");return this};this.showWhisper=function(message,type){var $whisper=this.whisper.html(message).show();var className={info:"whisper-success",error:"whisper-error"};$whisper.removeClass().addClass("whisper "+className[type||"info"]);clearTimeout(timer);timer=setTimeout(function(){$whisper.empty().hide()},3e3);return this}}g[PagurianAlias].dialog=function(selector,options){if(arguments.length===1){return new Dialog(null,arguments[0]).init()}return new Dialog(selector,options).init()}});define("lib/tpl/dialog.tpl",[],'<div class="modal fade" id="modal{id}">\n    <div class="modal-dialog ">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button aria-hidden="true" data-dismiss="modal" class="close" type="button">\n                    <i class="icon icon-close"></i>\n                </button>\n                <h4 class="modal-title">{title}</h4>\n            </div>\n            <div class="modal-body">\n                <div class="modal-message"></div>\n                {body}\n            </div>\n            <div class="modal-footer">\n                <div id="whisper{id}" class="whisper whisper-success"></div>\n                <span class="submit-waiting"></span>\n                <button id="btn_submit{id}" class="btn btn-primary" type="button">{buttonSubmit}</button>\n                <button id="btn_cancel{id}" data-dismiss="modal" class="btn btn-default" type="button">{buttonCancel}</button>\n            </div>\n        </div>\n    </div>\n</div>\n');define("lib/com/select",[],function(require,exports,module){var g=window;function Select(){this.init=function(selector,options){var dataList=options.data;var elements=$(selector);elements.empty();var selected="";for(var i=0;i<dataList.length;i++){selected="";if(options.active===dataList[i].id){selected='selected="selected"'}elements.append("<option value='"+dataList[i].id+"' "+selected+">"+dataList[i].name+"</option>")}return this}}g[PagurianAlias].select=function(selector,options){return(new Select).init(selector,options)}});define("lib/com/checkboxes",[],function(require,exports,module){var g=window;function Checkboxes(selector,options){this.container=$(selector);this.init=function(){var that=this;this.container.addClass("checkbox-list "+(options.className||""));this.load(options);this.container.on("click","input[type='checkbox']",function(){var $input=$(this);var checkedItem={value:$input.val(),text:$input.data("text"),checked:$input.is(":checked")};for(var i=0;i<that.items.length;i++){if(that.items[i].value.toString()===$input.val()){that.items[i].checked=$input.is(":checked")}}if($.isFunction(options.click)){options.click(checkedItem,that.getCheckedItems())}});return this};this.load=function(data){this.items=[];this.name=data.name;this.container.empty();var item,i;for(i=0;i<data.items.length;i++){this.items.push($.extend({},data.items[i]))}for(i=0;i<this.items.length;i++){item=['<label class="checkbox-item" ><input type="checkbox"','name="'+this.name+'"','value="'+this.items[i].value+'"','data-text="'+this.items[i].text+'"'];if(this.items[i].checked){item.push("checked=checked")}if(this.items[i].disabled){item.push("disabled=true")}item.push("/> "+this.items[i].text+"</label>");this.container.append(item.join(" "))}if(jQuery().uniform){this.container.find("input[type='checkbox']").uniform()}return this};this.checkAll=function(){this.check(true);return this};this.uncheckAll=function(){this.check(false);return this};this.check=function(flag){var elements=this.container.find("input[type='checkbox']");elements.prop("checked",flag);if(jQuery().uniform){$.uniform.update(elements)}};this.getItems=function(){return this.items};this.getCheckedItems=function(){var checkedItems=[];for(var i=0;i<this.items.length;i++){if(this.items[i].checked){checkedItems.push(this.items[i])}}return checkedItems};this.destroy=function(){this.container.empty()}}g[PagurianAlias].checkboxes=function(selector,options){return new Checkboxes(selector,options).init()}});define("lib/tool/tool",[],function(require,exports,module){var g=window;g[PagurianAlias].tool={newId:function(){return"_"+(Math.random()*1e18).toString(36).slice(0,5).toUpperCase()},isArray:function(o){return Object.prototype.toString.call(o)==="[object Array]"},isObject:function(o){return Object.prototype.toString.call(o)==="[object Object]"},isNumber:function(value){return/^[0-9]+.?[0-9]*$/.test(value)},isNull:function(o){return Object.prototype.toString.call(o)==="[object Null]"},isFunction:function(o){return typeof o==="function"},isString:function(o){return Object.prototype.toString.call(o)==="[object String]"},encode:function(value){return encodeURIComponent(value)},decode:function(value){return decodeURIComponent(value)},encodeHtml:function(str){var s="";if(str.length===0)return"";s=str.replace(/&/g,"&amp;");s=s.replace(/</g,"&lt;");s=s.replace(/>/g,"&gt;");s=s.replace(/ /g,"&nbsp;");s=s.replace(/\'/g,"&#39;");s=s.replace(/\"/g,"&quot;");s=s.replace(/\n/g,"<br>");return s},decodeHtml:function(str){var s="";if(!str||str.length===0)return"";str+="";s=str.replace(/&amp;/g,"&");s=s.replace(/&lt;/g,"<");s=s.replace(/&gt;/g,">");s=s.replace(/&nbsp;/g," ");s=s.replace(/&#39;/g,"'");s=s.replace(/&quot;/g,'"');s=s.replace(/<br>/g,"\n");return s},objectToUrlParams:function(params){var str_params="",url_split="";for(var i in params){if(typeof params[i]!=="function"){if(typeof params[i]==="object"){for(var j=0;j<params[i].length;j++){str_params+=url_split+i+"="+this.encode(this.encode(params[i][j]));url_split="&"}continue}str_params+=url_split+i+"="+this.encode(this.encode(params[i]));url_split="&"}}return str_params},toDecimal:function(arg,num){if($p.tool.isNull(arg)||arg===undefined||arg==="--"){return"--"}if(!arg||arg==="--"){return"0.00"}try{return arg.toFixed(num||2)}catch(e){return arg}return arg},toThousands:function(num){return(num+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")},formatTime:function(timestamp){if($p.tool.isNull(timestamp)){return"--"}if(!timestamp){return"00:00:00"}var ss=Math.round(timestamp);if(!ss){return"00:00:00"}var t3=ss%60;var t2=parseInt(ss/60);var t1=0;if(t2>=60){t1=parseInt(t2/60);t2=t2%60}return(t1<10?"0"+t1:t1)+":"+(t2<10?"0"+t2:t2)+":"+(t3<10?"0"+t3:t3)},formatDateRange:function(daterange,type){var times=daterange.split("~");switch(type){case"HOUR":return moment(times[0]).format("YYYY-MM-DD HH:mm:ss");case"DAY":return moment(times[0]).format("YYYY-MM-DD");case"WEEK":return moment(times[0]).format("YYYY-MM-DD")+" ~ "+moment(times[1]).format("YYYY-MM-DD");case"MONTH":return moment(times[0]).format("YYYY-MM");default:return""}},floatMul:function(arg1,arg2,sign){if($p.tool.isNull(arg1)){return"--"}if(!arg1||!arg2){return"0.00"}var m=0,s1=arg1.toString(),s2=arg2.toString();try{m+=s1.split(".")[1].length}catch(e){}try{m+=s2.split(".")[1].length}catch(e){}var n=Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m);return $p.tool.toDecimal(n)+sign},throttle:function(func,wait,options){var context,args,result;var timeout=null;var previous=0;var _now=Date.now||function(){return(new Date).getTime()};if(!options)options={};var later=function(){previous=options.leading===false?0:_now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}},debounce:function(func,wait,immediate){var timeout,args,context,timestamp,result;var _now=Date.now||function(){return(new Date).getTime()};var later=function(){var last=_now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}}}});define("lib/tool/url",[],function(require,exports,module){var g=window;g[PagurianAlias].url={getParameter:function(paramName){var searchString=window.location.search.substring(1),i,val,params=searchString.split("&");for(i=0;i<params.length;i++){val=params[i].split("=");if(val[0]===paramName){return g[PagurianAlias].tool.decode(val[1])}}return null},getReferrer:function(){return document.referrer},format:function(url){if(!url){return""}if(url.substring(0,4)!=="http"){url="http://"+url}return url},forward:function(url){setTimeout(function(){window.location.href=url},1e3);return this},reload:function(){window.location.reload();return this},convertParams:function(params){var str_params="",url_split="";for(var i in params){if(typeof params[i]!=="function"){if(typeof params[i]==="object"){for(var j=0;j<params[i].length;j++){str_params+=url_split+i+"="+encodeURIComponent(encodeURIComponent(params[i][j]));url_split="&"}continue}str_params+=url_split+i+"="+encodeURIComponent(encodeURIComponent(params[i]));url_split="&"}}return str_params},parse:function(url){var a=document.createElement("a");a.href=url;return{source:url,protocol:a.protocol.replace(":",""),host:a.hostname,port:a.port,query:a.search,params:function(){var ret={},seg=a.search.replace(/^\?/,"").split("&"),len=seg.length,i=0,s;for(;i<len;i++){if(!seg[i]){continue}s=seg[i].split("=");ret[s[0]]=s[1]}return ret}(),file:(a.pathname.match(/([^\/?#]+)$/i)||[0,""])[1],hash:a.hash.replace("#",""),path:a.pathname.replace(/^([^\/])/,"/$1"),relative:(a.href.match(/tps?:\/[^\/]+(.+)/)||[0,""])[1],segments:a.pathname.replace(/^\//,"").split("/")}}}});define("lib/tool/str",[],function(require,exports,module){var g=window;g[PagurianAlias].str={underscoreName:function(name){return name.replace(/([A-Z])/g,"_$1").toLowerCase()},camelName:function(name){return name.replace(/\-(\w)/g,function(x){return x.slice(1).toUpperCase()})},format:function(pattern){var pointer=0,i;for(i=1;i<arguments.length;i++){pattern=pattern.split("{"+pointer+"}").join(arguments[i]);pointer++}return pattern}}});define("lib/core/tpl",[],function(require,exports,module){var g=window;var FN={};var ESCAPING_MAP={"\\":"\\\\","\n":"\\n","\r":"\\r","\u2028":"\\u2028","\u2029":"\\u2029","'":"\\'"};function Tpl(){this.render=function(template,data){if(!template)return"";FN[template]=FN[template]||new Function("_","return '"+template.replace(/[\\\n\r\u2028\u2029']/g,function(escape){return ESCAPING_MAP[escape]}).replace(/\{\s*(\w+)\s*\}/g,"'+(_.$1?(_.$1+'').replace(/[&\"<>]/g,function(e){return e}):(_.$1===0?0:''))+'")+"'");return FN[template](data)}}g[PagurianAlias].tpl=function(template,data){var tpl=new Tpl;return tpl.render(template,data)}});define("lib/core/layout",[],function(require,exports,module){var isRTL=false;var isIE8=false;var isIE9=false;var isIE10=false;var sidebarWidth=225;var sidebarCollapsedWidth=35;function _getViewPort(){var e=window,a="inner";if(!("innerWidth"in window)){a="client";e=document.documentElement||document.body}return{width:e[a+"Width"],height:e[a+"Height"]}}function doInit(){if($("body").css("direction")==="rtl"){isRTL=true}isIE8=!!navigator.userAgent.match(/MSIE 8.0/);isIE9=!!navigator.userAgent.match(/MSIE 9.0/);isIE10=!!navigator.userAgent.match(/MSIE 10.0/);if(isIE10){$("html").addClass("ie10")}if(isIE10||isIE9||isIE8){$("html").addClass("ie")}}function doResponsive(){doSidebarAndContentHeight();doAppResizeEvent();doModalHeight()}function doResponsiveOnInit(){doSidebarAndContentHeight()}function doResponsiveOnResize(){var resize;if(isIE8){var currheight;$(window).resize($p.tool.debounce(function(){if(currheight===document.documentElement.clientHeight){return}doResponsive();currheight=document.documentElement.clientHeight},50))}else{$(window).resize($p.tool.debounce(function(){doResponsive()},50))}}function doSidebarAndContentHeight(){var content=$(".page-content");var available_height=$(window).height()-$(".footer").outerHeight()-$(".header").outerHeight();if($(".footer").hasClass("fixed")){$(".footer").removeClass("fixed")}content.css("min-height",available_height+"px")}function doModalHeight(){var modal_body=$(".modal:visible .modal-body");if(modal_body.length<1){return}var available_height=modal_body[0].scrollHeight;var custom_height=114;var footer_height=50;var header_height=50;var content_height=$(window).height()-footer_height-header_height-custom_height;if(available_height>=content_height){modal_body.css("max-height",content_height)}else{modal_body.css("max-height","none")}}function doPortletTools(){$("body").on("click",".portlet > .portlet-title > .tools > a.remove",function(e){e.preventDefault();$(this).closest(".portlet").remove()});$("body").on("click",".portlet > .portlet-title > .tools > .collapse, .portlet .portlet-title > .tools > .expand",function(e){e.preventDefault();var el=$(this).closest(".portlet").children(".portlet-body");if($(this).hasClass("collapse")){$(this).removeClass("collapse").addClass("expand");el.slideUp(200)}else{$(this).removeClass("expand").addClass("collapse");el.slideDown(200)}})}function doUniform(){if(!jQuery().uniform){return}var test=$("input[type=checkbox]:not(.toggle), input[type=radio]:not(.toggle, .star)");if(test.size()>0){test.each(function(){if($(this).parents(".checker").size()===0){$(this).show();$(this).uniform()}})}}function doTooltips(){$(".tooltips").tooltip()}function doDropdowns(){$("body").on("click",".dropdown-menu.hold-on-click",function(e){e.stopPropagation()});$(document).delegate("[data-type='select'] .dropdown-menu a","click",function(){var text=$(this).text();var icon=$(this).parents(".btn-group").find("button>i").prop("outerHTML");$(this).parents(".dropdown-menu").prev().html(text+" "+icon)})}function doDropdownHover(){if($.fn.dropdownHover){$('[data-hover="dropdown"]').dropdownHover()}}function doAlerts(){$("body").on("click",'[data-close="alert"]',function(e){$(this).parent(".alert").hide();e.preventDefault()})}function doPopovers(){$(".popovers").popover()}function doTabs(){$("body").on("shown.bs.tab",".nav.nav-tabs",function(){doSidebarAndContentHeight()});if(location.hash){var tabid=location.hash.substr(1);$('a[href="#'+tabid+'"]').parents(".tab-pane:hidden").each(function(){var tabid=$(this).attr("id");$('a[href="#'+tabid+'"]').click()});$('a[href="#'+tabid+'"]').click()}}function doFixInputPlaceholderForIE(){if(isIE8||isIE9){$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var input=$(this);if(input.val()===""&&input.attr("placeholder")!==""){input.addClass("placeholder").val(input.attr("placeholder"))}input.focus(function(){if(input.val()===input.attr("placeholder")){input.val("")}});input.blur(function(){if(input.val()===""||input.val()===input.attr("placeholder")){input.val(input.attr("placeholder"))}})})}}function doSelect2(){if(jQuery().select2){$(".select2me").select2({placeholder:"Select",allowClear:true})}}function doHighlightCode(){if(!window.hljs){return}$("pre code").each(function(){var lines=$(this).text().split("\n").length;var $numbering=$("<ul/>").addClass("pre-numbering");$(this).addClass("has-numbering").parent().append($numbering);for(i=1;i<=lines;i++){$numbering.append($("<li/>").text(i))}});$("pre code").each(function(i,block){hljs.highlightBlock(block)})}function doAppResizeEvent(){for(var i=0,len=resizeEventQueue.length;i<len;i++){if("function"===typeof resizeEventQueue[i]){resizeEventQueue[i]()}}}function doSidebarOver(){var $spanner=$(".page-sidebar-spanner");var $sidebar=$(".page-sidebar-wrapper");var menuHeight=$(".page-sidebar-menu").height();var sidebarHeight=$sidebar.height();var top=$sidebar.scrollTop();var left=$(window).scrollLeft();if(top-50+sidebarHeight>=menuHeight){$spanner.removeClass("over")}else{$spanner.addClass("over")}if(left>2){$sidebar.addClass("over")}else{$sidebar.removeClass("over")}}function doSidebarScroll(){resizeEventQueue.push(doSidebarOver);$(".page-sidebar-wrapper").scroll(function(){doSidebarOver()});doSidebarOver()}function doWindowScroll(){$(window).scroll(function(){doSidebarOver()})}function doSidebarToggle(){if(!$(".page-sidebar-wrapper").length){return}var display=$.cookie("sidebar_display")||"show";if(display==="show"){show()}else{hide()}function setCookie(value){display=value;$.cookie("sidebar_display",value,{path:"/"})}function hide(){$("body").addClass("sidebar-hide")}function show(){$("body").removeClass("sidebar-hide")}function toggle(){if(display==="show"){hide();setCookie("hide");return}show();setCookie("show")}$(".page-sidebar-spanner").click(function(){toggle();doAppResizeEvent()})}function doSidebarMenuStatus(){var menuId=$(".page-sidebar-menu").attr("id")||"menu";var items=$.cookie(menuId+"_close_items");items=items?items.split(","):[];$(".page-sidebar-menu>li").each(function(index){index=$(this).data("id");if($.inArray(index,items)>=0){$(this).removeClass("open")}else{$(this).addClass("open")}});return function(){var items=[];$(".page-sidebar-menu>li").each(function(index){if(!$(this).hasClass("open")){items.push($(this).data("id"))}});$.cookie(menuId+"_close_items",items,{path:"/"})}}var resizeEventQueue=[];module.exports={init:function(){doInit();doResponsiveOnResize();doUniform();doResponsiveOnInit();doFixInputPlaceholderForIE();doSelect2();doPortletTools();doAlerts();doDropdowns();doDropdownHover();doTooltips();doPopovers();doTabs();doHighlightCode();doSidebarScroll();doSidebarToggle();doWindowScroll()},fixContentHeight:function(){doSidebarAndContentHeight()},resize:function(callback){resizeEventQueue.push(callback)},activateCurrentMenu:function(){if(window.CONFIG&&CONFIG.appId){$(".page-sidebar-menu li[data-id='"+CONFIG.appId+"']").addClass("active")}},updateUniform:function(){doUniform()},custom:function(){var _doSidebarMenuStatus=doSidebarMenuStatus();$(".page-sidebar-menu>li>a").on("click",function(e){var $li=$(this).parent();if($li.hasClass("open")){$li.removeClass("open");$li.find(".arrow").removeClass("open")}else{$li.addClass("open");$li.find(".arrow").addClass("open")}_doSidebarMenuStatus();doSidebarOver()})}}});define("conf/locale.zh_CN",[],{get:function(key){return this[key]},success:"",error:"",undefine:"",exception:"",timeout:"",disable:"",enable:"",loading:""});define("conf/locale.en_US",[],{get:function(key){return this[key]},success:"Successful operation",error:"Operation failure",undefine:"Exception, object is undefined",exception:"Exception",timeout:"Timeout",disable:"Disable",enable:"Enable",loading:"Loading"});define("lib/service",["lib/core/ajax","lib/core/transport","lib/core/validate"],function(require,exports,module){var ajax=require("lib/core/ajax");var transport=require("lib/core/transport");var validate=require("lib/core/validate");function validateRequest(options){if($.inArray(options.type,["get","delete","post","put","patch"])===-1){$p.log("type is undefined");return false}if(!options.url){$p.log("url is undefined");return false}return true}function getOptions(){var options={original:false,bundle:true,data:{}};if(arguments.length===1&&$.isPlainObject(arguments[0])){return $.extend(options,arguments[0])}if(arguments.length===3){options.url=arguments[0];options.data=filterParams(arguments[1]);options.callback=arguments[2];return options}options.type=arguments[0];options.url=arguments[1];options.data=filterParams(arguments[2]);options.callback=arguments[3];return options}function filterParams(params){var data=$.isArray(params)?[]:{};function push(key,value,type){var _temp={name:key,value:value};if($.isArray(data)){_temp&&(_temp.type=type);data.push(_temp);return data}return data[key]=value}$.each(params,function(index,value){if($p.tool.isNumber(index)&&$.isPlainObject(value)){push(value.name,value.value)}else if(!$.isFunction(value)){push(index,value)}});return data}function encode(data){return encodeURI(data)}function appendParam(params,param){var isEmpty=true;if($.isPlainObject(params)){params[param.name]=param.value;return params}if($.isArray(params)){for(var i=0;i<params.length;i++){if(params[i].name===param.name){params[i].value=param.value;isEmpty=false}}if(isEmpty){params.push(param)}}return params}function requestDate(options){if(!validateRequest(options)){return false}if(options.type==="get"){options.data=encode($.param(options.data,true))}else if(options.type==="delete"){options.url=options.url+"?"+encode($.param(options.data,true))}else if($.inArray(options.type,["post","put","patch"])>-1){if(!options.original){options.data=transport.toObject(options.data)}if(options.bundle){options.contentType="application/json";options.data=transport.toJSON(options.data)}}options.url=pagurian.path.api+options.url+(pagurian.lib.apiPostfix||"");ajax.getJSON(options,function(response){var valid=validate.check(response);response.result=response.result||{};options.callback(response,valid)})}module.exports={validateRespone:function(respone){return validate.check(respone)},get:function(url,params,callback){var options=getOptions.apply(this,arguments);appendParam(options.params,{name:"locale",value:$p.language});appendParam(options.params,{name:"_ts",value:"_"+(Math.random()*1e18).toString(36).slice(0,5)});options.type="get";requestDate(options)},post:function(url,params,callback){var options=getOptions.apply(this,arguments);options.type="post";requestDate(options)},request:function(type,url,params,callback){var options=getOptions.apply(this,arguments);requestDate(options)}}});define("lib/core/ajax",[],function(require,exports,module){function send(options,callback){return $.ajax($.extend({timeout:3e4,success:function(data,textStatus,jqueryXHR){callback(data,textStatus,jqueryXHR)},error:function(jqueryXHR,textStatus,errorThrown){var responeData={error:true};for(var value in jqueryXHR){if($.isFunction(jqueryXHR[value]))continue;responeData[value]=jqueryXHR[value]}callback({code:jqueryXHR.status,result:responeData})}},options))}module.exports={getJSON:function(options,callback){options.dataType="json";return send(options,function(){if(callback!==undefined)callback.apply(this,arguments)})}}});define("lib/core/transport",[],function(require,exports,module){function handleArrayToObject(data){var tempData={};if($.isPlainObject(data)){return data}if(!$.isArray(data)){$p.log("Data is not an array");return null}for(var i=0;i<data.length;i++){if(tempData[data[i].name]){var _item=tempData[data[i].name];if(!$.isArray(_item)){tempData[data[i].name]=[_item]}tempData[data[i].name].push(data[i].value);continue}if(data[i].type==="array"){tempData[data[i].name]=[data[i].value];continue}tempData[data[i].name]=data[i].value}return tempData}function handleObjectStructuredKey(tempData){var finishData={};for(var key in tempData){var keys=key.split(".");var value=tempData[key];if($p.tool.isString(value)){value=$.trim(value)}if(keys.length===1){finishData[key]=value;continue}if($.isArray(value)){finishData[keys[0]]=finishData[keys[0]]||[];for(var i=0,tempValue;i<value.length;i++){tempValue={};tempValue[keys[1]]=value[i];finishData[keys[0]].push(tempValue)}continue}finishData[keys[0]]=finishData[keys[0]]||{};finishData[keys[0]][keys[1]]=value}return finishData}module.exports={toObject:function(data){var tempData=handleArrayToObject(data);var finishData=handleObjectStructuredKey(tempData);return finishData},toJSON:function(data){return $.toJSON({data:data})}}});define("lib/core/validate",[],function(require,exports,module){function handleServerCheck(code){var dot=(code+"").match(/\.\d*/);var postfix="error_200403";if(dot&&dot[0]===".17"){$p.url.reload();return}if(dot){postfix+="_"+dot[0].substr(1)}$p.alert($p.locale.handle_exception,"warning");$p.url.forward(CONFIG.ctxPath()+"/"+$p.lib.route[postfix]);return false}function checkFields(data){var fields=data.fields;for(var k in fields){$element=$(".help-block[for^='"+k+"']");$element.removeClass("tip");$element.html(fields[k][0].message)}return false}module.exports={check:function(data){var code=data.code;switch(true){case/200000/.test(code):return true;case/200001/.test(code):$p.alert(data.message,"warning");return false;case/200002/.test(code):return checkFields(data);case/200403/.test(code):return handleServerCheck(code);case/100\d/.test(code):$p.alert($p.locale.handle_exception,"error");return false;case code===0:if(data.result&&data.result.statusText==="timeout"){$p.alert($p.locale.handle_timeout,"error");return false}$p.alert($p.locale.handle_exception,"error");return false;case/400/.test(code):$p.alert($p.locale.params_error,"error");return false;case/404/.test(code):$p.alert($p.locale.handle_exception,"error");return false;case code===405:$p.alert($p.locale.handle_exception,"error");return false;case code===500:$p.alert($p.locale.handle_exception,"error");
return false;default:return true}return true}}});define("conf/route",[],{});define("conf/api",[],{postfix:".json",items:{keywords:"keywords",user:"user",succeed:"succeed",dataListData:"datalistdata",sizerData:"sizerdata",summaryData:"summaryData"}});define("plugins/number-spinner/module",["plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin"],function(require,exports,module){var g=window;require("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin.css");require("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin");function NumberSpinner(selector,options){this.container=selector instanceof jQuery?selector:$(selector);this.container.TouchSpin($.extend({verticalbuttons:true},options));this.destroy=function(){this.container.TouchSpin("destroy")};if($.isFunction(options.change)){this.container.on("change",function(entity){var data=$(entity.target).val();options.change(data,entity)})}}g[PagurianAlias].numberSpinner=function(selector,options){return new NumberSpinner(selector,options)}});define("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin.css",[],function(){seajs.importStyle(".bootstrap-touchspin .input-group-btn-vertical{position:relative;white-space:nowrap;vertical-align:middle;display:table-cell}.bootstrap-touchspin .input-group-btn-vertical>.btn{display:block;float:none;width:100%;max-width:100%;padding:8px 10px;margin-left:-1px;position:relative;border:1px solid #ddd}.bootstrap-touchspin .input-group-btn-vertical .bootstrap-touchspin-up{border-radius:0}.bootstrap-touchspin .input-group-btn-vertical .bootstrap-touchspin-down{border-radius:0}.bootstrap-touchspin .input-group-btn-vertical i{position:absolute;top:0;left:5px;font-size:9px;font-weight:400}")});define("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin",[],function(require,exports,module){!function($){"use strict";var _currentSpinnerId=0;function _scopedEventName(name,id){return name+".touchspin_"+id}function _scopeEventNames(names,id){return $.map(names,function(name){return _scopedEventName(name,id)})}$.fn.TouchSpin=function(options){if(options==="destroy"){this.each(function(){var originalinput=$(this),originalinput_data=originalinput.data();$(document).off(_scopeEventNames(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],originalinput_data.spinnerid).join(" "))});return}var defaults={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:false,verticalupclass:"fa fa-chevron-up",verticaldownclass:"fa fa-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:true,boostat:10,maxboostedstep:false,mousewheel:true,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:'<i class="fa fa-minus"></i>',buttonup_txt:'<i class="fa fa-plus"></i>'};var attributeMap={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){var settings,originalinput=$(this),originalinput_data=originalinput.data(),container,elements,value,downSpinTimer,upSpinTimer,downDelayTimeout,upDelayTimeout,spincount=0,spinning=false;init();function init(){if(originalinput.data("alreadyinitialized")){return}originalinput.data("alreadyinitialized",true);_currentSpinnerId+=1;originalinput.data("spinnerid",_currentSpinnerId);if(!originalinput.is("input")){console.log("Must be an input.");return}_initSettings();_setInitval();_checkValue();_buildHtml();_initElements();_hideEmptyPrefixPostfix();_bindEvents();_bindEventsInterface();elements.input.css("display","block")}function _setInitval(){if(settings.initval!==""&&originalinput.val()===""){originalinput.val(settings.initval)}}function changeSettings(newsettings){_updateSettings(newsettings);_checkValue();var value=elements.input.val();if(value!==""){value=Number(elements.input.val());elements.input.val(value.toFixed(settings.decimals))}}function _initSettings(){settings=$.extend({},defaults,originalinput_data,_parseAttributes(),options)}function _parseAttributes(){var data={};$.each(attributeMap,function(key,value){var attrName="bts-"+value+"";if(originalinput.is("[data-"+attrName+"]")){data[key]=originalinput.data(attrName)}});return data}function _updateSettings(newsettings){settings=$.extend({},settings,newsettings)}function _buildHtml(){var initval=originalinput.val(),parentelement=originalinput.parent();if(initval!==""){initval=Number(initval).toFixed(settings.decimals)}originalinput.data("initvalue",initval).val(initval);originalinput.addClass("form-control");if(parentelement.hasClass("input-group")){_advanceInputGroup(parentelement)}else{_buildInputGroup()}}function _advanceInputGroup(parentelement){parentelement.addClass("bootstrap-touchspin");var prev=originalinput.prev(),next=originalinput.next();var downhtml,uphtml,prefixhtml='<span class="input-group-addon bootstrap-touchspin-prefix">'+settings.prefix+"</span>",postfixhtml='<span class="input-group-addon bootstrap-touchspin-postfix">'+settings.postfix+"</span>";if(prev.hasClass("input-group-btn")){downhtml='<button class="'+settings.buttondown_class+' bootstrap-touchspin-down" type="button">'+settings.buttondown_txt+"</button>";prev.append(downhtml)}else{downhtml='<span class="input-group-btn"><button class="'+settings.buttondown_class+' bootstrap-touchspin-down" type="button">'+settings.buttondown_txt+"</button></span>";$(downhtml).insertBefore(originalinput)}if(next.hasClass("input-group-btn")){uphtml='<button class="'+settings.buttonup_class+' bootstrap-touchspin-up" type="button">'+settings.buttonup_txt+"</button>";next.prepend(uphtml)}else{uphtml='<span class="input-group-btn"><button class="'+settings.buttonup_class+' bootstrap-touchspin-up" type="button">'+settings.buttonup_txt+"</button></span>";$(uphtml).insertAfter(originalinput)}$(prefixhtml).insertBefore(originalinput);$(postfixhtml).insertAfter(originalinput);container=parentelement}function _buildInputGroup(){var html;if(settings.verticalbuttons){html='<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+settings.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+settings.postfix+'</span><span class="input-group-btn-vertical"><button class="'+settings.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+settings.verticalupclass+'"></i></button><button class="'+settings.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+settings.verticaldownclass+'"></i></button></span></div>'}else{html='<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+settings.buttondown_class+' bootstrap-touchspin-down" type="button">'+settings.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+settings.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+settings.postfix+'</span><span class="input-group-btn"><button class="'+settings.buttonup_class+' bootstrap-touchspin-up" type="button">'+settings.buttonup_txt+"</button></span></div>"}container=$(html).insertBefore(originalinput);$(".bootstrap-touchspin-prefix",container).after(originalinput);if(originalinput.hasClass("input-sm")){container.addClass("input-group-sm")}else if(originalinput.hasClass("input-lg")){container.addClass("input-group-lg")}}function _initElements(){elements={down:$(".bootstrap-touchspin-down",container),up:$(".bootstrap-touchspin-up",container),input:$("input",container),prefix:$(".bootstrap-touchspin-prefix",container).addClass(settings.prefix_extraclass),postfix:$(".bootstrap-touchspin-postfix",container).addClass(settings.postfix_extraclass)}}function _hideEmptyPrefixPostfix(){if(settings.prefix===""){elements.prefix.hide()}if(settings.postfix===""){elements.postfix.hide()}}function _bindEvents(){originalinput.on("keydown",function(ev){var code=ev.keyCode||ev.which;if(code===38){if(spinning!=="up"){upOnce();startUpSpin()}ev.preventDefault()}else if(code===40){if(spinning!=="down"){downOnce();startDownSpin()}ev.preventDefault()}});originalinput.on("keyup",function(ev){var code=ev.keyCode||ev.which;if(code===38){stopSpin()}else if(code===40){stopSpin()}});originalinput.on("blur",function(){_checkValue()});elements.down.on("keydown",function(ev){var code=ev.keyCode||ev.which;if(code===32||code===13){if(spinning!=="down"){downOnce();startDownSpin()}ev.preventDefault()}});elements.down.on("keyup",function(ev){var code=ev.keyCode||ev.which;if(code===32||code===13){stopSpin()}});elements.up.on("keydown",function(ev){var code=ev.keyCode||ev.which;if(code===32||code===13){if(spinning!=="up"){upOnce();startUpSpin()}ev.preventDefault()}});elements.up.on("keyup",function(ev){var code=ev.keyCode||ev.which;if(code===32||code===13){stopSpin()}});elements.down.on("mousedown.touchspin",function(ev){elements.down.off("touchstart.touchspin");if(originalinput.is(":disabled")){return}downOnce();startDownSpin();ev.preventDefault();ev.stopPropagation()});elements.down.on("touchstart.touchspin",function(ev){elements.down.off("mousedown.touchspin");if(originalinput.is(":disabled")){return}downOnce();startDownSpin();ev.preventDefault();ev.stopPropagation()});elements.up.on("mousedown.touchspin",function(ev){elements.up.off("touchstart.touchspin");if(originalinput.is(":disabled")){return}upOnce();startUpSpin();ev.preventDefault();ev.stopPropagation()});elements.up.on("touchstart.touchspin",function(ev){elements.up.off("mousedown.touchspin");if(originalinput.is(":disabled")){return}upOnce();startUpSpin();ev.preventDefault();ev.stopPropagation()});elements.up.on("mouseout touchleave touchend touchcancel",function(ev){if(!spinning){return}ev.stopPropagation();stopSpin()});elements.down.on("mouseout touchleave touchend touchcancel",function(ev){if(!spinning){return}ev.stopPropagation();stopSpin()});elements.down.on("mousemove touchmove",function(ev){if(!spinning){return}ev.stopPropagation();ev.preventDefault()});elements.up.on("mousemove touchmove",function(ev){if(!spinning){return}ev.stopPropagation();ev.preventDefault()});$(document).on(_scopeEventNames(["mouseup","touchend","touchcancel"],_currentSpinnerId).join(" "),function(ev){if(!spinning){return}ev.preventDefault();stopSpin()});$(document).on(_scopeEventNames(["mousemove","touchmove","scroll","scrollstart"],_currentSpinnerId).join(" "),function(ev){if(!spinning){return}ev.preventDefault();stopSpin()});originalinput.on("mousewheel DOMMouseScroll",function(ev){if(!settings.mousewheel||!originalinput.is(":focus")){return}var delta=ev.originalEvent.wheelDelta||-ev.originalEvent.deltaY||-ev.originalEvent.detail;ev.stopPropagation();ev.preventDefault();if(delta<0){downOnce()}else{upOnce()}})}function _bindEventsInterface(){originalinput.on("touchspin.uponce",function(){stopSpin();upOnce()});originalinput.on("touchspin.downonce",function(){stopSpin();downOnce()});originalinput.on("touchspin.startupspin",function(){startUpSpin()});originalinput.on("touchspin.startdownspin",function(){startDownSpin()});originalinput.on("touchspin.stopspin",function(){stopSpin()});originalinput.on("touchspin.updatesettings",function(e,newsettings){changeSettings(newsettings)})}function _forcestepdivisibility(value){switch(settings.forcestepdivisibility){case"round":return(Math.round(value/settings.step)*settings.step).toFixed(settings.decimals);case"floor":return(Math.floor(value/settings.step)*settings.step).toFixed(settings.decimals);case"ceil":return(Math.ceil(value/settings.step)*settings.step).toFixed(settings.decimals);default:return value}}function _checkValue(){var val,parsedval,returnval;val=originalinput.val();if(val===""){if(settings.replacementval!==""){originalinput.val(settings.replacementval);originalinput.trigger("change")}return}if(settings.decimals>0&&val==="."){return}parsedval=parseFloat(val);if(isNaN(parsedval)){if(settings.replacementval!==""){parsedval=settings.replacementval}else{parsedval=0}}returnval=parsedval;if(parsedval.toString()!==val){returnval=parsedval}if(parsedval<settings.min){returnval=settings.min}if(parsedval>settings.max){returnval=settings.max}returnval=_forcestepdivisibility(returnval);if(val!==returnval.toString()){originalinput.val(returnval);originalinput.trigger("change")}}function _getBoostedStep(){if(!settings.booster){return settings.step}else{var boosted=Math.pow(2,Math.floor(spincount/settings.boostat))*settings.step;if(settings.maxboostedstep){if(boosted>settings.maxboostedstep){boosted=settings.maxboostedstep;value=Math.round(value/boosted)*boosted}}return Math.max(settings.step,boosted)}}function upOnce(){_checkValue();value=parseFloat(elements.input.val());if(isNaN(value)){value=0}var initvalue=value,boostedstep=_getBoostedStep();value=value+boostedstep;if(value>settings.max){value=settings.max;originalinput.trigger("touchspin.on.max");stopSpin()}elements.input.val(Number(value).toFixed(settings.decimals));if(initvalue!==value){originalinput.trigger("change")}}function downOnce(){_checkValue();value=parseFloat(elements.input.val());if(isNaN(value)){value=0}var initvalue=value,boostedstep=_getBoostedStep();value=value-boostedstep;if(value<settings.min){value=settings.min;originalinput.trigger("touchspin.on.min");stopSpin()}elements.input.val(value.toFixed(settings.decimals));if(initvalue!==value){originalinput.trigger("change")}}function startDownSpin(){stopSpin();spincount=0;spinning="down";originalinput.trigger("touchspin.on.startspin");originalinput.trigger("touchspin.on.startdownspin");downDelayTimeout=setTimeout(function(){downSpinTimer=setInterval(function(){spincount++;downOnce()},settings.stepinterval)},settings.stepintervaldelay)}function startUpSpin(){stopSpin();spincount=0;spinning="up";originalinput.trigger("touchspin.on.startspin");originalinput.trigger("touchspin.on.startupspin");upDelayTimeout=setTimeout(function(){upSpinTimer=setInterval(function(){spincount++;upOnce()},settings.stepinterval)},settings.stepintervaldelay)}function stopSpin(){clearTimeout(downDelayTimeout);clearTimeout(upDelayTimeout);clearInterval(downSpinTimer);clearInterval(upSpinTimer);switch(spinning){case"up":originalinput.trigger("touchspin.on.stopupspin");originalinput.trigger("touchspin.on.stopspin");break;case"down":originalinput.trigger("touchspin.on.stopdownspin");originalinput.trigger("touchspin.on.stopspin");break}spincount=0;spinning=false}})}}(jQuery)});define("plugins/datatree/module",["plugins/datatree/3.2.1/jstree","plugins/datatree/extend/plugin.added","plugins/number-spinner/module","plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin"],function(require,exports,module){require("plugins/datatree/3.2.1/themes/default/style.css");require("plugins/datatree/3.2.1/jstree");require("plugins/number-spinner/module");var g=window;function DataTree(container,options){var _this=this;this._guid=guid()+"_";if(options.core&&options.core.data){options.core.data=convertId(options.core.data)}var spinnerOptions=options.added?options.added.numberSpinner:false;if(spinnerOptions&&spinnerOptions.change){var originSpinnerChange=spinnerOptions.change;spinnerOptions.change=function(data,event){var input=event.target;var nodeId=decodeId(input.name);originSpinnerChange(data,event,nodeId,_this)}}this.container=typeof container==="string"?$(container):container;this.container.jstree($.extend({initedCallback:function(){if(_this._disableOnTreeChange)return;if(spinnerOptions){$p.numberSpinner(_this.container.find(".jstree-input"),$.extend({verticalbuttons:false},spinnerOptions))}if($.isFunction(options.onInited)){options.onInited()}}},options));if(options.search){var $input=$(options.search.input);$input.keyup($p.tool.debounce(function(){var v=$input.val();_this.container.jstree(true).search(v)},300))}this.container.on("changed.jstree",function(e,node){if($.isFunction(options.change)){if(node.action==="select_node"||node.action==="deselect_node"){options.change(e,node)}}});this.getSelectedNodes=function(){var _temp_nodes=$.jstree.reference(this.container).get_selected()||[];var nodes=[];for(var i=0;i<_temp_nodes.length;i++){nodes.push(decodeId(_temp_nodes[i]))}return nodes};this.selectNode=function(id){var tree=$.jstree.reference(this.container);tree.select_node(encodeId(id),true,true)};this.setSelectedNodes=function(nodes){this._disableOnTreeChange=true;var tree=$.jstree.reference(this.container);tree.deselect_all();var ids=nodes.map(function(v){return encodeId(typeof v==="object"?v.id:v)});tree.select_node(ids,true,true);setTimeout(function(){ids.forEach(function(id){tree.close_node(id,false)})},0);this._disableOnTreeChange=false};this.setSelectedNodeValues=function(nodes,valueField,defaultValue){this._disableOnTreeChange=true;var _this=this;valueField=valueField||"value";var tree=$.jstree.reference(this.container);tree.deselect_all();if(typeof defaultValue!=="undefined"){this.container.find(".jstree-input").val(defaultValue)}var ids=[];nodes.forEach(function(v){var id=encodeId(v.id);tree.select_node(id,true,true);ids.push(id);if(typeof v[valueField]!=="undefined"){_this.container.find(".jstree-input[name="+id+"]").val(v[valueField])}});setTimeout(function(){ids.forEach(function(id){tree.close_node(id,false)})},0);this._disableOnTreeChange=false};this.getSelectedNodeValues=function(){var _temp_nodes=$.jstree.reference(this.container).get_selected()||[],$input,values=[];for(var i=0;i<_temp_nodes.length;i++){$input=this.container.find(".jstree-input[name='"+_temp_nodes[i]+"']");values.push({id:decodeId(_temp_nodes[i]),value:$input.val()})}return values};this.destroy=function(){this.container.jstree("destroy")};this.refresh=function(){this.container.jstree("refresh")};this.selectAll=function(){$.jstree.reference(this.container).select_all()};this.deselectAll=function(){$.jstree.reference(this.container).deselect_all()};function convertId(data){if($.isArray(data)){return data.map(convertId)}if(typeof data==="string"){data={text:data}}var d=$.extend({},data);d.id=encodeId(typeof d.id==="undefined"?guid():d.id);if(d.children){d.children=d.children.map(convertId)}return d}function encodeId(id){return _this._guid+id}function decodeId(_id){if(_id.slice(0,_this._guid.length)===_this._guid){return _id.slice(_this._guid.length)}}}function guid(){return"_"+(Math.random()*1e9|0).toString(36)+(+new Date).toString(36).slice(3)}g[PagurianAlias].dataTree=function(selector,options){return new DataTree(selector,options)}});define("plugins/datatree/3.2.1/themes/default/style.css",[],function(){seajs.importStyle('.jstree-node,.jstree-children,.jstree-container-ul{display:block;margin:0;padding:0;list-style-type:none;list-style-image:none}.jstree-node{white-space:nowrap;position:relative}.jstree-anchor{display:inline-block;color:#000;white-space:nowrap;padding:0 4px 0 1px;margin:0;vertical-align:top}.jstree-anchor:focus{outline:0}.jstree-anchor,.jstree-anchor:link,.jstree-anchor:visited,.jstree-anchor:hover,.jstree-anchor:active{text-decoration:none;color:inherit}.jstree-icon{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.jstree-icon:empty{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.jstree-ocl{cursor:pointer}.jstree-leaf>.jstree-ocl{cursor:default}.jstree .jstree-open>.jstree-children{display:block}.jstree .jstree-closed>.jstree-children,.jstree .jstree-leaf>.jstree-children{display:none}.jstree-anchor>.jstree-themeicon{margin-right:2px}.jstree-no-icons .jstree-themeicon,.jstree-anchor>.jstree-themeicon-hidden{display:none}.jstree-hidden{display:none}.jstree-rtl .jstree-anchor{padding:0 1px 0 4px}.jstree-rtl .jstree-anchor>.jstree-themeicon{margin-left:2px;margin-right:0}.jstree-rtl .jstree-node{margin-left:0}.jstree-rtl .jstree-container-ul>.jstree-node{margin-right:0}.jstree-wholerow-ul{position:relative;display:inline-block;min-width:100%}.jstree-wholerow-ul .jstree-leaf>.jstree-ocl{cursor:pointer}.jstree-wholerow-ul .jstree-anchor,.jstree-wholerow-ul .jstree-icon{position:relative}.jstree-wholerow-ul .jstree-wholerow{width:100%;cursor:pointer;position:absolute;left:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vakata-context{display:none}.vakata-context,.vakata-context ul{margin:0;padding:2px;position:absolute;background:#f5f5f5;border:1px solid #979797;box-shadow:2px 2px 2px #999}.vakata-context ul{list-style:none;left:100%;margin-top:-2.7em;margin-left:-4px}.vakata-context .vakata-context-right ul{left:auto;right:100%;margin-left:auto;margin-right:-4px}.vakata-context li{list-style:none;display:inline}.vakata-context li>a{display:block;padding:0 2em;text-decoration:none;width:auto;color:#000;white-space:nowrap;line-height:2.4em;text-shadow:1px 1px 0 #fff;border-radius:1px}.vakata-context li>a:hover{position:relative;background-color:#e8eff7;box-shadow:0 0 2px #0a6aa1}.vakata-context li>a.vakata-context-parent{background-image:url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw==");background-position:right center;background-repeat:no-repeat}.vakata-context li>a:focus{outline:0}.vakata-context .vakata-context-hover>a{position:relative;background-color:#e8eff7;box-shadow:0 0 2px #0a6aa1}.vakata-context .vakata-context-separator>a,.vakata-context .vakata-context-separator>a:hover{background:#fff;border:0;border-top:1px solid #e2e3e3;height:1px;min-height:1px;max-height:1px;padding:0;margin:0 0 0 2.4em;border-left:1px solid #e0e0e0;text-shadow:0 0 0 transparent;box-shadow:0 0 0 transparent;border-radius:0}.vakata-context .vakata-contextmenu-disabled a,.vakata-context .vakata-contextmenu-disabled a:hover{color:silver;background-color:transparent;border:0;box-shadow:0 0 0}.vakata-context li>a>i{text-decoration:none;display:inline-block;width:2.4em;height:2.4em;background:transparent;margin:0 0 0 -2em;vertical-align:top;text-align:center;line-height:2.4em}.vakata-context li>a>i:empty{width:2.4em;line-height:2.4em}.vakata-context li>a .vakata-contextmenu-sep{display:inline-block;width:1px;height:2.4em;background:#fff;margin:0 .5em 0 0;border-left:1px solid #e2e3e3}.vakata-context .vakata-contextmenu-shortcut{font-size:.8em;color:silver;opacity:.5;display:none}.vakata-context-rtl ul{left:auto;right:100%;margin-left:auto;margin-right:-4px}.vakata-context-rtl li>a.vakata-context-parent{background-image:url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7");background-position:left center;background-repeat:no-repeat}.vakata-context-rtl .vakata-context-separator>a{margin:0 2.4em 0 0;border-left:0;border-right:1px solid #e2e3e3}.vakata-context-rtl .vakata-context-left ul{right:auto;left:100%;margin-left:-4px;margin-right:auto}.vakata-context-rtl li>a>i{margin:0 -2em 0 0}.vakata-context-rtl li>a .vakata-contextmenu-sep{margin:0 0 0 .5em;border-left-color:#fff;background:#e2e3e3}.jstree-default .jstree-node,.jstree-default .jstree-icon{background-repeat:no-repeat;background-color:transparent}.jstree-default .jstree-anchor,.jstree-default .jstree-wholerow{transition:background-color .15s,box-shadow .15s}.jstree-default .jstree-hovered{background:#e7f4f9;border-radius:2px;box-shadow:inset 0 0 1px #ccc}.jstree-default .jstree-clicked{background:#beebff;border-radius:2px;box-shadow:inset 0 0 1px #999}.jstree-checkbox-selection .jstree-clicked{background:0;border-radius:unset;box-shadow:none}.jstree-default .jstree-no-icons .jstree-anchor>.jstree-themeicon{display:none}.jstree-default .jstree-disabled{background:transparent;color:#b5b5b5;cursor:default}.jstree-default .jstree-disabled.jstree-hovered{background:transparent;box-shadow:none}.jstree-default .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default .jstree-disabled>.jstree-icon{opacity:.8;filter:url("data:image/svg+xml;utf8,<svg xmlns=\\\'http://www.w3.org/2000/svg\\\'><filter id=\\\'jstree-grayscale\\\'><feColorMatrix type=\\\'matrix\\\' values=\\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\\'/></filter></svg>#jstree-grayscale");filter:gray;-webkit-filter:grayscale(100%)}.jstree-default .jstree-search{font-style:italic;color:#8b0000;font-weight:700}.jstree-default .jstree-no-checkboxes .jstree-checkbox{display:none!important}.jstree-default.jstree-checkbox-no-clicked .jstree-clicked{background:transparent;box-shadow:none}.jstree-default.jstree-checkbox-no-clicked .jstree-clicked.jstree-hovered{background:#e7f4f9}.jstree-default.jstree-checkbox-no-clicked>.jstree-wholerow-ul .jstree-wholerow-clicked{background:transparent}.jstree-default.jstree-checkbox-no-clicked>.jstree-wholerow-ul .jstree-wholerow-clicked.jstree-wholerow-hovered{background:#e7f4f9}.jstree-default>.jstree-striped{min-width:100%;display:inline-block;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAMAAAB/qqA+AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMNAMM9s3UAAAAXSURBVHjajcEBAQAAAIKg/H/aCQZ70AUBjAATb6YPDgAAAABJRU5ErkJggg==") left top repeat}.jstree-default>.jstree-wholerow-ul .jstree-hovered,.jstree-default>.jstree-wholerow-ul .jstree-clicked{background:transparent;box-shadow:none;border-radius:0}.jstree-default .jstree-wholerow{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.jstree-default .jstree-wholerow-hovered{background:#e7f4f9}.jstree-default .jstree-wholerow-clicked{background:#beebff;background:-webkit-linear-gradient(top,#beebff 0,#a8e4ff 100%);background:linear-gradient(to bottom,#beebff 0,#a8e4ff 100%)}.jstree-default .jstree-node{min-height:24px;line-height:24px;margin-left:24px;min-width:24px;overflow:hidden}.jstree-default .jstree-anchor{line-height:24px;height:24px;padding:0 4px}.jstree-default .jstree-icon{width:24px;height:24px;line-height:24px}.jstree-default .jstree-icon:empty{width:24px;height:24px;line-height:24px}.jstree-default.jstree-rtl .jstree-node{margin-right:24px}.jstree-default .jstree-wholerow{height:24px}.jstree-default .jstree-node,.jstree-default .jstree-icon,.jstree-default .jstree-file,.jstree-default .jstree-folder{background-image:url("data:image/png;base64,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");background-repeat:no-repeat}.jstree-default .jstree-node{background-position:-292px -4px;background-repeat:repeat-y}.jstree-default .jstree-last{background:transparent}.jstree-default .jstree-open>.jstree-ocl{background-position:-132px -4px}.jstree-default .jstree-closed>.jstree-ocl{background-position:-100px -4px}.jstree-default .jstree-leaf>.jstree-ocl{background-position:-68px -4px}.jstree-default .jstree-themeicon{background-position:-260px -4px}.jstree-default>.jstree-no-dots .jstree-node,.jstree-default>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-36px -4px}.jstree-default>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-4px -4px}.jstree-default .jstree-disabled{background:transparent}.jstree-default .jstree-disabled.jstree-hovered{background:transparent}.jstree-default .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default .jstree-checkbox{background-position:-164px -4px}.jstree-default .jstree-checkbox:hover{background-position:-164px -36px}.jstree-default.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox,.jstree-default .jstree-checked>.jstree-checkbox{background-position:-228px -4px}.jstree-default.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox:hover,.jstree-default .jstree-checked>.jstree-checkbox:hover{background-position:-228px -36px}.jstree-default .jstree-anchor>.jstree-undetermined{background-position:-196px -4px}.jstree-default .jstree-anchor>.jstree-undetermined:hover{background-position:-196px -36px}.jstree-default .jstree-checkbox-disabled{opacity:.8;filter:url("data:image/svg+xml;utf8,<svg xmlns=\\\'http://www.w3.org/2000/svg\\\'><filter id=\\\'jstree-grayscale\\\'><feColorMatrix type=\\\'matrix\\\' values=\\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\\'/></filter></svg>#jstree-grayscale");filter:gray;-webkit-filter:grayscale(100%)}.jstree-default>.jstree-striped{background-size:auto 48px}.jstree-default.jstree-rtl .jstree-node{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==");background-position:100% 1px;background-repeat:repeat-y}.jstree-default.jstree-rtl .jstree-last{background:transparent}.jstree-default.jstree-rtl .jstree-open>.jstree-ocl{background-position:-132px -36px}.jstree-default.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-100px -36px}.jstree-default.jstree-rtl .jstree-leaf>.jstree-ocl{background-position:-68px -36px}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-node,.jstree-default.jstree-rtl>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-36px -36px}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-4px -36px}.jstree-default .jstree-themeicon-custom{background-color:transparent;background-image:none;background-position:0 0}.jstree-default>.jstree-container-ul .jstree-loading>.jstree-ocl{background:url("data:image/gif;base64,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") center center no-repeat}.jstree-default .jstree-file{background-position:-100px -68px no-repeat}.jstree-default .jstree-folder{background-position:-260px -4px no-repeat}.jstree-default>.jstree-container-ul>.jstree-node{margin-left:0;margin-right:0}.jstree-default.jstree-rtl .jstree-node{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==")}.jstree-default.jstree-rtl .jstree-last{background:transparent}.jstree-node .jstree-input{padding:2px 8px;font-size:12px;height:22px}.jstree-node>.jstree-input{position:absolute;right:0;top:0;width:100px}.jstree-node .bootstrap-touchspin{position:absolute;right:0;top:0;width:100px}.jstree-node .bootstrap-touchspin .btn{margin-top:-5px;padding:1px 4px;height:22px;border:1px solid #ddd}.jstree-node .bootstrap-touchspin .input-group-btn{border:0}.jstree-node .bootstrap-touchspin .input-group-btn i{font-size:12px}')
});define("plugins/datatree/3.2.1/jstree",["plugins/datatree/extend/plugin.added"],function(require,exports,module){var added=require("plugins/datatree/extend/plugin.added");if($.jstree){return}var instance_counter=0,ccp_node=false,ccp_mode=false,ccp_inst=false,themes_loaded=[],src=$("script:last").attr("src"),document=window.document,_node=document.createElement("LI"),_temp1,_temp2;_node.setAttribute("role","treeitem");_temp1=document.createElement("I");_temp1.className="jstree-icon jstree-ocl";_temp1.setAttribute("role","presentation");_node.appendChild(_temp1);_temp1=document.createElement("A");_temp1.className="jstree-anchor";_temp1.setAttribute("href","#");_temp1.setAttribute("tabindex","-1");_temp2=document.createElement("I");_temp2.setAttribute("role","presentation");_temp1.appendChild(_temp2);_node.appendChild(_temp1);_temp1=_temp2=null;$.jstree={version:"3.2.1",defaults:{plugins:[]},plugins:{},path:src&&src.indexOf("/")!==-1?src.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"};$.jstree.create=function(el,options){var tmp=new $.jstree.core(++instance_counter),opt=options;options=$.extend(true,{},$.jstree.defaults,options);if(opt&&opt.plugins){options.plugins=opt.plugins}$.each(options.plugins,function(i,k){if(i!=="core"){tmp=tmp.plugin(k,options[k])}});$(el).data("jstree",tmp);tmp.init(el,options);return tmp};$.jstree.destroy=function(){$(".jstree:jstree").jstree("destroy");$(document).off(".jstree")};$.jstree.core=function(id){this._id=id;this._cnt=0;this._wrk=null;this._data={core:{themes:{name:false,dots:false,icons:false},selected:[],last_error:{},working:false,worker_queue:[],focused:null}}};$.jstree.reference=function(needle){var tmp=null,obj=null;if(needle&&needle.id&&(!needle.tagName||!needle.nodeType)){needle=needle.id}if(!obj||!obj.length){try{obj=$(needle)}catch(ignore){}}if(!obj||!obj.length){try{obj=$("#"+needle.replace($.jstree.idregex,"\\$&"))}catch(ignore){}}if(obj&&obj.length&&(obj=obj.closest(".jstree")).length&&(obj=obj.data("jstree"))){tmp=obj}else{$(".jstree").each(function(){var inst=$(this).data("jstree");if(inst&&inst._model.data[needle]){tmp=inst;return false}})}return tmp};$.fn.jstree=function(arg){var is_method=typeof arg==="string",args=Array.prototype.slice.call(arguments,1),result=null;if(arg===true&&!this.length){return false}this.each(function(){var instance=$.jstree.reference(this),method=is_method&&instance?instance[arg]:null;result=is_method&&method?method.apply(instance,args):null;if(!instance&&!is_method&&(arg===undefined||$.isPlainObject(arg))){$.jstree.create(this,arg)}if(instance&&!is_method||arg===true){result=instance||false}if(result!==null&&result!==undefined){return false}});return result!==null&&result!==undefined?result:this};$.expr[":"].jstree=$.expr.createPseudo(function(search){return function(a){return $(a).hasClass("jstree")&&$(a).data("jstree")!==undefined}});$.jstree.defaults.core={data:false,strings:false,check_callback:false,error:$.noop,animation:200,multiple:true,themes:{name:false,url:false,dir:false,dots:true,icons:true,stripes:false,variant:false,responsive:false},expand_selected_onload:true,worker:true,force_text:false,dblclick_toggle:true};$.jstree.core.prototype={plugin:function(deco,opts){var Child=$.jstree.plugins[deco];if(Child){this._data[deco]={};Child.prototype=this;return new Child(opts,this)}return this},init:function(el,options){this._model={data:{},changed:[],force_full_redraw:false,redraw_timeout:false,default_state:{loaded:true,opened:false,selected:false,disabled:false}};this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:false}};this.element=$(el).addClass("jstree jstree-"+this._id);this.settings=options;this._data.core.ready=false;this._data.core.loaded=false;this._data.core.rtl=this.element.css("direction")==="rtl";this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");if(this.settings.core.multiple){this.element.attr("aria-multiselectable",true)}if(!this.element.attr("tabindex")){this.element.attr("tabindex","0")}this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(true);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.element.html("<"+"ul class='jstree-container-ul jstree-children' role='group'><"+"li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading");this._data.core.li_height=this.get_container_ul().children("li").first().height()||24;this.trigger("loading");this.load_node($.jstree.root,function(){if($.isFunction(options.initedCallback)){options.initedCallback()}})},destroy:function(keep_html){if(this._wrk){try{window.URL.revokeObjectURL(this._wrk);this._wrk=null}catch(ignore){}}if(!keep_html){this.element.empty()}this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")});this.element=null},bind:function(){var word="",tout=null,was_click=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true}if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var sel=window.getSelection();try{sel.removeAllRanges();sel.collapse()}catch(ignore){}}}}).on("mousedown.jstree",$.proxy(function(e){if(e.target===this.element[0]){e.preventDefault();was_click=+new Date}},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",$.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",$.proxy(function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true}if(this.settings.core.dblclick_toggle){this.toggle_node(e.target)}},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){e.preventDefault();if(e.currentTarget!==document.activeElement){$(e.currentTarget).focus()}this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",$.proxy(function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true}if(e.which!==32&&e.which!==13&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)){return true}var o=null;if(this._data.core.rtl){if(e.which===37){e.which=39}else if(e.which===39){e.which=37}}switch(e.which){case 32:if(e.ctrlKey){e.type="click";$(e.currentTarget).trigger(e)}break;case 13:e.type="click";$(e.currentTarget).trigger(e);break;case 37:e.preventDefault();if(this.is_open(e.currentTarget)){this.close_node(e.currentTarget)}else{o=this.get_parent(e.currentTarget);if(o&&o.id!==$.jstree.root){this.get_node(o,true).children(".jstree-anchor").focus()}}break;case 38:e.preventDefault();o=this.get_prev_dom(e.currentTarget);if(o&&o.length){o.children(".jstree-anchor").focus()}break;case 39:e.preventDefault();if(this.is_closed(e.currentTarget)){this.open_node(e.currentTarget,function(o){this.get_node(o,true).children(".jstree-anchor").focus()})}else if(this.is_open(e.currentTarget)){o=this.get_node(e.currentTarget,true).children(".jstree-children")[0];if(o){$(this._firstChild(o)).children(".jstree-anchor").focus()}}break;case 40:e.preventDefault();o=this.get_next_dom(e.currentTarget);if(o&&o.length){o.children(".jstree-anchor").focus()}break;case 106:this.open_all();break;case 36:e.preventDefault();o=this._firstChild(this.get_container_ul()[0]);if(o){$(o).children(".jstree-anchor").filter(":visible").focus()}break;case 35:e.preventDefault();this.element.find(".jstree-anchor").filter(":visible").last().focus();break}},this)).on("load_node.jstree",$.proxy(function(e,data){if(data.status){if(data.node.id===$.jstree.root&&!this._data.core.loaded){this._data.core.loaded=true;if(this._firstChild(this.get_container_ul()[0])){this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id)}this.trigger("loaded")}if(!this._data.core.ready){setTimeout($.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){this._data.core.ready=true;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var tmp=[],i,j;for(i=0,j=this._data.core.selected.length;i<j;i++){tmp=tmp.concat(this._model.data[this._data.core.selected[i]].parents)}tmp=$.vakata.array_unique(tmp);for(i=0,j=tmp.length;i<j;i++){this.open_node(tmp[i],false,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0)}}},this)).on("keypress.jstree",$.proxy(function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true}if(tout){clearTimeout(tout)}tout=setTimeout(function(){word=""},500);var chr=String.fromCharCode(e.which).toLowerCase(),col=this.element.find(".jstree-anchor").filter(":visible"),ind=col.index(document.activeElement)||0,end=false;word+=chr;if(word.length>1){col.slice(ind).each($.proxy(function(i,v){if($(v).text().toLowerCase().indexOf(word)===0){$(v).focus();end=true;return false}},this));if(end){return}col.slice(0,ind).each($.proxy(function(i,v){if($(v).text().toLowerCase().indexOf(word)===0){$(v).focus();end=true;return false}},this));if(end){return}}if(new RegExp("^"+chr.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(word)){col.slice(ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr){$(v).focus();end=true;return false}},this));if(end){return}col.slice(0,ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr){$(v).focus();end=true;return false}},this));if(end){return}}},this)).on("init.jstree",$.proxy(function(){var s=this.settings.core.themes;this._data.core.themes.dots=s.dots;this._data.core.themes.stripes=s.stripes;this._data.core.themes.icons=s.icons;this.set_theme(s.name||"default",s.url);this.set_theme_variant(s.variant)},this)).on("loading.jstree",$.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",$.proxy(function(e){this._data.core.focused=null;$(e.currentTarget).filter(".jstree-hovered").mouseleave();this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",$.proxy(function(e){var tmp=this.get_node(e.currentTarget);if(tmp&&tmp.id){this._data.core.focused=tmp.id}this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave();$(e.currentTarget).mouseenter();this.element.attr("tabindex","-1")},this)).on("focus.jstree",$.proxy(function(){if(+new Date-was_click>500&&!this._data.core.focused){was_click=0;var act=this.get_node(this.element.attr("aria-activedescendant"),true);if(act){act.find("> .jstree-anchor").focus()}}},this)).on("mouseenter.jstree",".jstree-anchor",$.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree");$(document).off(".jstree-"+this._id)},trigger:function(ev,data){if(!data){data={}}data.instance=this;this.element.triggerHandler(ev.replace(".jstree","")+".jstree",data)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(key){var a=this.settings.core.strings;if($.isFunction(a)){return a.call(this,key)}if(a&&a[key]){return a[key]}return key},_firstChild:function(dom){dom=dom?dom.firstChild:null;while(dom!==null&&dom.nodeType!==1){dom=dom.nextSibling}return dom},_nextSibling:function(dom){dom=dom?dom.nextSibling:null;while(dom!==null&&dom.nodeType!==1){dom=dom.nextSibling}return dom},_previousSibling:function(dom){dom=dom?dom.previousSibling:null;while(dom!==null&&dom.nodeType!==1){dom=dom.previousSibling}return dom},get_node:function(obj,as_dom){if(obj&&obj.id){obj=obj.id}var dom;try{if(this._model.data[obj]){obj=this._model.data[obj]}else if(typeof obj==="string"&&this._model.data[obj.replace(/^#/,"")]){obj=this._model.data[obj.replace(/^#/,"")]}else if(typeof obj==="string"&&(dom=$("#"+obj.replace($.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[dom.closest(".jstree-node").attr("id")]){obj=this._model.data[dom.closest(".jstree-node").attr("id")]}else if((dom=$(obj,this.element)).length&&this._model.data[dom.closest(".jstree-node").attr("id")]){obj=this._model.data[dom.closest(".jstree-node").attr("id")]}else if((dom=$(obj,this.element)).length&&dom.hasClass("jstree")){obj=this._model.data[$.jstree.root]}else{return false}if(as_dom){obj=obj.id===$.jstree.root?this.element:$("#"+obj.id.replace($.jstree.idregex,"\\$&"),this.element)}return obj}catch(ex){return false}},get_path:function(obj,glue,ids){obj=obj.parents?obj:this.get_node(obj);if(!obj||obj.id===$.jstree.root||!obj.parents){return false}var i,j,p=[];p.push(ids?obj.id:obj.text);for(i=0,j=obj.parents.length;i<j;i++){p.push(ids?obj.parents[i]:this.get_text(obj.parents[i]))}p=p.reverse().slice(1);return glue?p.join(glue):p},get_next_dom:function(obj,strict){var tmp;obj=this.get_node(obj,true);if(obj[0]===this.element[0]){tmp=this._firstChild(this.get_container_ul()[0]);while(tmp&&tmp.offsetHeight===0){tmp=this._nextSibling(tmp)}return tmp?$(tmp):false}if(!obj||!obj.length){return false}if(strict){tmp=obj[0];do{tmp=this._nextSibling(tmp)}while(tmp&&tmp.offsetHeight===0);return tmp?$(tmp):false}if(obj.hasClass("jstree-open")){tmp=this._firstChild(obj.children(".jstree-children")[0]);while(tmp&&tmp.offsetHeight===0){tmp=this._nextSibling(tmp)}if(tmp!==null){return $(tmp)}}tmp=obj[0];do{tmp=this._nextSibling(tmp)}while(tmp&&tmp.offsetHeight===0);if(tmp!==null){return $(tmp)}return obj.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(obj,strict){var tmp;obj=this.get_node(obj,true);if(obj[0]===this.element[0]){tmp=this.get_container_ul()[0].lastChild;while(tmp&&tmp.offsetHeight===0){tmp=this._previousSibling(tmp)}return tmp?$(tmp):false}if(!obj||!obj.length){return false}if(strict){tmp=obj[0];do{tmp=this._previousSibling(tmp)}while(tmp&&tmp.offsetHeight===0);return tmp?$(tmp):false}tmp=obj[0];do{tmp=this._previousSibling(tmp)}while(tmp&&tmp.offsetHeight===0);if(tmp!==null){obj=$(tmp);while(obj.hasClass("jstree-open")){obj=obj.children(".jstree-children").first().children(".jstree-node:visible:last")}return obj}tmp=obj[0].parentNode.parentNode;return tmp&&tmp.className&&tmp.className.indexOf("jstree-node")!==-1?$(tmp):false},get_parent:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}return obj.parent},get_children_dom:function(obj){obj=this.get_node(obj,true);if(obj[0]===this.element[0]){return this.get_container_ul().children(".jstree-node")}if(!obj||!obj.length){return false}return obj.children(".jstree-children").children(".jstree-node")},is_parent:function(obj){obj=this.get_node(obj);return obj&&(obj.state.loaded===false||obj.children.length>0)},is_loaded:function(obj){obj=this.get_node(obj);return obj&&obj.state.loaded},is_loading:function(obj){obj=this.get_node(obj);return obj&&obj.state&&obj.state.loading},is_open:function(obj){obj=this.get_node(obj);return obj&&obj.state.opened},is_closed:function(obj){obj=this.get_node(obj);return obj&&this.is_parent(obj)&&!obj.state.opened},is_leaf:function(obj){return!this.is_parent(obj)},load_node:function(obj,callback){var k,l,i,j,c;if($.isArray(obj)){this._load_nodes(obj.slice(),callback);return true}obj=this.get_node(obj);if(!obj){if(callback){callback.call(this,obj,false)}return false}if(obj.state.loaded){obj.state.loaded=false;for(k=0,l=obj.children_d.length;k<l;k++){for(i=0,j=obj.parents.length;i<j;i++){this._model.data[obj.parents[i]].children_d=$.vakata.array_remove_item(this._model.data[obj.parents[i]].children_d,obj.children_d[k])}if(this._model.data[obj.children_d[k]].state.selected){c=true;this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,obj.children_d[k])}delete this._model.data[obj.children_d[k]]}obj.children=[];obj.children_d=[];if(c){this.trigger("changed",{action:"load_node",node:obj,selected:this._data.core.selected})}}obj.state.failed=false;obj.state.loading=true;this.get_node(obj,true).addClass("jstree-loading").attr("aria-busy",true);this._load_node(obj,$.proxy(function(status){obj=this._model.data[obj.id];obj.state.loading=false;obj.state.loaded=status;obj.state.failed=!obj.state.loaded;var dom=this.get_node(obj,true),i=0,j=0,m=this._model.data,has_children=false;for(i=0,j=obj.children.length;i<j;i++){if(m[obj.children[i]]&&!m[obj.children[i]].state.hidden){has_children=true;break}}if(obj.state.loaded&&!has_children&&dom&&dom.length&&!dom.hasClass("jstree-leaf")){dom.removeClass("jstree-closed jstree-open").addClass("jstree-leaf")}dom.removeClass("jstree-loading").attr("aria-busy",false);this.trigger("load_node",{node:obj,status:status});if(callback){callback.call(this,obj,status)}},this));return true},_load_nodes:function(nodes,callback,is_callback){var r=true,c=function(){this._load_nodes(nodes,callback,true)},m=this._model.data,i,j,tmp=[];for(i=0,j=nodes.length;i<j;i++){if(m[nodes[i]]&&(!m[nodes[i]].state.loaded&&!m[nodes[i]].state.failed||!is_callback)){if(!this.is_loading(nodes[i])){this.load_node(nodes[i],c)}r=false}}if(r){for(i=0,j=nodes.length;i<j;i++){if(m[nodes[i]]&&m[nodes[i]].state.loaded){tmp.push(nodes[i])}}if(callback&&!callback.done){callback.call(this,tmp);callback.done=true}}},load_all:function(obj,callback){if(!obj){obj=$.jstree.root}obj=this.get_node(obj);if(!obj){return false}var to_load=[],m=this._model.data,c=m[obj.id].children_d,i,j;if(obj.state&&!obj.state.loaded){to_load.push(obj.id)}for(i=0,j=c.length;i<j;i++){if(m[c[i]]&&m[c[i]].state&&!m[c[i]].state.loaded){to_load.push(c[i])}}if(to_load.length){this._load_nodes(to_load,function(){this.load_all(obj,callback)})}else{if(callback){callback.call(this,obj)}this.trigger("load_all",{node:obj})}},_load_node:function(obj,callback){var s=this.settings.core.data,t;if(!s){if(obj.id===$.jstree.root){return this._append_html_data(obj,this._data.core.original_container_html.clone(true),function(status){callback.call(this,status)})}else{return callback.call(this,false)}}if($.isFunction(s)){return s.call(this,obj,$.proxy(function(d){if(d===false){callback.call(this,false)}this[typeof d==="string"?"_append_html_data":"_append_json_data"](obj,typeof d==="string"?$($.parseHTML(d)).filter(function(){return this.nodeType!==3}):d,function(status){callback.call(this,status)})},this))}if(typeof s==="object"){if(s.url){s=$.extend(true,{},s);if($.isFunction(s.url)){s.url=s.url.call(this,obj)}if($.isFunction(s.data)){s.data=s.data.call(this,obj)}return $.ajax(s).done($.proxy(function(d,t,x){var type=x.getResponseHeader("Content-Type");if(type&&type.indexOf("json")!==-1||typeof d==="object"){return this._append_json_data(obj,d,function(status){callback.call(this,status)})}if(type&&type.indexOf("html")!==-1||typeof d==="string"){return this._append_html_data(obj,$($.parseHTML(d)).filter(function(){return this.nodeType!==3}),function(status){callback.call(this,status)})}this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:obj.id,xhr:x})};this.settings.core.error.call(this,this._data.core.last_error);return callback.call(this,false)},this)).fail($.proxy(function(f){callback.call(this,false);this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:obj.id,xhr:f})};this.settings.core.error.call(this,this._data.core.last_error)},this))}t=$.isArray(s)||$.isPlainObject(s)?JSON.parse(JSON.stringify(s)):s;if(obj.id===$.jstree.root){return this._append_json_data(obj,t,function(status){callback.call(this,status)})}else{this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:obj.id})};this.settings.core.error.call(this,this._data.core.last_error);return callback.call(this,false)}}if(typeof s==="string"){if(obj.id===$.jstree.root){return this._append_html_data(obj,$($.parseHTML(s)).filter(function(){return this.nodeType!==3}),function(status){callback.call(this,status)})}else{this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:obj.id})};this.settings.core.error.call(this,this._data.core.last_error);return callback.call(this,false)}}return callback.call(this,false)},_node_changed:function(obj){obj=this.get_node(obj);if(obj){this._model.changed.push(obj.id)}},_append_html_data:function(dom,data,cb){dom=this.get_node(dom);dom.children=[];dom.children_d=[];var dat=data.is("ul")?data.children():data,par=dom.id,chd=[],dpc=[],m=this._model.data,p=m[par],s=this._data.core.selected.length,tmp,i,j;dat.each($.proxy(function(i,v){tmp=this._parse_model_from_html($(v),par,p.parents.concat());if(tmp){chd.push(tmp);dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d)}}},this));p.children=chd;p.children_d=dpc;for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc)}this.trigger("model",{nodes:dpc,parent:par});if(par!==$.jstree.root){this._node_changed(par);this.redraw()}else{this.get_container_ul().children(".jstree-initial-node").remove();this.redraw(true)}if(this._data.core.selected.length!==s){this.trigger("changed",{action:"model",selected:this._data.core.selected})}cb.call(this,true)},_append_json_data:function(dom,data,cb,force_processing){if(this.element===null){return}dom=this.get_node(dom);dom.children=[];dom.children_d=[];if(data.d){data=data.d;if(typeof data==="string"){data=JSON.parse(data)}}if(!$.isArray(data)){data=[data]}var w=null,args={df:this._model.default_state,dat:data,par:dom.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},func=function(data,undefined){if(data.data){data=data.data}var dat=data.dat,par=data.par,chd=[],dpc=[],add=[],df=data.df,t_id=data.t_id,t_cnt=data.t_cnt,m=data.m,p=m[par],sel=data.sel,tmp,i,j,rslt,parse_flat=function(d,p,ps){if(!ps){ps=[]}else{ps=ps.concat()}if(p){ps.unshift(p)}var tid=d.id.toString(),i,j,c,e,tmp={id:tid,text:d.text||"",icon:d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i]}}if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon}if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true}if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i]}}}}if(d&&typeof d.state==="object"){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i]}}}if(d&&typeof d.li_attr==="object"){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i]}}}if(!tmp.li_attr.id){tmp.li_attr.id=tid}if(d&&typeof d.a_attr==="object"){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i]}}}if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[]}m[tmp.id]=tmp;for(i=0,j=tmp.children.length;i<j;i++){c=parse_flat(m[tmp.children[i]],tmp.id,ps);e=m[c];tmp.children_d.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d)}}delete d.data;delete d.children;m[tmp.id].original=d;if(tmp.state.selected){add.push(tmp.id)}return tmp.id},parse_nest=function(d,p,ps){if(!ps){ps=[]}else{ps=ps.concat()}if(p){ps.unshift(p)}var tid=false,i,j,c,e,tmp;do{tid="j"+t_id+"_"+ ++t_cnt}while(m[tid]);tmp={id:false,text:typeof d==="string"?d:"",icon:typeof d==="object"&&d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i]}}if(d&&d.id){tmp.id=d.id.toString()}if(d&&d.text){tmp.text=d.text}if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon}if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true}if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i]}}}}if(d&&typeof d.state==="object"){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i]}}}if(d&&typeof d.li_attr==="object"){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i]}}}if(tmp.li_attr.id&&!tmp.id){tmp.id=tmp.li_attr.id.toString()}if(!tmp.id){tmp.id=tid}if(!tmp.li_attr.id){tmp.li_attr.id=tmp.id}if(d&&typeof d.a_attr==="object"){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i]}}}if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++){c=parse_nest(d.children[i],tmp.id,ps);e=m[c];tmp.children.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d)}}tmp.children_d=tmp.children_d.concat(tmp.children)}if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[]}delete d.data;delete d.children;tmp.original=d;m[tmp.id]=tmp;if(tmp.state.selected){add.push(tmp.id)}return tmp.id};if(dat.length&&dat[0].id!==undefined&&dat[0].parent!==undefined){for(i=0,j=dat.length;i<j;i++){if(!dat[i].children){dat[i].children=[]}m[dat[i].id.toString()]=dat[i]}for(i=0,j=dat.length;i<j;i++){m[dat[i].parent.toString()].children.push(dat[i].id.toString());p.children_d.push(dat[i].id.toString())}for(i=0,j=p.children.length;i<j;i++){tmp=parse_flat(m[p.children[i]],par,p.parents.concat());dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d)}}for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc)}rslt={cnt:t_cnt,mod:m,sel:sel,par:par,dpc:dpc,add:add}}else{for(i=0,j=dat.length;i<j;i++){tmp=parse_nest(dat[i],par,p.parents.concat());if(tmp){chd.push(tmp);dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d)}}}p.children=chd;p.children_d=dpc;for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc)}rslt={cnt:t_cnt,mod:m,sel:sel,par:par,dpc:dpc,add:add}}if(typeof window==="undefined"||typeof window.document==="undefined"){postMessage(rslt)}else{return rslt}},rslt=function(rslt,worker){if(this.element===null){return}this._cnt=rslt.cnt;this._model.data=rslt.mod;if(worker){var i,j,a=rslt.add,r=rslt.sel,s=this._data.core.selected.slice(),m=this._model.data;if(r.length!==s.length||$.vakata.array_unique(r.concat(s)).length!==r.length){for(i=0,j=r.length;i<j;i++){if($.inArray(r[i],a)===-1&&$.inArray(r[i],s)===-1){m[r[i]].state.selected=false}}for(i=0,j=s.length;i<j;i++){if($.inArray(s[i],r)===-1){m[s[i]].state.selected=true}}}}if(rslt.add.length){this._data.core.selected=this._data.core.selected.concat(rslt.add)}this.trigger("model",{nodes:rslt.dpc,parent:rslt.par});if(rslt.par!==$.jstree.root){this._node_changed(rslt.par);this.redraw()}else{this.redraw(true)}if(rslt.add.length){this.trigger("changed",{action:"model",selected:this._data.core.selected})}cb.call(this,true)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker){try{if(this._wrk===null){this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+func.toString()],{type:"text/javascript"}))}if(!this._data.core.working||force_processing){this._data.core.working=true;w=new window.Worker(this._wrk);w.onmessage=$.proxy(function(e){rslt.call(this,e.data,true);try{w.terminate();w=null}catch(ignore){}if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}},this);if(!args.par){if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}}else{w.postMessage(args)}}else{this._data.core.worker_queue.push([dom,data,cb,true])}}catch(e){rslt.call(this,func(args),false);if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}}}else{rslt.call(this,func(args),false)}},_parse_model_from_html:function(d,p,ps){if(!ps){ps=[]}else{ps=[].concat(ps)}if(p){ps.unshift(p)}var c,e,m=this._model.data,data={id:false,text:false,icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false},i,tmp,tid;for(i in this._model.default_state){if(this._model.default_state.hasOwnProperty(i)){data.state[i]=this._model.default_state[i]}}tmp=$.vakata.attributes(d,true);$.each(tmp,function(i,v){v=$.trim(v);if(!v.length){return true}data.li_attr[i]=v;if(i==="id"){data.id=v.toString()}});tmp=d.children("a").first();if(tmp.length){tmp=$.vakata.attributes(tmp,true);$.each(tmp,function(i,v){v=$.trim(v);if(v.length){data.a_attr[i]=v}})}tmp=d.children("a").first().length?d.children("a").first().clone():d.clone();tmp.children("ins, i, ul").remove();tmp=tmp.html();tmp=$("<div />").html(tmp);data.text=this.settings.core.force_text?tmp.text():tmp.html();tmp=d.data();data.data=tmp?$.extend(true,{},tmp):null;data.state.opened=d.hasClass("jstree-open");data.state.selected=d.children("a").hasClass("jstree-clicked");data.state.disabled=d.children("a").hasClass("jstree-disabled");if(data.data&&data.data.jstree){for(i in data.data.jstree){if(data.data.jstree.hasOwnProperty(i)){data.state[i]=data.data.jstree[i]}}}tmp=d.children("a").children(".jstree-themeicon");if(tmp.length){data.icon=tmp.hasClass("jstree-themeicon-hidden")?false:tmp.attr("rel")}if(data.state.icon!==undefined){data.icon=data.state.icon}if(data.icon===undefined||data.icon===null||data.icon===""){data.icon=true}tmp=d.children("ul").children("li");do{tid="j"+this._id+"_"+ ++this._cnt}while(m[tid]);data.id=data.li_attr.id?data.li_attr.id.toString():tid;if(tmp.length){tmp.each($.proxy(function(i,v){c=this._parse_model_from_html($(v),data.id,ps);e=this._model.data[c];data.children.push(c);if(e.children_d.length){data.children_d=data.children_d.concat(e.children_d)}},this));data.children_d=data.children_d.concat(data.children)}else{if(d.hasClass("jstree-closed")){data.state.loaded=false}}if(data.li_attr["class"]){data.li_attr["class"]=data.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")}if(data.a_attr["class"]){data.a_attr["class"]=data.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")}m[data.id]=data;if(data.state.selected){this._data.core.selected.push(data.id)}return data.id},_parse_model_from_flat_json:function(d,p,ps){if(!ps){ps=[]}else{ps=ps.concat()}if(p){ps.unshift(p)}var tid=d.id.toString(),m=this._model.data,df=this._model.default_state,i,j,c,e,tmp={id:tid,text:d.text||"",icon:d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i]}}if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon}if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true}if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i]}}}}if(d&&typeof d.state==="object"){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i]}}}if(d&&typeof d.li_attr==="object"){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i]
}}}if(!tmp.li_attr.id){tmp.li_attr.id=tid}if(d&&typeof d.a_attr==="object"){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i]}}}if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[]}m[tmp.id]=tmp;for(i=0,j=tmp.children.length;i<j;i++){c=this._parse_model_from_flat_json(m[tmp.children[i]],tmp.id,ps);e=m[c];tmp.children_d.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d)}}delete d.data;delete d.children;m[tmp.id].original=d;if(tmp.state.selected){this._data.core.selected.push(tmp.id)}return tmp.id},_parse_model_from_json:function(d,p,ps){if(!ps){ps=[]}else{ps=ps.concat()}if(p){ps.unshift(p)}var tid=false,i,j,c,e,m=this._model.data,df=this._model.default_state,tmp;do{tid="j"+this._id+"_"+ ++this._cnt}while(m[tid]);tmp={id:false,text:typeof d==="string"?d:"",icon:typeof d==="object"&&d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i]}}if(d&&d.id){tmp.id=d.id.toString()}if(d&&d.text){tmp.text=d.text}if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon}if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true}if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i]}}}}if(d&&typeof d.state==="object"){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i]}}}if(d&&typeof d.li_attr==="object"){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i]}}}if(tmp.li_attr.id&&!tmp.id){tmp.id=tmp.li_attr.id.toString()}if(!tmp.id){tmp.id=tid}if(!tmp.li_attr.id){tmp.li_attr.id=tmp.id}if(d&&typeof d.a_attr==="object"){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i]}}}if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++){c=this._parse_model_from_json(d.children[i],tmp.id,ps);e=m[c];tmp.children.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d)}}tmp.children_d=tmp.children_d.concat(tmp.children)}if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[]}delete d.data;delete d.children;tmp.original=d;m[tmp.id]=tmp;if(tmp.state.selected){this._data.core.selected.push(tmp.id)}return tmp.id},_redraw:function(){var nodes=this._model.force_full_redraw?this._model.data[$.jstree.root].children.concat([]):this._model.changed.concat([]),f=document.createElement("UL"),tmp,i,j,fe=this._data.core.focused;for(i=0,j=nodes.length;i<j;i++){tmp=this.redraw_node(nodes[i],true,this._model.force_full_redraw);if(tmp&&this._model.force_full_redraw){f.appendChild(tmp)}}if(this._model.force_full_redraw){f.className=this.get_container_ul()[0].className;f.setAttribute("role","group");this.element.empty().append(f)}if(fe!==null){tmp=this.get_node(fe,true);if(tmp&&tmp.length&&tmp.children(".jstree-anchor")[0]!==document.activeElement){tmp.children(".jstree-anchor").focus()}else{this._data.core.focused=null}}this._model.force_full_redraw=false;this._model.changed=[];this.trigger("redraw",{nodes:nodes})},redraw:function(full){if(full){this._model.force_full_redraw=true}this._redraw()},draw_children:function(node){var obj=this.get_node(node),i=false,j=false,k=false,d=document;if(!obj){return false}if(obj.id===$.jstree.root){return this.redraw(true)}node=this.get_node(node,true);if(!node||!node.length){return false}node.children(".jstree-children").remove();node=node[0];if(obj.children.length&&obj.state.loaded){k=d.createElement("UL");k.setAttribute("role","group");k.className="jstree-children";for(i=0,j=obj.children.length;i<j;i++){k.appendChild(this.redraw_node(obj.children[i],true,true))}node.appendChild(k)}},redraw_node:function(node,deep,is_callback,force_render){var obj=this.get_node(node),par=false,ind=false,old=false,i=false,j=false,k=false,c="",d=document,m=this._model.data,f=false,s=false,tmp=null,t=0,l=0,has_children=false,last_sibling=false;if(!obj){return false}if(obj.id===$.jstree.root){return this.redraw(true)}deep=deep||obj.children.length===0;node=!document.querySelector?document.getElementById(obj.id):this.element[0].querySelector("#"+("0123456789".indexOf(obj.id[0])!==-1?"\\3"+obj.id[0]+" "+obj.id.substr(1).replace($.jstree.idregex,"\\$&"):obj.id.replace($.jstree.idregex,"\\$&")));if(!node){deep=true;if(!is_callback){par=obj.parent!==$.jstree.root?$("#"+obj.parent.replace($.jstree.idregex,"\\$&"),this.element)[0]:null;if(par!==null&&(!par||!m[obj.parent].state.opened)){return false}ind=$.inArray(obj.id,par===null?m[$.jstree.root].children:m[obj.parent].children)}}else{node=$(node);if(!is_callback){par=node.parent().parent()[0];if(par===this.element[0]){par=null}ind=node.index()}if(!deep&&obj.children.length&&!node.children(".jstree-children").length){deep=true}if(!deep){old=node.children(".jstree-children")[0]}f=node.children(".jstree-anchor")[0]===document.activeElement;node.remove()}node=_node.cloneNode(true);c="jstree-node ";for(i in obj.li_attr){if(obj.li_attr.hasOwnProperty(i)){if(i==="id"){continue}if(i!=="class"){node.setAttribute(i,obj.li_attr[i])}else{c+=obj.li_attr[i]}}}if(!obj.a_attr.id){obj.a_attr.id=obj.id+"_anchor"}node.setAttribute("aria-selected",!!obj.state.selected);node.setAttribute("aria-level",obj.parents.length);node.setAttribute("aria-labelledby",obj.a_attr.id);if(obj.state.disabled){node.setAttribute("aria-disabled",true)}for(i=0,j=obj.children.length;i<j;i++){if(!m[obj.children[i]].state.hidden){has_children=true;break}}if(obj.parent!==null&&m[obj.parent]&&!obj.state.hidden){i=$.inArray(obj.id,m[obj.parent].children);last_sibling=obj.id;if(i!==-1){i++;for(j=m[obj.parent].children.length;i<j;i++){if(!m[m[obj.parent].children[i]].state.hidden){last_sibling=m[obj.parent].children[i]}if(last_sibling!==obj.id){break}}}}if(obj.state.hidden){c+=" jstree-hidden"}if(obj.state.loaded&&!has_children){c+=" jstree-leaf"}else{c+=obj.state.opened&&obj.state.loaded?" jstree-open":" jstree-closed";node.setAttribute("aria-expanded",obj.state.opened&&obj.state.loaded)}if(last_sibling===obj.id){c+=" jstree-last"}node.id=obj.id;node.className=c;c=(obj.state.selected?" jstree-clicked":"")+(obj.state.disabled?" jstree-disabled":"");for(j in obj.a_attr){if(obj.a_attr.hasOwnProperty(j)){if(j==="href"&&obj.a_attr[j]==="#"){continue}if(j!=="class"){node.childNodes[1].setAttribute(j,obj.a_attr[j])}else{c+=" "+obj.a_attr[j]}}}if(c.length){node.childNodes[1].className="jstree-anchor "+c}if(obj.icon&&obj.icon!==true||obj.icon===false){if(obj.icon===false){node.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden"}else if(obj.icon.indexOf("/")===-1&&obj.icon.indexOf(".")===-1){node.childNodes[1].childNodes[0].className+=" "+obj.icon+" jstree-themeicon-custom"}else{node.childNodes[1].childNodes[0].style.backgroundImage="url("+obj.icon+")";node.childNodes[1].childNodes[0].style.backgroundPosition="center center";node.childNodes[1].childNodes[0].style.backgroundSize="auto";node.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom"}}if(this.settings.core.force_text){node.childNodes[1].appendChild(d.createTextNode(obj.text))}else{node.childNodes[1].innerHTML+=obj.text}if(deep&&obj.children.length&&(obj.state.opened||force_render)&&obj.state.loaded){k=d.createElement("UL");k.setAttribute("role","group");k.className="jstree-children";for(i=0,j=obj.children.length;i<j;i++){k.appendChild(this.redraw_node(obj.children[i],deep,true))}node.appendChild(k)}if(old){node.appendChild(old)}if(!is_callback){if(!par){par=this.element[0]}for(i=0,j=par.childNodes.length;i<j;i++){if(par.childNodes[i]&&par.childNodes[i].className&&par.childNodes[i].className.indexOf("jstree-children")!==-1){tmp=par.childNodes[i];break}}if(!tmp){tmp=d.createElement("UL");tmp.setAttribute("role","group");tmp.className="jstree-children";par.appendChild(tmp)}par=tmp;if(ind<par.childNodes.length){par.insertBefore(node,par.childNodes[ind])}else{par.appendChild(node)}if(f){t=this.element[0].scrollTop;l=this.element[0].scrollLeft;node.childNodes[1].focus();this.element[0].scrollTop=t;this.element[0].scrollLeft=l}}if(obj.state.opened&&!obj.state.loaded){obj.state.opened=false;setTimeout($.proxy(function(){this.open_node(obj.id,false,0)},this),0)}return node},open_node:function(obj,callback,animation){var t1,t2,d,t;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.open_node(obj[t1],callback,animation)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}animation=animation===undefined?this.settings.core.animation:animation;if(!this.is_closed(obj)){if(callback){callback.call(this,obj,false)}return false}if(!this.is_loaded(obj)){if(this.is_loading(obj)){return setTimeout($.proxy(function(){this.open_node(obj,callback,animation)},this),500)}this.load_node(obj,function(o,ok){return ok?this.open_node(o,callback,animation):callback?callback.call(this,o,false):false})}else{d=this.get_node(obj,true);t=this;if(d.length){if(animation&&d.children(".jstree-children").length){d.children(".jstree-children").stop(true,true)}if(obj.children.length&&!this._firstChild(d.children(".jstree-children")[0])){this.draw_children(obj)}if(!animation){this.trigger("before_open",{node:obj});d[0].className=d[0].className.replace("jstree-closed","jstree-open");d[0].setAttribute("aria-expanded",true)}else{this.trigger("before_open",{node:obj});d.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",true).children(".jstree-children").stop(true,true).slideDown(animation,function(){this.style.display="";t.trigger("after_open",{node:obj})})}}obj.state.opened=true;if(callback){callback.call(this,obj,true)}if(!d.length){this.trigger("before_open",{node:obj})}this.trigger("open_node",{node:obj});if(!animation||!d.length){this.trigger("after_open",{node:obj})}return true}},_open_to:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}var i,j,p=obj.parents;for(i=0,j=p.length;i<j;i+=1){if(i!==$.jstree.root){this.open_node(p[i],false,0)}}return $("#"+obj.id.replace($.jstree.idregex,"\\$&"),this.element)},close_node:function(obj,animation){var t1,t2,t,d;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.close_node(obj[t1],animation)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}if(this.is_closed(obj)){return false}animation=animation===undefined?this.settings.core.animation:animation;t=this;d=this.get_node(obj,true);if(d.length){if(!animation){d[0].className=d[0].className.replace("jstree-open","jstree-closed");d.attr("aria-expanded",false).children(".jstree-children").remove()}else{d.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",false).children(".jstree-children").stop(true,true).slideUp(animation,function(){this.style.display="";d.children(".jstree-children").remove();t.trigger("after_close",{node:obj})})}}obj.state.opened=false;this.trigger("close_node",{node:obj});if(!animation||!d.length){this.trigger("after_close",{node:obj})}},toggle_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.toggle_node(obj[t1])}return true}if(this.is_closed(obj)){return this.open_node(obj)}if(this.is_open(obj)){return this.close_node(obj)}},open_all:function(obj,animation,original_obj){if(!obj){obj=$.jstree.root}obj=this.get_node(obj);if(!obj){return false}var dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,true),i,j,_this;if(!dom.length){for(i=0,j=obj.children_d.length;i<j;i++){if(this.is_closed(this._model.data[obj.children_d[i]])){this._model.data[obj.children_d[i]].state.opened=true}}return this.trigger("open_all",{node:obj})}original_obj=original_obj||dom;_this=this;dom=this.is_closed(obj)?dom.find(".jstree-closed").addBack():dom.find(".jstree-closed");dom.each(function(){_this.open_node(this,function(node,status){if(status&&this.is_parent(node)){this.open_all(node,animation,original_obj)}},animation||0)});if(original_obj.find(".jstree-closed").length===0){this.trigger("open_all",{node:this.get_node(original_obj)})}},close_all:function(obj,animation){if(!obj){obj=$.jstree.root}obj=this.get_node(obj);if(!obj){return false}var dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,true),_this=this,i,j;if(dom.length){dom=this.is_open(obj)?dom.find(".jstree-open").addBack():dom.find(".jstree-open");$(dom.get().reverse()).each(function(){_this.close_node(this,animation||0)})}for(i=0,j=obj.children_d.length;i<j;i++){this._model.data[obj.children_d[i]].state.opened=false}this.trigger("close_all",{node:obj})},is_disabled:function(obj){obj=this.get_node(obj);return obj&&obj.state&&obj.state.disabled},enable_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.enable_node(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}obj.state.disabled=false;this.get_node(obj,true).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",false);this.trigger("enable_node",{node:obj})},disable_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.disable_node(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}obj.state.disabled=true;this.get_node(obj,true).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",true);this.trigger("disable_node",{node:obj})},hide_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.hide_node(obj[t1],true)}this.redraw();return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}if(!obj.state.hidden){obj.state.hidden=true;this._node_changed(obj.parent);if(!skip_redraw){this.redraw()}this.trigger("hide_node",{node:obj})}},show_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.show_node(obj[t1],true)}this.redraw();return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}if(obj.state.hidden){obj.state.hidden=false;this._node_changed(obj.parent);if(!skip_redraw){this.redraw()}this.trigger("show_node",{node:obj})}},hide_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m){if(m.hasOwnProperty(i)&&i!==$.jstree.root&&!m[i].state.hidden){m[i].state.hidden=true;ids.push(i)}}this._model.force_full_redraw=true;if(!skip_redraw){this.redraw()}this.trigger("hide_all",{nodes:ids});return ids},show_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m){if(m.hasOwnProperty(i)&&i!==$.jstree.root&&m[i].state.hidden){m[i].state.hidden=false;ids.push(i)}}this._model.force_full_redraw=true;if(!skip_redraw){this.redraw()}this.trigger("show_all",{nodes:ids});return ids},activate_node:function(obj,e){if(this.is_disabled(obj)){return false}if(!e||typeof e!=="object"){e={}}this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==undefined?this.get_node(this._data.core.last_clicked.id):null;if(this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected){this._data.core.last_clicked=null}if(!this._data.core.last_clicked&&this._data.core.selected.length){this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])}if(!this.settings.core.multiple||!e.metaKey&&!e.ctrlKey&&!e.shiftKey||e.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(obj)||this.get_parent(obj)!==this._data.core.last_clicked.parent)){if(!this.settings.core.multiple&&(e.metaKey||e.ctrlKey||e.shiftKey)&&this.is_selected(obj)){this.deselect_node(obj,false,e)}else{this.deselect_all(true);this.select_node(obj,false,false,e);this._data.core.last_clicked=this.get_node(obj)}}else{if(e.shiftKey){var o=this.get_node(obj).id,l=this._data.core.last_clicked.id,p=this.get_node(this._data.core.last_clicked.parent).children,c=false,i,j;for(i=0,j=p.length;i<j;i+=1){if(p[i]===o){c=!c}if(p[i]===l){c=!c}if(!this.is_disabled(p[i])&&(c||p[i]===o||p[i]===l)){this.select_node(p[i],true,false,e)}else{this.deselect_node(p[i],true,e)}}this.trigger("changed",{action:"select_node",node:this.get_node(obj),selected:this._data.core.selected,event:e})}else{if(!this.is_selected(obj)){this.select_node(obj,false,false,e)}else{this.deselect_node(obj,false,e)}}}this.trigger("activate_node",{node:this.get_node(obj),event:e})},hover_node:function(obj){obj=this.get_node(obj,true);if(!obj||!obj.length||obj.children(".jstree-hovered").length){return false}var o=this.element.find(".jstree-hovered"),t=this.element;if(o&&o.length){this.dehover_node(o)}obj.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(obj)});setTimeout(function(){t.attr("aria-activedescendant",obj[0].id)},0)},dehover_node:function(obj){obj=this.get_node(obj,true);if(!obj||!obj.length||!obj.children(".jstree-hovered").length){return false}obj.children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",{node:this.get_node(obj)})},select_node:function(obj,supress_event,prevent_open,e){var dom,t1,t2,th;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.select_node(obj[t1],supress_event,prevent_open,e)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}dom=this.get_node(obj,true);if(!obj.state.selected){obj.state.selected=true;this._data.core.selected.push(obj.id);if(!prevent_open){dom=this._open_to(obj)}if(dom&&dom.length){dom.attr("aria-selected",true).children(".jstree-anchor").addClass("jstree-clicked")}this.trigger("select_node",{node:obj,selected:this._data.core.selected,event:e});if(!supress_event){this.trigger("changed",{action:"select_node",node:obj,selected:this._data.core.selected,event:e})}}},deselect_node:function(obj,supress_event,e){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.deselect_node(obj[t1],supress_event,e)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}dom=this.get_node(obj,true);if(obj.state.selected){obj.state.selected=false;this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,obj.id);if(dom.length){dom.attr("aria-selected",false).children(".jstree-anchor").removeClass("jstree-clicked")}this.trigger("deselect_node",{node:obj,selected:this._data.core.selected,event:e});if(!supress_event){this.trigger("changed",{action:"deselect_node",node:obj,selected:this._data.core.selected,event:e})}}},select_all:function(supress_event){var tmp=this._data.core.selected.concat([]),i,j;this._data.core.selected=this._model.data[$.jstree.root].children_d.concat();for(i=0,j=this._data.core.selected.length;i<j;i++){if(this._model.data[this._data.core.selected[i]]){this._model.data[this._data.core.selected[i]].state.selected=true}}this.redraw(true);this.trigger("select_all",{selected:this._data.core.selected});if(!supress_event){this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:tmp})}},deselect_all:function(supress_event){var tmp=this._data.core.selected.concat([]),i,j;for(i=0,j=this._data.core.selected.length;i<j;i++){if(this._model.data[this._data.core.selected[i]]){this._model.data[this._data.core.selected[i]].state.selected=false}}this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",false);this.trigger("deselect_all",{selected:this._data.core.selected,node:tmp});if(!supress_event){this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:tmp})}},is_selected:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}return obj.state.selected},get_selected:function(full){return full?$.map(this._data.core.selected,$.proxy(function(i){return this.get_node(i)},this)):this._data.core.selected.slice()},get_top_selected:function(full){var tmp=this.get_selected(true),obj={},i,j,k,l;for(i=0,j=tmp.length;i<j;i++){obj[tmp[i].id]=tmp[i]}for(i=0,j=tmp.length;i<j;i++){for(k=0,l=tmp[i].children_d.length;k<l;k++){if(obj[tmp[i].children_d[k]]){delete obj[tmp[i].children_d[k]]}}}tmp=[];for(i in obj){if(obj.hasOwnProperty(i)){tmp.push(i)}}return full?$.map(tmp,$.proxy(function(i){return this.get_node(i)},this)):tmp},get_bottom_selected:function(full){var tmp=this.get_selected(true),obj=[],i,j;for(i=0,j=tmp.length;i<j;i++){if(!tmp[i].children.length){obj.push(tmp[i].id)}}return full?$.map(obj,$.proxy(function(i){return this.get_node(i)},this)):obj},get_state:function(){var state={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},i;for(i in this._model.data){if(this._model.data.hasOwnProperty(i)){if(i!==$.jstree.root){if(this._model.data[i].state.opened){state.core.open.push(i)}if(this._model.data[i].state.selected){state.core.selected.push(i)}}}}return state},set_state:function(state,callback){if(state){if(state.core){var res,n,t,_this,i;if(state.core.open){if(!$.isArray(state.core.open)||!state.core.open.length){delete state.core.open;this.set_state(state,callback)}else{this._load_nodes(state.core.open,function(nodes){this.open_node(nodes,false,0);delete state.core.open;this.set_state(state,callback)},true)}return false}if(state.core.scroll){if(state.core.scroll&&state.core.scroll.left!==undefined){this.element.scrollLeft(state.core.scroll.left)}if(state.core.scroll&&state.core.scroll.top!==undefined){this.element.scrollTop(state.core.scroll.top)}delete state.core.scroll;this.set_state(state,callback);return false}if(state.core.selected){_this=this;this.deselect_all();$.each(state.core.selected,function(i,v){_this.select_node(v,false,true)});delete state.core.selected;this.set_state(state,callback);return false}for(i in state){if(state.hasOwnProperty(i)&&i!=="core"&&$.inArray(i,this.settings.plugins)===-1){delete state[i]}}if($.isEmptyObject(state.core)){delete state.core;this.set_state(state,callback);return false}}if($.isEmptyObject(state)){state=null;if(callback){callback.call(this)}this.trigger("set_state");return false}return true}return false},refresh:function(skip_loading,forget_state){this._data.core.state=forget_state===true?{}:this.get_state();if(forget_state&&$.isFunction(forget_state)){this._data.core.state=forget_state.call(this,this._data.core.state)}this._cnt=0;this._model.data={};this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:false}};this._data.core.selected=[];this._data.core.last_clicked=null;this._data.core.focused=null;var c=this.get_container_ul()[0].className;if(!skip_loading){this.element.html("<"+"ul class='"+c+"' role='group'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading")}this.load_node($.jstree.root,function(o,s){if(s){this.get_container_ul()[0].className=c;if(this._firstChild(this.get_container_ul()[0])){this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id)}this.set_state($.extend(true,{},this._data.core.state),function(){this.trigger("refresh")})}this._data.core.state=null})},refresh_node:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}var opened=[],to_load=[],s=this._data.core.selected.concat([]);to_load.push(obj.id);if(obj.state.opened===true){opened.push(obj.id)}this.get_node(obj,true).find(".jstree-open").each(function(){opened.push(this.id)});this._load_nodes(to_load,$.proxy(function(nodes){this.open_node(opened,false,0);this.select_node(this._data.core.selected);this.trigger("refresh_node",{node:obj,nodes:nodes})},this))},set_id:function(obj,id){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}var i,j,m=this._model.data;id=id.toString();m[obj.parent].children[$.inArray(obj.id,m[obj.parent].children)]=id;for(i=0,j=obj.parents.length;i<j;i++){m[obj.parents[i]].children_d[$.inArray(obj.id,m[obj.parents[i]].children_d)]=id}for(i=0,j=obj.children.length;i<j;i++){m[obj.children[i]].parent=id}for(i=0,j=obj.children_d.length;i<j;i++){m[obj.children_d[i]].parents[$.inArray(obj.id,m[obj.children_d[i]].parents)]=id}i=$.inArray(obj.id,this._data.core.selected);if(i!==-1){this._data.core.selected[i]=id}i=this.get_node(obj.id,true);if(i){i.attr("id",id).children(".jstree-anchor").attr("id",id+"_anchor").end().attr("aria-labelledby",id+"_anchor");if(this.element.attr("aria-activedescendant")===obj.id){this.element.attr("aria-activedescendant",id)}}delete m[obj.id];obj.id=id;obj.li_attr.id=id;m[id]=obj;return true},get_text:function(obj){obj=this.get_node(obj);return!obj||obj.id===$.jstree.root?false:obj.text},set_text:function(obj,val){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_text(obj[t1],val)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}obj.text=val;if(this.get_node(obj,true).length){this.redraw_node(obj.id)}this.trigger("set_text",{obj:obj,text:val});return true},get_json:function(obj,options,flat){obj=this.get_node(obj||$.jstree.root);if(!obj){return false}if(options&&options.flat&&!flat){flat=[]}var tmp={id:obj.id,text:obj.text,icon:this.get_icon(obj),li_attr:$.extend(true,{},obj.li_attr),a_attr:$.extend(true,{},obj.a_attr),state:{},data:options&&options.no_data?false:$.extend(true,{},obj.data)},i,j;if(options&&options.flat){tmp.parent=obj.parent}else{tmp.children=[]}if(!options||!options.no_state){for(i in obj.state){if(obj.state.hasOwnProperty(i)){tmp.state[i]=obj.state[i]}}}if(options&&options.no_id){delete tmp.id;if(tmp.li_attr&&tmp.li_attr.id){delete tmp.li_attr.id}if(tmp.a_attr&&tmp.a_attr.id){delete tmp.a_attr.id}}if(options&&options.flat&&obj.id!==$.jstree.root){flat.push(tmp)}if(!options||!options.no_children){for(i=0,j=obj.children.length;i<j;i++){if(options&&options.flat){this.get_json(obj.children[i],options,flat)}else{tmp.children.push(this.get_json(obj.children[i],options))}}}return options&&options.flat?flat:obj.id===$.jstree.root?tmp.children:tmp},create_node:function(par,node,pos,callback,is_loaded){if(par===null){par=$.jstree.root}par=this.get_node(par);if(!par){return false}pos=pos===undefined?"last":pos;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.create_node(par,node,pos,callback,true)})}if(!node){node={text:this.get_string("New node")}}if(typeof node==="string"){node={text:node}}if(node.text===undefined){node.text=this.get_string("New node")}var tmp,dpc,i,j;if(par.id===$.jstree.root){if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":tmp=this.get_node(par.parent);pos=$.inArray(par.id,tmp.children);par=tmp;break;case"after":tmp=this.get_node(par.parent);pos=$.inArray(par.id,tmp.children)+1;par=tmp;break;case"inside":case"first":pos=0;break;case"last":pos=par.children.length;break;default:if(!pos){pos=0}break}if(pos>par.children.length){pos=par.children.length}if(!node.id){node.id=true}if(!this.check("create_node",node,par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(node.id===true){delete node.id}node=this._parse_model_from_json(node,par.id,par.parents.concat());if(!node){return false}tmp=this.get_node(node);dpc=[];dpc.push(node);dpc=dpc.concat(tmp.children_d);this.trigger("model",{nodes:dpc,parent:par.id});par.children_d=par.children_d.concat(dpc);for(i=0,j=par.parents.length;i<j;i++){this._model.data[par.parents[i]].children_d=this._model.data[par.parents[i]].children_d.concat(dpc)}node=tmp;tmp=[];for(i=0,j=par.children.length;i<j;i++){tmp[i>=pos?i+1:i]=par.children[i]}tmp[pos]=node.id;par.children=tmp;this.redraw_node(par,true);if(callback){callback.call(this,this.get_node(node))}this.trigger("create_node",{node:this.get_node(node),parent:par.id,position:pos});return node.id},rename_node:function(obj,val){var t1,t2,old;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.rename_node(obj[t1],val)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}old=obj.text;if(!this.check("rename_node",obj,this.get_parent(obj),val)){this.settings.core.error.call(this,this._data.core.last_error);return false}this.set_text(obj,val);this.trigger("rename_node",{node:obj,text:val,old:old});return true},delete_node:function(obj){var t1,t2,par,pos,tmp,i,j,k,l,c,top,lft;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.delete_node(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}par=this.get_node(obj.parent);pos=$.inArray(obj.id,par.children);c=false;if(!this.check("delete_node",obj,par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(pos!==-1){par.children=$.vakata.array_remove(par.children,pos)}tmp=obj.children_d.concat([]);tmp.push(obj.id);for(k=0,l=tmp.length;k<l;k++){for(i=0,j=obj.parents.length;i<j;i++){pos=$.inArray(tmp[k],this._model.data[obj.parents[i]].children_d);if(pos!==-1){this._model.data[obj.parents[i]].children_d=$.vakata.array_remove(this._model.data[obj.parents[i]].children_d,pos)}}if(this._model.data[tmp[k]].state.selected){c=true;pos=$.inArray(tmp[k],this._data.core.selected);if(pos!==-1){this._data.core.selected=$.vakata.array_remove(this._data.core.selected,pos)}}}this.trigger("delete_node",{node:obj,parent:par.id});if(c){this.trigger("changed",{action:"delete_node",node:obj,selected:this._data.core.selected,parent:par.id})}for(k=0,l=tmp.length;k<l;k++){delete this._model.data[tmp[k]]}if($.inArray(this._data.core.focused,tmp)!==-1){this._data.core.focused=null;top=this.element[0].scrollTop;lft=this.element[0].scrollLeft;if(par.id===$.jstree.root){this.get_node(this._model.data[$.jstree.root].children[0],true).children(".jstree-anchor").focus()}else{this.get_node(par,true).children(".jstree-anchor").focus()}this.element[0].scrollTop=top;this.element[0].scrollLeft=lft}this.redraw_node(par,true);return true},check:function(chk,obj,par,pos,more){obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);var tmp=chk.match(/^move_node|copy_node|create_node$/i)?par:obj,chc=this.settings.core.check_callback;if(chk==="move_node"||chk==="copy_node"){if((!more||!more.is_multi)&&(obj.id===par.id||$.inArray(obj.id,par.children)===pos||$.inArray(par.id,obj.children_d)!==-1)){this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}}if(tmp&&tmp.data){tmp=tmp.data}if(tmp&&tmp.functions&&(tmp.functions[chk]===false||tmp.functions[chk]===true)){if(tmp.functions[chk]===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return tmp.functions[chk]}if(chc===false||$.isFunction(chc)&&chc.call(this,chk,obj,par,pos,more)===false||chc&&chc[chk]===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}return true},last_error:function(){return this._data.core.last_error},move_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){var t1,t2,old_par,old_pos,new_par,old_ins,is_multi,dpc,tmp,i,j,k,l,p;
par=this.get_node(par);pos=pos===undefined?0:pos;if(!par){return false}if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.move_node(obj,par,pos,callback,true,false,origin)})}if($.isArray(obj)){if(obj.length===1){obj=obj[0]}else{for(t1=0,t2=obj.length;t1<t2;t1++){if(tmp=this.move_node(obj[t1],par,pos,callback,is_loaded,false,origin)){par=tmp;pos="after"}}this.redraw();return true}}obj=obj&&obj.id?obj:this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}old_par=(obj.parent||$.jstree.root).toString();new_par=!pos.toString().match(/^(before|after)$/)||par.id===$.jstree.root?par:this.get_node(par.parent);old_ins=origin?origin:this._model.data[obj.id]?this:$.jstree.reference(obj.id);is_multi=!old_ins||!old_ins._id||this._id!==old_ins._id;old_pos=old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1;if(old_ins&&old_ins._id){obj=old_ins._model.data[obj.id]}if(is_multi){if(tmp=this.copy_node(obj,par,pos,callback,is_loaded,false,origin)){if(old_ins){old_ins.delete_node(obj)}return tmp}return false}if(par.id===$.jstree.root){if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:if(!pos){pos=0}break}if(pos>new_par.children.length){pos=new_par.children.length}if(!this.check("move_node",obj,new_par,pos,{core:true,origin:origin,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id})){this.settings.core.error.call(this,this._data.core.last_error);return false}if(obj.parent===new_par.id){dpc=new_par.children.concat();tmp=$.inArray(obj.id,dpc);if(tmp!==-1){dpc=$.vakata.array_remove(dpc,tmp);if(pos>tmp){pos--}}tmp=[];for(i=0,j=dpc.length;i<j;i++){tmp[i>=pos?i+1:i]=dpc[i]}tmp[pos]=obj.id;new_par.children=tmp;this._node_changed(new_par.id);this.redraw(new_par.id===$.jstree.root)}else{tmp=obj.children_d.concat();tmp.push(obj.id);for(i=0,j=obj.parents.length;i<j;i++){dpc=[];p=old_ins._model.data[obj.parents[i]].children_d;for(k=0,l=p.length;k<l;k++){if($.inArray(p[k],tmp)===-1){dpc.push(p[k])}}old_ins._model.data[obj.parents[i]].children_d=dpc}old_ins._model.data[old_par].children=$.vakata.array_remove_item(old_ins._model.data[old_par].children,obj.id);for(i=0,j=new_par.parents.length;i<j;i++){this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(tmp)}dpc=[];for(i=0,j=new_par.children.length;i<j;i++){dpc[i>=pos?i+1:i]=new_par.children[i]}dpc[pos]=obj.id;new_par.children=dpc;new_par.children_d.push(obj.id);new_par.children_d=new_par.children_d.concat(obj.children_d);obj.parent=new_par.id;tmp=new_par.parents.concat();tmp.unshift(new_par.id);p=obj.parents.length;obj.parents=tmp;tmp=tmp.concat();for(i=0,j=obj.children_d.length;i<j;i++){this._model.data[obj.children_d[i]].parents=this._model.data[obj.children_d[i]].parents.slice(0,p*-1);Array.prototype.push.apply(this._model.data[obj.children_d[i]].parents,tmp)}if(old_par===$.jstree.root||new_par.id===$.jstree.root){this._model.force_full_redraw=true}if(!this._model.force_full_redraw){this._node_changed(old_par);this._node_changed(new_par.id)}if(!skip_redraw){this.redraw()}}if(callback){callback.call(this,obj,new_par,pos)}this.trigger("move_node",{node:obj,parent:new_par.id,position:pos,old_parent:old_par,old_position:old_pos,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id,old_instance:old_ins,new_instance:this});return obj.id},copy_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){var t1,t2,dpc,tmp,i,j,node,old_par,new_par,old_ins,is_multi;par=this.get_node(par);pos=pos===undefined?0:pos;if(!par){return false}if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.copy_node(obj,par,pos,callback,true,false,origin)})}if($.isArray(obj)){if(obj.length===1){obj=obj[0]}else{for(t1=0,t2=obj.length;t1<t2;t1++){if(tmp=this.copy_node(obj[t1],par,pos,callback,is_loaded,true,origin)){par=tmp;pos="after"}}this.redraw();return true}}obj=obj&&obj.id?obj:this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}old_par=(obj.parent||$.jstree.root).toString();new_par=!pos.toString().match(/^(before|after)$/)||par.id===$.jstree.root?par:this.get_node(par.parent);old_ins=origin?origin:this._model.data[obj.id]?this:$.jstree.reference(obj.id);is_multi=!old_ins||!old_ins._id||this._id!==old_ins._id;if(old_ins&&old_ins._id){obj=old_ins._model.data[obj.id]}if(par.id===$.jstree.root){if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:if(!pos){pos=0}break}if(pos>new_par.children.length){pos=new_par.children.length}if(!this.check("copy_node",obj,new_par,pos,{core:true,origin:origin,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id})){this.settings.core.error.call(this,this._data.core.last_error);return false}node=old_ins?old_ins.get_json(obj,{no_id:true,no_data:true,no_state:true}):obj;if(!node){return false}if(node.id===true){delete node.id}node=this._parse_model_from_json(node,new_par.id,new_par.parents.concat());if(!node){return false}tmp=this.get_node(node);if(obj&&obj.state&&obj.state.loaded===false){tmp.state.loaded=false}dpc=[];dpc.push(node);dpc=dpc.concat(tmp.children_d);this.trigger("model",{nodes:dpc,parent:new_par.id});for(i=0,j=new_par.parents.length;i<j;i++){this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(dpc)}dpc=[];for(i=0,j=new_par.children.length;i<j;i++){dpc[i>=pos?i+1:i]=new_par.children[i]}dpc[pos]=tmp.id;new_par.children=dpc;new_par.children_d.push(tmp.id);new_par.children_d=new_par.children_d.concat(tmp.children_d);if(new_par.id===$.jstree.root){this._model.force_full_redraw=true}if(!this._model.force_full_redraw){this._node_changed(new_par.id)}if(!skip_redraw){this.redraw(new_par.id===$.jstree.root)}if(callback){callback.call(this,tmp,new_par,pos)}this.trigger("copy_node",{node:tmp,original:obj,parent:new_par.id,position:pos,old_parent:old_par,old_position:old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id,old_instance:old_ins,new_instance:this});return tmp.id},cut:function(obj){if(!obj){obj=this._data.core.selected.concat()}if(!$.isArray(obj)){obj=[obj]}if(!obj.length){return false}var tmp=[],o,t1,t2;for(t1=0,t2=obj.length;t1<t2;t1++){o=this.get_node(obj[t1]);if(o&&o.id&&o.id!==$.jstree.root){tmp.push(o)}}if(!tmp.length){return false}ccp_node=tmp;ccp_inst=this;ccp_mode="move_node";this.trigger("cut",{node:obj})},copy:function(obj){if(!obj){obj=this._data.core.selected.concat()}if(!$.isArray(obj)){obj=[obj]}if(!obj.length){return false}var tmp=[],o,t1,t2;for(t1=0,t2=obj.length;t1<t2;t1++){o=this.get_node(obj[t1]);if(o&&o.id&&o.id!==$.jstree.root){tmp.push(o)}}if(!tmp.length){return false}ccp_node=tmp;ccp_inst=this;ccp_mode="copy_node";this.trigger("copy",{node:obj})},get_buffer:function(){return{mode:ccp_mode,node:ccp_node,inst:ccp_inst}},can_paste:function(){return ccp_mode!==false&&ccp_node!==false},paste:function(obj,pos){obj=this.get_node(obj);if(!obj||!ccp_mode||!ccp_mode.match(/^(copy_node|move_node)$/)||!ccp_node){return false}if(this[ccp_mode](ccp_node,obj,pos,false,false,false,ccp_inst)){this.trigger("paste",{parent:obj.id,node:ccp_node,mode:ccp_mode})}ccp_node=false;ccp_mode=false;ccp_inst=false},clear_buffer:function(){ccp_node=false;ccp_mode=false;ccp_inst=false;this.trigger("clear_buffer")},edit:function(obj,default_text,callback){var rtl,w,a,s,t,h1,h2,fn,tmp,cancel=false;obj=this.get_node(obj);if(!obj){return false}if(this.settings.core.check_callback===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"};this.settings.core.error.call(this,this._data.core.last_error);return false}tmp=obj;default_text=typeof default_text==="string"?default_text:obj.text;this.set_text(obj,"");obj=this._open_to(obj);tmp.text=default_text;rtl=this._data.core.rtl;w=this.element.width();this._data.core.focused=tmp.id;a=obj.children(".jstree-anchor").focus();s=$("<span>");t=default_text;h1=$("<"+"div />",{css:{position:"absolute",top:"-200px",left:rtl?"0px":"-1000px",visibility:"hidden"}}).appendTo("body");h2=$("<"+"input />",{value:t,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:$.proxy(function(e){e.stopImmediatePropagation();e.preventDefault();var i=s.children(".jstree-rename-input"),v=i.val(),f=this.settings.core.force_text,nv;if(v===""){v=t}h1.remove();s.replaceWith(a);s.remove();t=f?t:$("<div></div>").append($.parseHTML(t)).html();this.set_text(obj,t);nv=!!this.rename_node(obj,f?$("<div></div>").text(v).text():$("<div></div>").append($.parseHTML(v)).html());if(!nv){this.set_text(obj,t)}this._data.core.focused=tmp.id;setTimeout($.proxy(function(){var node=this.get_node(tmp.id,true);if(node.length){this._data.core.focused=tmp.id;node.children(".jstree-anchor").focus()}},this),0);if(callback){callback.call(this,tmp,nv,cancel)}},this),keydown:function(e){var key=e.which;if(key===27){cancel=true;this.value=t}if(key===27||key===13||key===37||key===38||key===39||key===40||key===32){e.stopImmediatePropagation()}if(key===27||key===13){e.preventDefault();this.blur()}},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h2.width(Math.min(h1.text("pW"+this.value).width(),w))},keypress:function(e){if(e.which===13){return false}}});fn={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""};s.attr("class",a.attr("class")).append(a.contents().clone()).append(h2);a.replaceWith(s);h1.css(fn);h2.css(fn).width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select()},set_theme:function(theme_name,theme_url){if(!theme_name){return false}if(theme_url===true){var dir=this.settings.core.themes.dir;if(!dir){dir=$.jstree.path+"/themes"}theme_url=dir+"/"+theme_name+"/style.css"}if(theme_url&&$.inArray(theme_url,themes_loaded)===-1){$("head").append("<"+'link rel="stylesheet" href="'+theme_url+'" type="text/css" />');themes_loaded.push(theme_url)}if(this._data.core.themes.name){this.element.removeClass("jstree-"+this._data.core.themes.name)}this._data.core.themes.name=theme_name;this.element.addClass("jstree-"+theme_name);this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+theme_name+"-responsive");this.trigger("set_theme",{theme:theme_name})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(variant_name){if(this._data.core.themes.variant){this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}this._data.core.themes.variant=variant_name;if(variant_name){this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=true;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=false;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){if(this._data.core.themes.stripes){this.hide_stripes()}else{this.show_stripes()}},show_dots:function(){this._data.core.themes.dots=true;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=false;this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){if(this._data.core.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this._data.core.themes.icons=true;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=false;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){if(this._data.core.themes.icons){this.hide_icons()}else{this.show_icons()}},set_icon:function(obj,icon){var t1,t2,dom,old;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_icon(obj[t1],icon)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}old=obj.icon;obj.icon=icon===true||icon===null||icon===undefined||icon===""?true:icon;dom=this.get_node(obj,true).children(".jstree-anchor").children(".jstree-themeicon");if(icon===false){this.hide_icon(obj)}else if(icon===true||icon===null||icon===undefined||icon===""){dom.removeClass("jstree-themeicon-custom "+old).css("background","").removeAttr("rel");if(old===false){this.show_icon(obj)}}else if(icon.indexOf("/")===-1&&icon.indexOf(".")===-1){dom.removeClass(old).css("background","");dom.addClass(icon+" jstree-themeicon-custom").attr("rel",icon);if(old===false){this.show_icon(obj)}}else{dom.removeClass(old).css("background","");dom.addClass("jstree-themeicon-custom").css("background","url('"+icon+"') center center no-repeat").attr("rel",icon);if(old===false){this.show_icon(obj)}}return true},get_icon:function(obj){obj=this.get_node(obj);return!obj||obj.id===$.jstree.root?false:obj.icon},hide_icon:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.hide_icon(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj===$.jstree.root){return false}obj.icon=false;this.get_node(obj,true).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden");return true},show_icon:function(obj){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.show_icon(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj===$.jstree.root){return false}dom=this.get_node(obj,true);obj.icon=dom.length?dom.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):true;if(!obj.icon){obj.icon=true}dom.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden");return true}};$.vakata={};$.vakata.attributes=function(node,with_values){node=$(node)[0];var attr=with_values?{}:[];if(node&&node.attributes){$.each(node.attributes,function(i,v){if($.inArray(v.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1){return}if(v.value!==null&&$.trim(v.value)!==""){if(with_values){attr[v.name]=v.value}else{attr.push(v.name)}}})}return attr};$.vakata.array_unique=function(array){var a=[],i,j,l,o={};for(i=0,l=array.length;i<l;i++){if(o[array[i]]===undefined){a.push(array[i]);o[array[i]]=true}}return a};$.vakata.array_remove=function(array,from,to){var rest=array.slice((to||from)+1||array.length);array.length=from<0?array.length+from:from;array.push.apply(array,rest);return array};$.vakata.array_remove_item=function(array,item){var tmp=$.inArray(item,array);return tmp!==-1?$.vakata.array_remove(array,tmp):array};$.jstree.plugins.changed=function(options,parent){var last=[];this.trigger=function(ev,data){var i,j;if(!data){data={}}if(ev.replace(".jstree","")==="changed"){data.changed={selected:[],deselected:[]};var tmp={};for(i=0,j=last.length;i<j;i++){tmp[last[i]]=1}for(i=0,j=data.selected.length;i<j;i++){if(!tmp[data.selected[i]]){data.changed.selected.push(data.selected[i])}else{tmp[data.selected[i]]=2}}for(i=0,j=last.length;i<j;i++){if(tmp[last[i]]===1){data.changed.deselected.push(last[i])}}last=data.selected.slice()}parent.trigger.call(this,ev,data)};this.refresh=function(skip_loading,forget_state){last=[];return parent.refresh.apply(this,arguments)}};var _i=document.createElement("I");_i.className="jstree-icon jstree-checkbox";_i.setAttribute("role","presentation");$.jstree.defaults.checkbox={visible:true,three_state:true,whole_node:true,keep_selected_style:true,cascade:"",tie_selection:true};$.jstree.plugins.checkbox=function(options,parent){this.bind=function(){parent.bind.call(this);this._data.checkbox.uto=false;this._data.checkbox.selected=[];if(this.settings.checkbox.three_state){this.settings.checkbox.cascade="up+down+undetermined"}this.element.on("init.jstree",$.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;if(!this.settings.checkbox.keep_selected_style){this.element.addClass("jstree-checkbox-no-clicked")}if(this.settings.checkbox.tie_selection){this.element.addClass("jstree-checkbox-selection")}},this)).on("loading.jstree",$.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(this.settings.checkbox.cascade.indexOf("undetermined")!==-1){this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",$.proxy(function(){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)},this))}if(!this.settings.checkbox.tie_selection){this.element.on("model.jstree",$.proxy(function(e,data){var m=this._model.data,p=m[data.parent],dpc=data.nodes,i,j;for(i=0,j=dpc.length;i<j;i++){m[dpc[i]].state.checked=m[dpc[i]].state.checked||m[dpc[i]].original&&m[dpc[i]].original.state&&m[dpc[i]].original.state.checked;if(m[dpc[i]].state.checked){this._data.checkbox.selected.push(dpc[i])}}},this))}if(this.settings.checkbox.cascade.indexOf("up")!==-1||this.settings.checkbox.cascade.indexOf("down")!==-1){this.element.on("model.jstree",$.proxy(function(e,data){var m=this._model.data,p=m[data.parent],dpc=data.nodes,chd=[],c,i,j,k,l,tmp,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(s.indexOf("down")!==-1){if(p.state[t?"selected":"checked"]){for(i=0,j=dpc.length;i<j;i++){m[dpc[i]].state[t?"selected":"checked"]=true}this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(dpc)}else{for(i=0,j=dpc.length;i<j;i++){if(m[dpc[i]].state[t?"selected":"checked"]){for(k=0,l=m[dpc[i]].children_d.length;k<l;k++){m[m[dpc[i]].children_d[k]].state[t?"selected":"checked"]=true}this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(m[dpc[i]].children_d)}}}}if(s.indexOf("up")!==-1){for(i=0,j=p.children_d.length;i<j;i++){if(!m[p.children_d[i]].children.length){chd.push(m[p.children_d[i]].parent)}}chd=$.vakata.array_unique(chd);for(k=0,l=chd.length;k<l;k++){p=m[chd[k]];while(p&&p.id!==$.jstree.root){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?"selected":"checked"]}if(c===j){p.state[t?"selected":"checked"]=true;this._data[t?"core":"checkbox"].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr("aria-selected",true).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked")}}else{break}p=this.get_node(p.parent)}}}this._data[t?"core":"checkbox"].selected=$.vakata.array_unique(this._data[t?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",$.proxy(function(e,data){var obj=data.node,m=this._model.data,par=this.get_node(obj.parent),dom=this.get_node(obj,true),i,j,c,tmp,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(s.indexOf("down")!==-1){this._data[t?"core":"checkbox"].selected=$.vakata.array_unique(this._data[t?"core":"checkbox"].selected.concat(obj.children_d));for(i=0,j=obj.children_d.length;i<j;i++){tmp=m[obj.children_d[i]];tmp.state[t?"selected":"checked"]=true;if(tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined){tmp.original.state.undetermined=false}}}if(s.indexOf("up")!==-1){while(par&&par.id!==$.jstree.root){c=0;for(i=0,j=par.children.length;i<j;i++){c+=m[par.children[i]].state[t?"selected":"checked"]}if(c===j){par.state[t?"selected":"checked"]=true;this._data[t?"core":"checkbox"].selected.push(par.id);tmp=this.get_node(par,true);if(tmp&&tmp.length){tmp.attr("aria-selected",true).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked")}}else{break}par=this.get_node(par.parent)}}if(s.indexOf("down")!==-1&&dom.length){dom.find(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",true)}},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",$.proxy(function(e,data){var obj=this.get_node($.jstree.root),m=this._model.data,i,j,tmp;for(i=0,j=obj.children_d.length;i<j;i++){tmp=m[obj.children_d[i]];if(tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined){tmp.original.state.undetermined=false}}},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",$.proxy(function(e,data){var obj=data.node,dom=this.get_node(obj,true),i,j,tmp,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(obj&&obj.original&&obj.original.state&&obj.original.state.undetermined){obj.original.state.undetermined=false}if(s.indexOf("down")!==-1){for(i=0,j=obj.children_d.length;i<j;i++){tmp=this._model.data[obj.children_d[i]];tmp.state[t?"selected":"checked"]=false;if(tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined){tmp.original.state.undetermined=false}}}if(s.indexOf("up")!==-1){for(i=0,j=obj.parents.length;i<j;i++){tmp=this._model.data[obj.parents[i]];tmp.state[t?"selected":"checked"]=false;if(tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined){tmp.original.state.undetermined=false}tmp=this.get_node(obj.parents[i],true);if(tmp&&tmp.length){tmp.attr("aria-selected",false).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked")}}}tmp=[];for(i=0,j=this._data[t?"core":"checkbox"].selected.length;i<j;i++){if((s.indexOf("down")===-1||$.inArray(this._data[t?"core":"checkbox"].selected[i],obj.children_d)===-1)&&(s.indexOf("up")===-1||$.inArray(this._data[t?"core":"checkbox"].selected[i],obj.parents)===-1)){tmp.push(this._data[t?"core":"checkbox"].selected[i])}}this._data[t?"core":"checkbox"].selected=$.vakata.array_unique(tmp);if(s.indexOf("down")!==-1&&dom.length){dom.find(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",false)}},this))}if(this.settings.checkbox.cascade.indexOf("up")!==-1){this.element.on("delete_node.jstree",$.proxy(function(e,data){var p=this.get_node(data.parent),m=this._model.data,i,j,c,tmp,t=this.settings.checkbox.tie_selection;while(p&&p.id!==$.jstree.root&&!p.state[t?"selected":"checked"]){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?"selected":"checked"]}if(j>0&&c===j){p.state[t?"selected":"checked"]=true;this._data[t?"core":"checkbox"].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr("aria-selected",true).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked")}}else{break}p=this.get_node(p.parent)}},this)).on("move_node.jstree",$.proxy(function(e,data){var is_multi=data.is_multi,old_par=data.old_parent,new_par=this.get_node(data.parent),m=this._model.data,p,c,i,j,tmp,t=this.settings.checkbox.tie_selection;if(!is_multi){p=this.get_node(old_par);while(p&&p.id!==$.jstree.root&&!p.state[t?"selected":"checked"]){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?"selected":"checked"]}if(j>0&&c===j){p.state[t?"selected":"checked"]=true;this._data[t?"core":"checkbox"].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr("aria-selected",true).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked")}}else{break}p=this.get_node(p.parent)}}p=new_par;while(p&&p.id!==$.jstree.root){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?"selected":"checked"]}if(c===j){if(!p.state[t?"selected":"checked"]){p.state[t?"selected":"checked"]=true;this._data[t?"core":"checkbox"].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr("aria-selected",true).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked")}}}else{if(p.state[t?"selected":"checked"]){p.state[t?"selected":"checked"]=false;this._data[t?"core":"checkbox"].selected=$.vakata.array_remove_item(this._data[t?"core":"checkbox"].selected,p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr("aria-selected",false).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked")}}else{break}}p=this.get_node(p.parent)}},this))}};this._undetermined=function(){if(this.element===null){return}var i,j,k,l,o={},m=this._model.data,t=this.settings.checkbox.tie_selection,s=this._data[t?"core":"checkbox"].selected,p=[],tt=this;for(i=0,j=s.length;i<j;i++){if(m[s[i]]&&m[s[i]].parents){for(k=0,l=m[s[i]].parents.length;k<l;k++){if(o[m[s[i]].parents[k]]===undefined&&m[s[i]].parents[k]!==$.jstree.root){o[m[s[i]].parents[k]]=true;p.push(m[s[i]].parents[k])}}}}this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var tmp=tt.get_node(this),tmp2;if(!tmp.state.loaded){if(tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&tmp.original.state.undetermined===true){if(o[tmp.id]===undefined&&tmp.id!==$.jstree.root){o[tmp.id]=true;p.push(tmp.id)}for(k=0,l=tmp.parents.length;k<l;k++){if(o[tmp.parents[k]]===undefined&&tmp.parents[k]!==$.jstree.root){o[tmp.parents[k]]=true;p.push(tmp.parents[k])}}}}else{for(i=0,j=tmp.children_d.length;i<j;i++){tmp2=m[tmp.children_d[i]];if(!tmp2.state.loaded&&tmp2.original&&tmp2.original.state&&tmp2.original.state.undetermined&&tmp2.original.state.undetermined===true){if(o[tmp2.id]===undefined&&tmp2.id!==$.jstree.root){o[tmp2.id]=true;p.push(tmp2.id)}for(k=0,l=tmp2.parents.length;k<l;k++){if(o[tmp2.parents[k]]===undefined&&tmp2.parents[k]!==$.jstree.root){o[tmp2.parents[k]]=true;p.push(tmp2.parents[k])}}}}}});this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");for(i=0,j=p.length;i<j;i++){if(!m[p[i]].state[t?"selected":"checked"]){s=this.get_node(p[i],true);if(s&&s.length){s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}}}};this.redraw_node=function(obj,deep,is_callback,force_render){obj=parent.redraw_node.apply(this,arguments);if(obj){var i,j,tmp=null,icon=null;for(i=0,j=obj.childNodes.length;i<j;i++){if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break}}if(tmp){if(!this.settings.checkbox.tie_selection&&this._model.data[obj.id].state.checked){tmp.className+=" jstree-checked"}icon=_i.cloneNode(false);if(this._model.data[obj.id].state.checkbox_disabled){icon.className+=" jstree-checkbox-disabled"}tmp.insertBefore(icon,tmp.childNodes[0])}}if(!is_callback&&this.settings.checkbox.cascade.indexOf("undetermined")!==-1){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)}return obj};this.show_checkboxes=function(){this._data.core.themes.checkboxes=true;this.get_container_ul().removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=false;this.get_container_ul().addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){if(this._data.core.themes.checkboxes){this.hide_checkboxes()}else{this.show_checkboxes()}};this.is_undetermined=function(obj){obj=this.get_node(obj);var s=this.settings.checkbox.cascade,i,j,t=this.settings.checkbox.tie_selection,d=this._data[t?"core":"checkbox"].selected,m=this._model.data;if(!obj||obj.state[t?"selected":"checked"]===true||s.indexOf("undetermined")===-1||s.indexOf("down")===-1&&s.indexOf("up")===-1){return false}if(!obj.state.loaded&&obj.original.state.undetermined===true){return true}for(i=0,j=obj.children_d.length;i<j;i++){if($.inArray(obj.children_d[i],d)!==-1||!m[obj.children_d[i]].state.loaded&&m[obj.children_d[i]].original.state.undetermined){return true}}return false};this.disable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.disable_checkbox(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}dom=this.get_node(obj,true);if(!obj.state.checkbox_disabled){obj.state.checkbox_disabled=true;if(dom&&dom.length){dom.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled")}this.trigger("disable_checkbox",{node:obj})}};this.enable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.enable_checkbox(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}dom=this.get_node(obj,true);if(obj.state.checkbox_disabled){obj.state.checkbox_disabled=false;if(dom&&dom.length){dom.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled")}this.trigger("enable_checkbox",{node:obj})}};this.activate_node=function(obj,e){if($(e.target).hasClass("jstree-checkbox-disabled")){return false}if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||$(e.target).hasClass("jstree-checkbox"))){e.ctrlKey=true}if(this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!$(e.target).hasClass("jstree-checkbox")){return parent.activate_node.call(this,obj,e)}if(this.is_disabled(obj)){return false}if(this.is_checked(obj)){this.uncheck_node(obj,e)}else{this.check_node(obj,e)}this.trigger("activate_node",{node:this.get_node(obj)})};this.check_node=function(obj,e){if(this.settings.checkbox.tie_selection){return this.select_node(obj,false,true,e)}var dom,t1,t2,th;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.check_node(obj[t1],e)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}dom=this.get_node(obj,true);if(!obj.state.checked){obj.state.checked=true;this._data.checkbox.selected.push(obj.id);if(dom&&dom.length){dom.children(".jstree-anchor").addClass("jstree-checked")}this.trigger("check_node",{node:obj,selected:this._data.checkbox.selected,event:e})}};this.uncheck_node=function(obj,e){if(this.settings.checkbox.tie_selection){return this.deselect_node(obj,false,e)}var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.uncheck_node(obj[t1],e)}return true}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}dom=this.get_node(obj,true);if(obj.state.checked){obj.state.checked=false;this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,obj.id);if(dom.length){dom.children(".jstree-anchor").removeClass("jstree-checked")}this.trigger("uncheck_node",{node:obj,selected:this._data.checkbox.selected,event:e})}};this.check_all=function(){if(this.settings.checkbox.tie_selection){return this.select_all()}var tmp=this._data.checkbox.selected.concat([]),i,j;this._data.checkbox.selected=this._model.data[$.jstree.root].children_d.concat();for(i=0,j=this._data.checkbox.selected.length;i<j;i++){if(this._model.data[this._data.checkbox.selected[i]]){this._model.data[this._data.checkbox.selected[i]].state.checked=true}}this.redraw(true);this.trigger("check_all",{selected:this._data.checkbox.selected})};this.uncheck_all=function(){if(this.settings.checkbox.tie_selection){return this.deselect_all()}var tmp=this._data.checkbox.selected.concat([]),i,j;for(i=0,j=this._data.checkbox.selected.length;i<j;i++){if(this._model.data[this._data.checkbox.selected[i]]){this._model.data[this._data.checkbox.selected[i]].state.checked=false
}}this._data.checkbox.selected=[];this.element.find(".jstree-checked").removeClass("jstree-checked");this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:tmp})};this.is_checked=function(obj){if(this.settings.checkbox.tie_selection){return this.is_selected(obj)}obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}return obj.state.checked};this.get_checked=function(full){if(this.settings.checkbox.tie_selection){return this.get_selected(full)}return full?$.map(this._data.checkbox.selected,$.proxy(function(i){return this.get_node(i)},this)):this._data.checkbox.selected};this.get_top_checked=function(full){if(this.settings.checkbox.tie_selection){return this.get_top_selected(full)}var tmp=this.get_checked(true),obj={},i,j,k,l;for(i=0,j=tmp.length;i<j;i++){obj[tmp[i].id]=tmp[i]}for(i=0,j=tmp.length;i<j;i++){for(k=0,l=tmp[i].children_d.length;k<l;k++){if(obj[tmp[i].children_d[k]]){delete obj[tmp[i].children_d[k]]}}}tmp=[];for(i in obj){if(obj.hasOwnProperty(i)){tmp.push(i)}}return full?$.map(tmp,$.proxy(function(i){return this.get_node(i)},this)):tmp};this.get_bottom_checked=function(full){if(this.settings.checkbox.tie_selection){return this.get_bottom_selected(full)}var tmp=this.get_checked(true),obj=[],i,j;for(i=0,j=tmp.length;i<j;i++){if(!tmp[i].children.length){obj.push(tmp[i].id)}}return full?$.map(obj,$.proxy(function(i){return this.get_node(i)},this)):obj};this.load_node=function(obj,callback){var k,l,i,j,c,tmp;if(!$.isArray(obj)&&!this.settings.checkbox.tie_selection){tmp=this.get_node(obj);if(tmp&&tmp.state.loaded){for(k=0,l=tmp.children_d.length;k<l;k++){if(this._model.data[tmp.children_d[k]].state.checked){c=true;this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,tmp.children_d[k])}}}}return parent.load_node.apply(this,arguments)};this.get_state=function(){var state=parent.get_state.apply(this,arguments);if(this.settings.checkbox.tie_selection){return state}state.checkbox=this._data.checkbox.selected.slice();return state};this.set_state=function(state,callback){var res=parent.set_state.apply(this,arguments);if(res&&state.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var _this=this;$.each(state.checkbox,function(i,v){_this.check_node(v)})}delete state.checkbox;this.set_state(state,callback);return false}return res};this.refresh=function(skip_loading,forget_state){if(!this.settings.checkbox.tie_selection){this._data.checkbox.selected=[]}return parent.refresh.apply(this,arguments)}};$.jstree.defaults.conditionalselect=function(){return true};$.jstree.plugins.conditionalselect=function(options,parent){this.activate_node=function(obj,e){if(this.settings.conditionalselect.call(this,this.get_node(obj),e)){parent.activate_node.call(this,obj,e)}}};$.jstree.defaults.contextmenu={select_node:true,show_at_node:true,items:function(o,cb){return{create:{separator_before:false,separator_after:true,_disabled:false,label:"Create",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.create_node(obj,{},"last",function(new_node){setTimeout(function(){inst.edit(new_node)},0)})}},rename:{separator_before:false,separator_after:false,_disabled:false,label:"Rename",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.edit(obj)}},remove:{separator_before:false,icon:false,separator_after:false,_disabled:false,label:"Delete",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.delete_node(inst.get_selected())}else{inst.delete_node(obj)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.cut(inst.get_top_selected())}else{inst.cut(obj)}}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.copy(inst.get_top_selected())}else{inst.copy(obj)}}},paste:{separator_before:false,icon:false,_disabled:function(data){return!$.jstree.reference(data.reference).can_paste()},separator_after:false,label:"Paste",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.paste(obj)}}}}}}};$.jstree.plugins.contextmenu=function(options,parent){this.bind=function(){parent.bind.call(this);var last_ts=0,cto=null,ex,ey;this.element.on("contextmenu.jstree",".jstree-anchor",$.proxy(function(e,data){e.preventDefault();last_ts=e.ctrlKey?+new Date:0;if(data||cto){last_ts=+new Date+1e4}if(cto){clearTimeout(cto)}if(!this.is_loading(e.currentTarget)){this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e)}},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){if(this._data.contextmenu.visible&&(!last_ts||+new Date-last_ts>250)){$.vakata.context.hide()}last_ts=0},this)).on("touchstart.jstree",".jstree-anchor",function(e){if(!e.originalEvent||!e.originalEvent.changedTouches||!e.originalEvent.changedTouches[0]){return}ex=e.pageX;ey=e.pageY;cto=setTimeout(function(){$(e.currentTarget).trigger("contextmenu",true)},750)}).on("touchmove.vakata.jstree",function(e){if(cto&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(ex-e.pageX)>50||Math.abs(ey-e.pageY)>50)){clearTimeout(cto)}}).on("touchend.vakata.jstree",function(e){if(cto){clearTimeout(cto)}});$(document).on("context_hide.vakata.jstree",$.proxy(function(){this._data.contextmenu.visible=false},this))};this.teardown=function(){if(this._data.contextmenu.visible){$.vakata.context.hide()}parent.teardown.call(this)};this.show_contextmenu=function(obj,x,y,e){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false}var s=this.settings.contextmenu,d=this.get_node(obj,true),a=d.children(".jstree-anchor"),o=false,i=false;if(s.show_at_node||x===undefined||y===undefined){o=a.offset();x=o.left;y=o.top+this._data.core.li_height}if(this.settings.contextmenu.select_node&&!this.is_selected(obj)){this.activate_node(obj,e)}i=s.items;if($.isFunction(i)){i=i.call(this,obj,$.proxy(function(i){this._show_contextmenu(obj,x,y,i)},this))}if($.isPlainObject(i)){this._show_contextmenu(obj,x,y,i)}};this._show_contextmenu=function(obj,x,y,i){var d=this.get_node(obj,true),a=d.children(".jstree-anchor");$(document).one("context_show.vakata.jstree",$.proxy(function(e,data){var cls="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";$(data.element).addClass(cls)},this));this._data.contextmenu.visible=true;$.vakata.context.show(a,{x:x,y:y},i);this.trigger("show_contextmenu",{node:obj,x:x,y:y})}};!function($){var right_to_left=false,vakata_context={element:false,reference:false,position_x:0,position_y:0,items:[],html:"",is_visible:false};$.vakata.context={settings:{hide_onmouseleave:0,icons:true},_trigger:function(event_name){$(document).triggerHandler("context_"+event_name+".vakata",{reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}})},_execute:function(i){i=vakata_context.items[i];return i&&(!i._disabled||$.isFunction(i._disabled)&&!i._disabled({item:i,reference:vakata_context.reference,element:vakata_context.element}))&&i.action?i.action.call(null,{item:i,reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}}):false},_parse:function(o,is_callback){if(!o){return false}if(!is_callback){vakata_context.html="";vakata_context.items=[]}var str="",sep=false,tmp;if(is_callback){str+="<"+"ul>"}$.each(o,function(i,val){if(!val){return true}vakata_context.items.push(val);if(!sep&&val.separator_before){str+="<"+"li class='vakata-context-separator'><"+"a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<"+"/a><"+"/li>"}sep=false;str+="<"+"li class='"+(val._class||"")+(val._disabled===true||$.isFunction(val._disabled)&&val._disabled({item:val,reference:vakata_context.reference,element:vakata_context.element})?" vakata-contextmenu-disabled ":"")+"' "+(val.shortcut?" data-shortcut='"+val.shortcut+"' ":"")+">";str+="<"+"a href='#' rel='"+(vakata_context.items.length-1)+"'>";if($.vakata.context.settings.icons){str+="<"+"i ";if(val.icon){if(val.icon.indexOf("/")!==-1||val.icon.indexOf(".")!==-1){str+=" style='background:url(\""+val.icon+"\") center center no-repeat' "}else{str+=" class='"+val.icon+"' "}}str+="><"+"/i><"+"span class='vakata-contextmenu-sep'>&#160;<"+"/span>"}str+=($.isFunction(val.label)?val.label({item:i,reference:vakata_context.reference,element:vakata_context.element}):val.label)+(val.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+val.shortcut+'">'+(val.shortcut_label||"")+"</span>":"")+"<"+"/a>";if(val.submenu){tmp=$.vakata.context._parse(val.submenu,true);if(tmp){str+=tmp}}str+="<"+"/li>";if(val.separator_after){str+="<"+"li class='vakata-context-separator'><"+"a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<"+"/a><"+"/li>";sep=true}});str=str.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");if(is_callback){str+="</ul>"}if(!is_callback){vakata_context.html=str;$.vakata.context._trigger("parse")}return str.length>10?str:false},_show_submenu:function(o){o=$(o);if(!o.length||!o.children("ul").length){return}var e=o.children("ul"),x=o.offset().left+o.outerWidth(),y=o.offset().top,w=e.width(),h=e.height(),dw=$(window).width()+$(window).scrollLeft(),dh=$(window).height()+$(window).scrollTop();if(right_to_left){o[x-(w+10+o.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left")}else{o[x+w+10>dw?"addClass":"removeClass"]("vakata-context-right")}if(y+h+10>dh){e.css("bottom","-1px")}e.show()},show:function(reference,position,data){var o,e,x,y,w,h,dw,dh,cond=true;if(vakata_context.element&&vakata_context.element.length){vakata_context.element.width("")}switch(cond){case!position&&!reference:return false;case!!position&&!!reference:vakata_context.reference=reference;vakata_context.position_x=position.x;vakata_context.position_y=position.y;break;case!position&&!!reference:vakata_context.reference=reference;o=reference.offset();vakata_context.position_x=o.left+reference.outerHeight();vakata_context.position_y=o.top;break;case!!position&&!reference:vakata_context.position_x=position.x;vakata_context.position_y=position.y;break}if(!!reference&&!data&&$(reference).data("vakata_contextmenu")){data=$(reference).data("vakata_contextmenu")}if($.vakata.context._parse(data)){vakata_context.element.html(vakata_context.html)}if(vakata_context.items.length){vakata_context.element.appendTo("body");e=vakata_context.element;x=vakata_context.position_x;y=vakata_context.position_y;w=e.width();h=e.height();dw=$(window).width()+$(window).scrollLeft();dh=$(window).height()+$(window).scrollTop();if(right_to_left){x-=e.outerWidth()-$(reference).outerWidth();if(x<$(window).scrollLeft()+20){x=$(window).scrollLeft()+20}}if(x+w+20>dw){x=dw-(w+20)}if(y+h+20>dh){y=dh-(h+20)}vakata_context.element.css({left:x,top:y}).show().find("a").first().focus().parent().addClass("vakata-context-hover");vakata_context.is_visible=true;$.vakata.context._trigger("show")}},hide:function(){if(vakata_context.is_visible){vakata_context.element.hide().find("ul").hide().end().find(":focus").blur().end().detach();vakata_context.is_visible=false;$.vakata.context._trigger("hide")}}};$(function(){right_to_left=$("body").css("direction")==="rtl";var to=false;vakata_context.element=$("<ul class='vakata-context'></ul>");vakata_context.element.on("mouseenter","li",function(e){e.stopImmediatePropagation();if($.contains(this,e.relatedTarget)){return}if(to){clearTimeout(to)}vakata_context.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();$(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover");$.vakata.context._show_submenu(this)}).on("mouseleave","li",function(e){if($.contains(this,e.relatedTarget)){return}$(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){$(this).find(".vakata-context-hover").removeClass("vakata-context-hover");if($.vakata.context.settings.hide_onmouseleave){to=setTimeout(function(t){return function(){$.vakata.context.hide()}}(this),$.vakata.context.settings.hide_onmouseleave)}}).on("click","a",function(e){e.preventDefault();if(!$(this).blur().parent().hasClass("vakata-context-disabled")&&$.vakata.context._execute($(this).attr("rel"))!==false){$.vakata.context.hide()}}).on("keydown","a",function(e){var o=null;switch(e.which){case 13:case 32:e.type="mouseup";e.preventDefault();$(e.currentTarget).trigger(e);break;case 37:if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 38:if(vakata_context.is_visible){o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()}o.addClass("vakata-context-hover").children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 39:if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 40:if(vakata_context.is_visible){o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()}o.addClass("vakata-context-hover").children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 27:$.vakata.context.hide();e.preventDefault();break;default:break}}).on("keydown",function(e){e.preventDefault();var a=vakata_context.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();if(a.parent().not(".vakata-context-disabled")){a.click()}});$(document).on("mousedown.vakata.jstree",function(e){if(vakata_context.is_visible&&!$.contains(vakata_context.element[0],e.target)){$.vakata.context.hide()}}).on("context_show.vakata.jstree",function(e,data){vakata_context.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");if(right_to_left){vakata_context.element.addClass("vakata-context-rtl").css("direction","rtl")}vakata_context.element.find("ul").hide().end()})})}($);$.jstree.defaults.dnd={copy:true,open_timeout:500,is_draggable:true,check_while_dragging:true,always_copy:false,inside_pos:0,drag_selection:true,touch:true,large_drop_target:false,large_drag_target:false};$.jstree.plugins.dnd=function(options,parent){this.bind=function(){parent.bind.call(this);this.element.on("mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",$.proxy(function(e){if(this.settings.dnd.large_drag_target&&$(e.target).closest(".jstree-node")[0]!==e.currentTarget){return true}if(e.type==="touchstart"&&(!this.settings.dnd.touch||this.settings.dnd.touch==="selected"&&!$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked"))){return true}var obj=this.get_node(e.target),mlt=this.is_selected(obj)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,txt=mlt>1?mlt+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text){txt=$.vakata.html.escape(txt)}if(obj&&obj.id&&obj.id!==$.jstree.root&&(e.which===1||e.type==="touchstart")&&(this.settings.dnd.is_draggable===true||$.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,mlt>1?this.get_top_selected(true):[obj],e))){this.element.trigger("mousedown.jstree");return $.vakata.dnd.start(e,{jstree:true,origin:this,obj:this.get_node(obj,true),nodes:mlt>1?this.get_top_selected():[obj.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+txt+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}},this))}};$(function(){var lastmv=false,laster=false,lastev=false,opento=false,marker=$('<div id="jstree-marker">&#160;</div>').hide();$(document).on("dnd_start.vakata.jstree",function(e,data){lastmv=false;lastev=false;if(!data||!data.data||!data.data.jstree){return}marker.appendTo("body")}).on("dnd_move.vakata.jstree",function(e,data){if(opento){clearTimeout(opento)}if(!data||!data.data||!data.data.jstree){return}if(data.event.target.id&&data.event.target.id==="jstree-marker"){return}lastev=data.event;var ins=$.jstree.reference(data.event.target),ref=false,off=false,rel=false,tmp,l,t,h,p,i,o,ok,t1,t2,op,ps,pr,ip,tm;if(ins&&ins._data&&ins._data.dnd){marker.attr("class","jstree-"+ins.get_theme()+(ins.settings.core.themes.responsive?" jstree-dnd-responsive":""));data.helper.children().attr("class","jstree-"+ins.get_theme()+" jstree-"+ins.get_theme()+"-"+ins.get_theme_variant()+" "+(ins.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"show":"hide"]();if((data.event.target===ins.element[0]||data.event.target===ins.get_container_ul()[0])&&ins.get_container_ul().children().length===0){ok=true;for(t1=0,t2=data.data.nodes.length;t1<t2;t1++){ok=ok&&ins.check(data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node",data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],$.jstree.root,"last",{dnd:true,ref:ins.get_node($.jstree.root),pos:"i",origin:data.data.origin,is_multi:data.data.origin&&data.data.origin!==ins,is_foreign:!data.data.origin});if(!ok){break}}if(ok){lastmv={ins:ins,par:$.jstree.root,pos:"last"};marker.hide();data.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");return}}else{ref=ins.settings.dnd.large_drop_target?$(data.event.target).closest(".jstree-node").children(".jstree-anchor"):$(data.event.target).closest(".jstree-anchor");if(ref&&ref.length&&ref.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")){off=ref.offset();rel=data.event.pageY-off.top;h=ref.outerHeight();if(rel<h/3){o=["b","i","a"]}else if(rel>h-h/3){o=["a","i","b"]}else{o=rel>h/2?["i","a","b"]:["i","b","a"]}$.each(o,function(j,v){switch(v){case"b":l=off.left-6;t=off.top;p=ins.get_parent(ref);i=ref.parent().index();break;case"i":ip=ins.settings.dnd.inside_pos;tm=ins.get_node(ref.parent());l=off.left-2;t=off.top+h/2+1;p=tm.id;i=ip==="first"?0:ip==="last"?tm.children.length:Math.min(ip,tm.children.length);break;case"a":l=off.left-6;t=off.top+h;p=ins.get_parent(ref);i=ref.parent().index()+1;break}ok=true;for(t1=0,t2=data.data.nodes.length;t1<t2;t1++){op=data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node";ps=i;if(op==="move_node"&&v==="a"&&data.data.origin&&data.data.origin===ins&&p===ins.get_parent(data.data.nodes[t1])){pr=ins.get_node(p);if(ps>$.inArray(data.data.nodes[t1],pr.children)){ps-=1}}ok=ok&&(ins&&ins.settings&&ins.settings.dnd&&ins.settings.dnd.check_while_dragging===false||ins.check(op,data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],p,ps,{dnd:true,ref:ins.get_node(ref.parent()),pos:v,origin:data.data.origin,is_multi:data.data.origin&&data.data.origin!==ins,is_foreign:!data.data.origin}));if(!ok){if(ins&&ins.last_error){laster=ins.last_error()}break}}if(v==="i"&&ref.parent().is(".jstree-closed")&&ins.settings.dnd.open_timeout){opento=setTimeout(function(x,z){return function(){x.open_node(z)}}(ins,ref),ins.settings.dnd.open_timeout)}if(ok){lastmv={ins:ins,par:p,pos:v==="i"&&ip==="last"&&i===0&&!ins.is_loaded(tm)?"last":i};marker.css({left:l+"px",top:t+"px"}).show();data.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");laster={};o=true;return false}});if(o===true){return}}}}lastmv=false;data.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");marker.hide()}).on("dnd_scroll.vakata.jstree",function(e,data){if(!data||!data.data||!data.data.jstree){return}marker.hide();lastmv=false;lastev=false;data.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er")}).on("dnd_stop.vakata.jstree",function(e,data){if(opento){clearTimeout(opento)}if(!data||!data.data||!data.data.jstree){return}marker.hide().detach();var i,j,nodes=[];if(lastmv){for(i=0,j=data.data.nodes.length;i<j;i++){nodes[i]=data.data.origin?data.data.origin.get_node(data.data.nodes[i]):data.data.nodes[i]}lastmv.ins[data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node"](nodes,lastmv.par,lastmv.pos,false,false,false,data.data.origin)}else{i=$(data.event.target).closest(".jstree");if(i.length&&laster&&laster.error&&laster.error==="check"){i=i.jstree(true);if(i){i.settings.core.error.call(this,laster)}}}lastev=false;lastmv=false}).on("keyup.jstree keydown.jstree",function(e,data){data=$.vakata.dnd._get();if(data&&data.data&&data.data.jstree){data.helper.find(".jstree-copy").first()[data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"]();if(lastev){lastev.metaKey=e.metaKey;lastev.ctrlKey=e.ctrlKey;$.vakata.dnd._trigger("move",lastev)}}})});!function($){$.vakata.html={div:$("<div />"),escape:function(str){return $.vakata.html.div.text(str).html()},strip:function(str){return $.vakata.html.div.empty().append($.parseHTML(str)).text()}};var vakata_dnd={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};$.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(event_name,e){var data=$.vakata.dnd._get();data.event=e;$(document).triggerHandler("dnd_"+event_name+".vakata",data)},_get:function(){return{data:vakata_dnd.data,element:vakata_dnd.element,helper:vakata_dnd.helper}},_clean:function(){if(vakata_dnd.helper){vakata_dnd.helper.remove()}if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false}vakata_dnd={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};$(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag);$(document).off("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop)},_scroll:function(init_only){if(!vakata_dnd.scroll_e||!vakata_dnd.scroll_l&&!vakata_dnd.scroll_t){if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false}return false}if(!vakata_dnd.scroll_i){vakata_dnd.scroll_i=setInterval($.vakata.dnd._scroll,100);return false}if(init_only===true){return false}var i=vakata_dnd.scroll_e.scrollTop(),j=vakata_dnd.scroll_e.scrollLeft();vakata_dnd.scroll_e.scrollTop(i+vakata_dnd.scroll_t*$.vakata.dnd.settings.scroll_speed);vakata_dnd.scroll_e.scrollLeft(j+vakata_dnd.scroll_l*$.vakata.dnd.settings.scroll_speed);if(i!==vakata_dnd.scroll_e.scrollTop()||j!==vakata_dnd.scroll_e.scrollLeft()){$.vakata.dnd._trigger("scroll",vakata_dnd.scroll_e)}},start:function(e,data,html){if(e.type==="touchstart"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(vakata_dnd.is_drag){$.vakata.dnd.stop({})}try{e.currentTarget.unselectable="on";e.currentTarget.onselectstart=function(){return false};if(e.currentTarget.style){e.currentTarget.style.MozUserSelect="none"}}catch(ignore){}vakata_dnd.init_x=e.pageX;vakata_dnd.init_y=e.pageY;vakata_dnd.data=data;vakata_dnd.is_down=true;vakata_dnd.element=e.currentTarget;vakata_dnd.target=e.target;vakata_dnd.is_touch=e.type==="touchstart";if(html!==false){vakata_dnd.helper=$("<div id='vakata-dnd'></div>").html(html).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})}$(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag);$(document).on("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop);return false},drag:function(e){if(e.type==="touchmove"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(!vakata_dnd.is_down){return}if(!vakata_dnd.is_drag){if(Math.abs(e.pageX-vakata_dnd.init_x)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)||Math.abs(e.pageY-vakata_dnd.init_y)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)){if(vakata_dnd.helper){vakata_dnd.helper.appendTo("body");vakata_dnd.helper_w=vakata_dnd.helper.outerWidth()}vakata_dnd.is_drag=true;$.vakata.dnd._trigger("start",e)}else{return}}var d=false,w=false,dh=false,wh=false,dw=false,ww=false,dt=false,dl=false,ht=false,hl=false;vakata_dnd.scroll_t=0;vakata_dnd.scroll_l=0;vakata_dnd.scroll_e=false;$($(e.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test($(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var t=$(this),o=t.offset();if(this.scrollHeight>this.offsetHeight){if(o.top+t.height()-e.pageY<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1}if(e.pageY-o.top<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1}}if(this.scrollWidth>this.offsetWidth){if(o.left+t.width()-e.pageX<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1}if(e.pageX-o.left<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1}}if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=$(this);return false}});if(!vakata_dnd.scroll_e){d=$(document);w=$(window);dh=d.height();wh=w.height();dw=d.width();ww=w.width();dt=d.scrollTop();dl=d.scrollLeft();if(dh>wh&&e.pageY-dt<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1}if(dh>wh&&wh-(e.pageY-dt)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1}if(dw>ww&&e.pageX-dl<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1}if(dw>ww&&ww-(e.pageX-dl)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1}if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=d}}if(vakata_dnd.scroll_e){$.vakata.dnd._scroll(true)}if(vakata_dnd.helper){ht=parseInt(e.pageY+$.vakata.dnd.settings.helper_top,10);hl=parseInt(e.pageX+$.vakata.dnd.settings.helper_left,10);if(dh&&ht+25>dh){ht=dh-50}if(dw&&hl+vakata_dnd.helper_w>dw){hl=dw-(vakata_dnd.helper_w+2)}vakata_dnd.helper.css({left:hl+"px",top:ht+"px"})}$.vakata.dnd._trigger("move",e);return false},stop:function(e){if(e.type==="touchend"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(vakata_dnd.is_drag){$.vakata.dnd._trigger("stop",e)}else{if(e.type==="touchend"&&e.target===vakata_dnd.target){var to=setTimeout(function(){$(e.target).click()},100);$(e.target).one("click",function(){if(to){clearTimeout(to)}})}}$.vakata.dnd._clean();return false}}}($);$.jstree.defaults.massload=null;$.jstree.plugins.massload=function(options,parent){this.init=function(el,options){parent.init.call(this,el,options);this._data.massload={}};this._load_nodes=function(nodes,callback,is_callback){var s=this.settings.massload;if(is_callback&&!$.isEmptyObject(this._data.massload)){return parent._load_nodes.call(this,nodes,callback,is_callback)}if($.isFunction(s)){return s.call(this,nodes,$.proxy(function(data){if(data){for(var i in data){if(data.hasOwnProperty(i)){this._data.massload[i]=data[i]}}}parent._load_nodes.call(this,nodes,callback,is_callback)},this))}if(typeof s==="object"&&s&&s.url){s=$.extend(true,{},s);if($.isFunction(s.url)){s.url=s.url.call(this,nodes)}if($.isFunction(s.data)){s.data=s.data.call(this,nodes)}return $.ajax(s).done($.proxy(function(data,t,x){if(data){for(var i in data){if(data.hasOwnProperty(i)){this._data.massload[i]=data[i]}}}parent._load_nodes.call(this,nodes,callback,is_callback)},this)).fail($.proxy(function(f){parent._load_nodes.call(this,nodes,callback,is_callback)},this))}return parent._load_nodes.call(this,nodes,callback,is_callback)};this._load_node=function(obj,callback){var d=this._data.massload[obj.id];if(d){return this[typeof d==="string"?"_append_html_data":"_append_json_data"](obj,typeof d==="string"?$($.parseHTML(d)).filter(function(){return this.nodeType!==3}):d,function(status){callback.call(this,status);delete this._data.massload[obj.id]})}return parent._load_node.call(this,obj,callback)}};$.jstree.defaults.search={ajax:false,fuzzy:false,case_sensitive:false,show_only_matches:false,show_only_matches_children:false,close_opened_onclear:true,search_leaves_only:false,search_callback:false};$.jstree.plugins.search=function(options,parent){this.bind=function(){parent.bind.call(this);this._data.search.str="";this._data.search.dom=$();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=false;this._data.search.smc=false;this._data.search.hdn=[];this.element.on("search.jstree",$.proxy(function(e,data){if(this._data.search.som&&data.res.length){var m=this._model.data,i,j,p=[];for(i=0,j=data.res.length;i<j;i++){if(m[data.res[i]]&&!m[data.res[i]].state.hidden){p.push(data.res[i]);p=p.concat(m[data.res[i]].parents);if(this._data.search.smc){p=p.concat(m[data.res[i]].children_d)}}}p=$.vakata.array_remove_item($.vakata.array_unique(p),$.jstree.root);this._data.search.hdn=this.hide_all(true);this.show_node(p)}},this)).on("clear_search.jstree",$.proxy(function(e,data){if(this._data.search.som&&data.res.length){this.show_node(this._data.search.hdn)}},this))};this.search=function(str,skip_async,show_only_matches,inside,append,show_only_matches_children){if(str===false||$.trim(str.toString())===""){return this.clear_search()}inside=this.get_node(inside);inside=inside&&inside.id?inside.id:null;str=str.toString();var s=this.settings.search,a=s.ajax?s.ajax:false,m=this._model.data,f=null,r=[],p=[],i,j;if(this._data.search.res.length&&!append){this.clear_search()
}if(show_only_matches===undefined){show_only_matches=s.show_only_matches}if(show_only_matches_children===undefined){show_only_matches_children=s.show_only_matches_children}if(!skip_async&&a!==false){if($.isFunction(a)){return a.call(this,str,$.proxy(function(d){if(d&&d.d){d=d.d}this._load_nodes(!$.isArray(d)?[]:$.vakata.array_unique(d),function(){this.search(str,true,show_only_matches,inside,append)},true)},this),inside)}else{a=$.extend({},a);if(!a.data){a.data={}}a.data.str=str;if(inside){a.data.inside=inside}return $.ajax(a).fail($.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(a)};this.settings.core.error.call(this,this._data.core.last_error)},this)).done($.proxy(function(d){if(d&&d.d){d=d.d}this._load_nodes(!$.isArray(d)?[]:$.vakata.array_unique(d),function(){this.search(str,true,show_only_matches,inside,append)},true)},this))}}if(!append){this._data.search.str=str;this._data.search.dom=$();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=show_only_matches;this._data.search.smc=show_only_matches_children}f=new $.vakata.search(str,true,{caseSensitive:s.case_sensitive,fuzzy:s.fuzzy});$.each(m[inside?inside:$.jstree.root].children_d,function(ii,i){var v=m[i];if(v.text&&(!s.search_leaves_only||v.state.loaded&&v.children.length===0)&&(s.search_callback&&s.search_callback.call(this,str,v)||!s.search_callback&&f.search(v.text).isMatch)){r.push(i);p=p.concat(v.parents)}});if(r.length){p=$.vakata.array_unique(p);for(i=0,j=p.length;i<j;i++){if(p[i]!==$.jstree.root&&m[p[i]]&&this.open_node(p[i],null,0)===true){this._data.search.opn.push(p[i])}}if(!append){this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(r,function(v){return"0123456789".indexOf(v[0])!==-1?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #")));this._data.search.res=r}else{this._data.search.dom=this._data.search.dom.add($(this.element[0].querySelectorAll("#"+$.map(r,function(v){return"0123456789".indexOf(v[0])!==-1?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #"))));this._data.search.res=$.vakata.array_unique(this._data.search.res.concat(r))}this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:str,res:this._data.search.res,show_only_matches:show_only_matches})};this.clear_search=function(){if(this.settings.search.close_opened_onclear){this.close_node(this._data.search.opn,0)}this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});if(this._data.search.res.length){this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(this._data.search.res,function(v){return"0123456789".indexOf(v[0])!==-1?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #")));this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")}this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=$()};this.redraw_node=function(obj,deep,callback,force_render){obj=parent.redraw_node.apply(this,arguments);if(obj){if($.inArray(obj.id,this._data.search.res)!==-1){var i,j,tmp=null;for(i=0,j=obj.childNodes.length;i<j;i++){if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break}}if(tmp){tmp.className+=" jstree-search"}}}return obj}};!function($){$.vakata.search=function(pattern,txt,options){options=options||{};options=$.extend({},$.vakata.search.defaults,options);if(options.fuzzy!==false){options.fuzzy=true}pattern=options.caseSensitive?pattern:pattern.toLowerCase();var MATCH_LOCATION=options.location,MATCH_DISTANCE=options.distance,MATCH_THRESHOLD=options.threshold,patternLen=pattern.length,matchmask,pattern_alphabet,match_bitapScore,search;if(patternLen>32){options.fuzzy=false}if(options.fuzzy){matchmask=1<<patternLen-1;pattern_alphabet=function(){var mask={},i=0;for(i=0;i<patternLen;i++){mask[pattern.charAt(i)]=0}for(i=0;i<patternLen;i++){mask[pattern.charAt(i)]|=1<<patternLen-i-1}return mask}();match_bitapScore=function(e,x){var accuracy=e/patternLen,proximity=Math.abs(MATCH_LOCATION-x);if(!MATCH_DISTANCE){return proximity?1:accuracy}return accuracy+proximity/MATCH_DISTANCE}}search=function(text){text=options.caseSensitive?text:text.toLowerCase();if(pattern===text||text.indexOf(pattern)!==-1){return{isMatch:true,score:0}}if(!options.fuzzy){return{isMatch:false,score:1}}var i,j,textLen=text.length,scoreThreshold=MATCH_THRESHOLD,bestLoc=text.indexOf(pattern,MATCH_LOCATION),binMin,binMid,binMax=patternLen+textLen,lastRd,start,finish,rd,charMatch,score=1,locations=[];if(bestLoc!==-1){scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold);bestLoc=text.lastIndexOf(pattern,MATCH_LOCATION+patternLen);if(bestLoc!==-1){scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold)}}bestLoc=-1;for(i=0;i<patternLen;i++){binMin=0;binMid=binMax;while(binMin<binMid){if(match_bitapScore(i,MATCH_LOCATION+binMid)<=scoreThreshold){binMin=binMid}else{binMax=binMid}binMid=Math.floor((binMax-binMin)/2+binMin)}binMax=binMid;start=Math.max(1,MATCH_LOCATION-binMid+1);finish=Math.min(MATCH_LOCATION+binMid,textLen)+patternLen;rd=new Array(finish+2);rd[finish+1]=(1<<i)-1;for(j=finish;j>=start;j--){charMatch=pattern_alphabet[text.charAt(j-1)];if(i===0){rd[j]=(rd[j+1]<<1|1)&charMatch}else{rd[j]=(rd[j+1]<<1|1)&charMatch|((lastRd[j+1]|lastRd[j])<<1|1)|lastRd[j+1]}if(rd[j]&matchmask){score=match_bitapScore(i,j-1);if(score<=scoreThreshold){scoreThreshold=score;bestLoc=j-1;locations.push(bestLoc);if(bestLoc>MATCH_LOCATION){start=Math.max(1,2*MATCH_LOCATION-bestLoc)}else{break}}}}if(match_bitapScore(i+1,MATCH_LOCATION)>scoreThreshold){break}lastRd=rd}return{isMatch:bestLoc>=0,score:score}};return txt===true?{search:search}:search(txt)};$.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:false,caseSensitive:false}}($);$.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1};$.jstree.plugins.sort=function(options,parent){this.bind=function(){parent.bind.call(this);this.element.on("model.jstree",$.proxy(function(e,data){this.sort(data.parent,true)},this)).on("rename_node.jstree create_node.jstree",$.proxy(function(e,data){this.sort(data.parent||data.node.parent,false);this.redraw_node(data.parent||data.node.parent,true)},this)).on("move_node.jstree copy_node.jstree",$.proxy(function(e,data){this.sort(data.parent,false);this.redraw_node(data.parent,true)},this))};this.sort=function(obj,deep){var i,j;obj=this.get_node(obj);if(obj&&obj.children&&obj.children.length){obj.children.sort($.proxy(this.settings.sort,this));if(deep){for(i=0,j=obj.children_d.length;i<j;i++){this.sort(obj.children_d[i],false)}}}}};var to=false;$.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:false,filter:false};$.jstree.plugins.state=function(options,parent){this.bind=function(){parent.bind.call(this);var bind=$.proxy(function(){this.element.on(this.settings.state.events,$.proxy(function(){if(to){clearTimeout(to)}to=setTimeout($.proxy(function(){this.save_state()},this),100)},this));this.trigger("state_ready")},this);this.element.on("ready.jstree",$.proxy(function(e,data){this.element.one("restore_state.jstree",bind);if(!this.restore_state()){bind()}},this))};this.save_state=function(){var st={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};$.vakata.storage.set(this.settings.state.key,JSON.stringify(st))};this.restore_state=function(){var k=$.vakata.storage.get(this.settings.state.key);if(!!k){try{k=JSON.parse(k)}catch(ex){return false}}if(!!k&&k.ttl&&k.sec&&+new Date-k.sec>k.ttl){return false}if(!!k&&k.state){k=k.state}if(!!k&&$.isFunction(this.settings.state.filter)){k=this.settings.state.filter.call(this,k)}if(!!k){this.element.one("set_state.jstree",function(e,data){data.instance.trigger("restore_state",{state:$.extend(true,{},k)})});this.set_state(k);return true}return false};this.clear_state=function(){return $.vakata.storage.del(this.settings.state.key)}};!function($,undefined){$.vakata.storage={set:function(key,val){return window.localStorage.setItem(key,val)},get:function(key){return window.localStorage.getItem(key)},del:function(key){return window.localStorage.removeItem(key)}}}($);$.jstree.defaults.types={"default":{}};$.jstree.defaults.types[$.jstree.root]={};$.jstree.plugins.types=function(options,parent){this.init=function(el,options){var i,j;if(options&&options.types&&options.types["default"]){for(i in options.types){if(i!=="default"&&i!==$.jstree.root&&options.types.hasOwnProperty(i)){for(j in options.types["default"]){if(options.types["default"].hasOwnProperty(j)&&options.types[i][j]===undefined){options.types[i][j]=options.types["default"][j]}}}}}parent.init.call(this,el,options);this._model.data[$.jstree.root].type=$.jstree.root};this.refresh=function(skip_loading,forget_state){parent.refresh.call(this,skip_loading,forget_state);this._model.data[$.jstree.root].type=$.jstree.root};this.bind=function(){this.element.on("model.jstree",$.proxy(function(e,data){var m=this._model.data,dpc=data.nodes,t=this.settings.types,i,j,c="default";for(i=0,j=dpc.length;i<j;i++){c="default";if(m[dpc[i]].original&&m[dpc[i]].original.type&&t[m[dpc[i]].original.type]){c=m[dpc[i]].original.type}if(m[dpc[i]].data&&m[dpc[i]].data.jstree&&m[dpc[i]].data.jstree.type&&t[m[dpc[i]].data.jstree.type]){c=m[dpc[i]].data.jstree.type}m[dpc[i]].type=c;if(m[dpc[i]].icon===true&&t[c].icon!==undefined){m[dpc[i]].icon=t[c].icon}}m[$.jstree.root].type=$.jstree.root},this));parent.bind.call(this)};this.get_json=function(obj,options,flat){var i,j,m=this._model.data,opt=options?$.extend(true,{},options,{no_id:false}):{},tmp=parent.get_json.call(this,obj,opt,flat);if(tmp===false){return false}if($.isArray(tmp)){for(i=0,j=tmp.length;i<j;i++){tmp[i].type=tmp[i].id&&m[tmp[i].id]&&m[tmp[i].id].type?m[tmp[i].id].type:"default";if(options&&options.no_id){delete tmp[i].id;if(tmp[i].li_attr&&tmp[i].li_attr.id){delete tmp[i].li_attr.id}if(tmp[i].a_attr&&tmp[i].a_attr.id){delete tmp[i].a_attr.id}}}}else{tmp.type=tmp.id&&m[tmp.id]&&m[tmp.id].type?m[tmp.id].type:"default";if(options&&options.no_id){tmp=this._delete_ids(tmp)}}return tmp};this._delete_ids=function(tmp){if($.isArray(tmp)){for(var i=0,j=tmp.length;i<j;i++){tmp[i]=this._delete_ids(tmp[i])}return tmp}delete tmp.id;if(tmp.li_attr&&tmp.li_attr.id){delete tmp.li_attr.id}if(tmp.a_attr&&tmp.a_attr.id){delete tmp.a_attr.id}if(tmp.children&&$.isArray(tmp.children)){tmp.children=this._delete_ids(tmp.children)}return tmp};this.check=function(chk,obj,par,pos,more){if(parent.check.call(this,chk,obj,par,pos,more)===false){return false}obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);var m=obj&&obj.id?more&&more.origin?more.origin:$.jstree.reference(obj.id):null,tmp,d,i,j;m=m&&m._model&&m._model.data?m._model.data:null;switch(chk){case"create_node":case"move_node":case"copy_node":if(chk!=="move_node"||$.inArray(obj.id,par.children)===-1){tmp=this.get_rules(par);if(tmp.max_children!==undefined&&tmp.max_children!==-1&&tmp.max_children===par.children.length){this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}if(tmp.valid_children!==undefined&&tmp.valid_children!==-1&&$.inArray(obj.type||"default",tmp.valid_children)===-1){this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}if(m&&obj.children_d&&obj.parents){d=0;for(i=0,j=obj.children_d.length;i<j;i++){d=Math.max(d,m[obj.children_d[i]].parents.length)}d=d-obj.parents.length+1}if(d<=0||d===undefined){d=1}do{if(tmp.max_depth!==undefined&&tmp.max_depth!==-1&&tmp.max_depth<d){this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}par=this.get_node(par.parent);tmp=this.get_rules(par);d++}while(par)}break}return true};this.get_rules=function(obj){obj=this.get_node(obj);if(!obj){return false}var tmp=this.get_type(obj,true);if(tmp.max_depth===undefined){tmp.max_depth=-1}if(tmp.max_children===undefined){tmp.max_children=-1}if(tmp.valid_children===undefined){tmp.valid_children=-1}return tmp};this.get_type=function(obj,rules){obj=this.get_node(obj);return!obj?false:rules?$.extend({type:obj.type},this.settings.types[obj.type]):obj.type};this.set_type=function(obj,type){var t,t1,t2,old_type,old_icon;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_type(obj[t1],type)}return true}t=this.settings.types;obj=this.get_node(obj);if(!t[type]||!obj){return false}old_type=obj.type;old_icon=this.get_icon(obj);obj.type=type;if(old_icon===true||t[old_type]&&t[old_type].icon!==undefined&&old_icon===t[old_type].icon){this.set_icon(obj,t[type].icon!==undefined?t[type].icon:true)}return true}};$.jstree.defaults.unique={case_sensitive:false,duplicate:function(name,counter){return name+" ("+counter+")"}};$.jstree.plugins.unique=function(options,parent){this.check=function(chk,obj,par,pos,more){if(parent.check.call(this,chk,obj,par,pos,more)===false){return false}obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);if(!par||!par.children){return true}var n=chk==="rename_node"?pos:obj.text,c=[],s=this.settings.unique.case_sensitive,m=this._model.data,i,j;for(i=0,j=par.children.length;i<j;i++){c.push(s?m[par.children[i]].text:m[par.children[i]].text.toLowerCase())}if(!s){n=n.toLowerCase()}switch(chk){case"delete_node":return true;case"rename_node":i=$.inArray(n,c)===-1||obj.text&&obj.text[s?"toString":"toLowerCase"]()===n;if(!i){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return i;case"create_node":i=$.inArray(n,c)===-1;if(!i){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return i;case"copy_node":i=$.inArray(n,c)===-1;if(!i){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return i;case"move_node":i=obj.parent===par.id&&(!more||!more.is_multi)||$.inArray(n,c)===-1;if(!i){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return i}return true};this.create_node=function(par,node,pos,callback,is_loaded){if(!node||node.text===undefined){if(par===null){par=$.jstree.root}par=this.get_node(par);if(!par){return parent.create_node.call(this,par,node,pos,callback,is_loaded)}pos=pos===undefined?"last":pos;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return parent.create_node.call(this,par,node,pos,callback,is_loaded)}if(!node){node={}}var tmp,n,dpc,i,j,m=this._model.data,s=this.settings.unique.case_sensitive,cb=this.settings.unique.duplicate;n=tmp=this.get_string("New node");dpc=[];for(i=0,j=par.children.length;i<j;i++){dpc.push(s?m[par.children[i]].text:m[par.children[i]].text.toLowerCase())}i=1;while($.inArray(s?n:n.toLowerCase(),dpc)!==-1){n=cb.call(this,tmp,++i).toString()}node.text=n}return parent.create_node.call(this,par,node,pos,callback,is_loaded)}};var div=document.createElement("DIV");div.setAttribute("unselectable","on");div.setAttribute("role","presentation");div.className="jstree-wholerow";div.innerHTML="&#160;";$.jstree.plugins.wholerow=function(options,parent){this.bind=function(){parent.bind.call(this);this.element.on("ready.jstree set_state.jstree",$.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var tmp=false,i,j;for(i=0,j=data.selected.length;i<j;i++){tmp=this.get_node(data.selected[i],true);if(tmp&&tmp.length){tmp.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}}},this)).on("open_node.jstree",$.proxy(function(e,data){this.get_node(data.node,true).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",$.proxy(function(e,data){if(e.type==="hover_node"&&this.is_disabled(data.node)){return}this.get_node(data.node,true).children(".jstree-wholerow")[e.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",$.proxy(function(e){e.preventDefault();var tmp=$.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp)},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",$.proxy(function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",$.proxy(function(e){e.stopImmediatePropagation();if(!this.is_disabled(e.currentTarget)){this.hover_node(e.currentTarget)}return false},this)).on("mouseleave.jstree",".jstree-node",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))};this.teardown=function(){if(this.settings.wholerow){this.element.find(".jstree-wholerow").remove()}parent.teardown.call(this)};this.redraw_node=function(obj,deep,callback,force_render){obj=parent.redraw_node.apply(this,arguments);if(obj){var tmp=div.cloneNode(true);if($.inArray(obj.id,this._data.core.selected)!==-1){tmp.className+=" jstree-wholerow-clicked"}if(this._data.core.focused&&this._data.core.focused===obj.id){tmp.className+=" jstree-wholerow-hovered"}obj.insertBefore(tmp,obj.childNodes[0])}return obj}};if(document.registerElement&&Object&&Object.create){var proto=Object.create(HTMLElement.prototype);proto.createdCallback=function(){var c={core:{},plugins:[]},i;for(i in $.jstree.plugins){if($.jstree.plugins.hasOwnProperty(i)&&this.attributes[i]){c.plugins.push(i);if(this.getAttribute(i)&&JSON.parse(this.getAttribute(i))){c[i]=JSON.parse(this.getAttribute(i))}}}for(i in $.jstree.defaults.core){if($.jstree.defaults.core.hasOwnProperty(i)&&this.attributes[i]){c.core[i]=JSON.parse(this.getAttribute(i))||this.getAttribute(i)}}$(this).jstree(c)};try{document.registerElement("vakata-jstree",{prototype:proto})}catch(ignore){}}$.jstree.defaults.added=added.defaults;$.jstree.plugins.added=added.structure});define("plugins/datatree/extend/plugin.added",[],function(require,exports,module){var input=document.createElement("input");input.className="jstree-input form-control ";input.setAttribute("type","text");module.exports={defaults:{number:true},structure:function(options,parent){this.bind=function(){parent.bind.call(this)};this.redraw_node=function(){node=parent.redraw_node.apply(this,arguments);if(node){var _input=input.cloneNode(false);_input.setAttribute("name",node.id);_input.setAttribute("value",parent._data.added[node.id]);node.insertBefore(_input,node[0]);$(_input).change(function(){$(node).data("val",$(this).val());var name=$(this).attr("name");parent._data.added[name]=$(this).val()})}return node};this.load_node=function(){return parent.load_node.apply(this,arguments)};this.trigger=function(){var action=arguments[0];var spinnerOptions=options.numberSpinner||false;if(action==="open_node"&&spinnerOptions){$p.numberSpinner($("#"+arguments[1].node.id+" .jstree-children .jstree-input"),$.extend({verticalbuttons:false},spinnerOptions))}parent.trigger.apply(this,arguments)}}}});
