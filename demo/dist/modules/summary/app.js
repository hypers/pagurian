define("modules/summary/app",["../../lib/app","../../lib/vendor/bootstrap/js/bootstrap","../../lib/vendor/uniform/jquery.uniform","../../lib/vendor/jquery-cookie/jquery-cookie","../../lib/vendor/jquery-json/2.4/jquery-json","../../lib/vendor/moment/moment","../../lib/com/form","../../lib/com/alert","../../lib/com/dialog","../../lib/tpl/dialog.tpl","../../lib/com/select","../../lib/com/checkboxes","../../lib/tool/tool","../../lib/tool/url","../../lib/tool/str","../../lib/core/tpl","../../lib/core/layout","../../conf/locale.zh_CN","../../conf/locale.en_US","../../lib/service","../../lib/core/ajax","../../lib/core/transport","../../lib/core/validate","../../conf/route","../../conf/api","./model","../../widgets/summary/module","../../widgets/summary/locale/zh_CN","../../widgets/summary/locale/en_US","../../widgets/summary/tpl/settingPanel.tpl","../../plugins/echarts/module","../../plugins/echarts/locale/zh_CN","../../plugins/echarts/locale/en_US","../../plugins/echarts/chart/line","../../plugins/echarts/chart/pie","../../plugins/echarts/chart/bar","../../plugins/echarts/chart/map"],function(require,exports,module){var app=require("../../lib/app");var model=require("./model");require("../../widgets/summary/module");require("../../plugins/echarts/module");var summaryDemo;app.events.resize=function(){summaryDemo.resize()};app.page.summary=function(){var getColumns=function(){var columns=[];columns.push({cName:"showCounts",title:"展示次数"});columns.push({cName:"clickCounts",title:"点击次数(CLK)"});columns.push({cName:"viewCounts",title:"访问次数(VV)"});columns.push({cName:"pageView",title:"浏览量(PV)"});columns.push({cName:"bounceRate",title:"跳出率"});return columns};var getRows=function(){var rows=[];rows.push({dataName:"title",isTitle:true,klass:"summary-span-title"});rows.push({dataName:"value",klass:"summary-span-value"});rows.push({dataName:"increase",tpl:"增长数:{0}"});rows.push({dataName:"rate",render:function(data,full){var num=(Math.round(data*1e4)/100).toFixed(2),_html="";_html=num>=0?'<span class="summary-span-rate add">+'+num+"%</span>":'<span class="summary-span-rate reduce">'+num+"%</span>";return _html}});return rows};var option={allColumns:getColumns(),allRows:getRows(),dataSource:model.getSummaryData};summaryDemo=$p.summary("#summaryTest",option)};app.page.summaryPro=function(){var getColumns=function(){var columns=[];columns.push({cName:"showCounts",title:"展示次数"});columns.push({cName:"clickCounts",title:"点击次数(CLK)"});columns.push({cName:"viewCounts",title:"访问次数(VV)"});columns.push({cName:"pageView",title:"浏览量(PV)"});columns.push({cName:"bounceRate",title:"跳出率"});columns.push({cName:"avgDayView",title:"平均日浏览次数"});columns.push({cName:"avgViewDeep",title:"平均页面访问深度"});return columns};var getRows=function(){var rows=[];rows.push({dataName:"title",isTitle:true,klass:"summary-span-title"});rows.push({dataName:"value",klass:"summary-span-value"});rows.push({dataName:"increase",tpl:"增长数:{0}"});rows.push({dataName:"rate",render:function(data,full){var num=(Math.round(data*1e4)/100).toFixed(2),_html="";_html=num>=0?'<span class="summary-span-rate add">+'+num+"%</span>":'<span class="summary-span-rate reduce">'+num+"%</span>";return _html}});return rows};var chartData={clickCounts:{columns:["2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11"],rows:[{name:"点击次数(CLK)",data:[120,132,101,134,90,230,210]}]},viewCounts:{columns:["2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11"],rows:[{name:"访问次数(VV)",data:[120,312,101,134,90,230,210]}]},pageView:{columns:["2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11"],rows:[{name:"浏览量(PV)",data:[789,132,101,41,90,230,210]}]},bounceRate:{columns:["2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11"],rows:[{name:"跳出率",data:[56,132,431,134,90,230,210]}]},showCounts:{columns:["2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11"],rows:[{name:"展示次数",data:[120,132,101,134,120,321,210]}]},avgDayView:{columns:["2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11"],rows:[{name:"平均日浏览次数",data:[345,132,101,465,90,230,123]}]},avgViewDeep:{columns:["2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11"],rows:[{name:"平均页面访问深度",data:[120,14,101,134,90,230,210]}]}};var chart=$p.echarts("my_chart",{type:"line",title:{text:"数据分析",subtext:"最近一周数据"}});var option={saveState:true,maxNum:5,minNum:3,canChoose:true,showSetting:true,cName:"cName",allColumns:getColumns(),allRows:getRows(),dataParams:{},dataSource:model.getSummaryData,callbackOpen:function(){console.log("callbackOpen")},callbackSubmit:function(showColumns,datas){console.log("callbackSubmit")},callbackCancel:function(){console.log("callbackCancel")},callBackPanel:function(columnName,columnData,allDatas){$p.alert("【columnName】:"+columnData.cNameTitle+"("+columnName+")-"+columnData.value,"success");chart.load(chartData[columnName]);console.log(columnName);console.log(columnData);console.log(allDatas)},callBackGetData:function(chooseColumnsName,chooseColumnsData,allDatas){chart.load(chartData[chooseColumnsName])}};summaryDemo=$p.summary("#summaryProTest",option)};module.exports=app});define("lib/app",["lib/vendor/bootstrap/js/bootstrap","lib/vendor/uniform/jquery.uniform","lib/vendor/jquery-cookie/jquery-cookie","lib/vendor/jquery-json/2.4/jquery-json","lib/vendor/moment/moment","lib/com/form","lib/com/alert","lib/com/dialog","lib/com/select","lib/com/checkboxes","lib/tool/tool","lib/tool/url","lib/tool/str","lib/core/tpl","lib/core/layout","conf/locale.zh_CN","conf/locale.en_US","lib/service","lib/core/ajax","lib/core/transport","lib/core/validate","conf/route","conf/api"],function(require,exports,module){require("lib/vendor/bootstrap/js/bootstrap");require("lib/vendor/uniform/jquery.uniform");require("lib/vendor/jquery-cookie/jquery-cookie");require("lib/vendor/jquery-json/2.4/jquery-json");require("lib/vendor/moment/moment");require("lib/com/form");require("lib/com/alert");require("lib/com/dialog");require("lib/com/select");require("lib/com/checkboxes");require("lib/tool/tool");require("lib/tool/url");require("lib/tool/str");require("lib/core/tpl");var layout=require("lib/core/layout");var locale={zh_CN:require("conf/locale.zh_CN"),en_US:require("conf/locale.en_US")};pagurian.locale=locale[pagurian.language];pagurian.lib={service:require("lib/service"),route:require("conf/route")};var api=require("conf/api");pagurian.lib.api=api.items||{};pagurian.lib.apiPostfix=api.postfix;pagurian.log=function(){if(!window.console||!pagurian.debug){return}if(arguments.length===1){console.error(arguments[0])}if(arguments.length===2){console[arguments[1]](arguments[0])}};var app={page:{},events:{},updateUniform:function(){layout.updateUniform()},activateCurrentMenu:function(){layout.activateCurrentMenu()},init:function(){layout.init();layout.custom();layout.activateCurrentMenu();layout.resize(function(){if(app.events.resize&&"function"===typeof app.events.resize){app.events.resize()}})}};app.init();module.exports=app});define("lib/vendor/bootstrap/js/bootstrap",[],function(require,exports,module){if("undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]'),b=!0;if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350),void 0):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(){a(d).remove(),a(e).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",f);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),/bottom|top/.test(b)){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")}else this.replaceArrow(j-f,j,"top");c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach()}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(c).is("body")?a(window):a(c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");
if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery)});define("lib/vendor/uniform/jquery.uniform",[],function(require,exports,module){!function($,undef){"use strict";function attrOrProp($el){var args=Array.prototype.slice.call(arguments,1);if($el.prop){return $el.prop.apply($el,args)}return $el.attr.apply($el,args)}function bindMany($el,options,events){var name,namespaced;for(name in events){if(events.hasOwnProperty(name)){namespaced=name.replace(/ |$/g,options.eventNamespace);$el.bind(namespaced,events[name])}}}function bindUi($el,$target,options){bindMany($el,options,{focus:function(){$target.addClass(options.focusClass)},blur:function(){$target.removeClass(options.focusClass);$target.removeClass(options.activeClass)},mouseenter:function(){$target.addClass(options.hoverClass)},mouseleave:function(){$target.removeClass(options.hoverClass);$target.removeClass(options.activeClass)},"mousedown touchbegin":function(){if(!$el.is(":disabled")){$target.addClass(options.activeClass)}},"mouseup touchend":function(){$target.removeClass(options.activeClass)}})}function classClearStandard($el,options){$el.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass)}function classUpdate($el,className,enabled){if(enabled){$el.addClass(className)}else{$el.removeClass(className)}}function classUpdateChecked($tag,$el,options){var c="checked",isChecked=$el.is(":"+c);if($el.prop){$el.prop(c,isChecked)}else{if(isChecked){$el.attr(c,c)}else{$el.removeAttr(c)}}classUpdate($tag,options.checkedClass,isChecked)}function classUpdateDisabled($tag,$el,options){classUpdate($tag,options.disabledClass,$el.is(":disabled"))}function divSpanWrap($el,$container,method){switch(method){case"after":$el.after($container);return $el.next();case"before":$el.before($container);return $el.prev();case"wrap":$el.wrap($container);return $el.parent()}return null}function divSpan($el,options,divSpanConfig){var $div,$span,id;if(!divSpanConfig){divSpanConfig={}}divSpanConfig=$.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},divSpanConfig);$div=$("<div />");$span=$("<span />");if(options.autoHide&&$el.is(":hidden")&&$el.css("display")==="none"){$div.hide()}if(divSpanConfig.divClass){$div.addClass(divSpanConfig.divClass)}if(options.wrapperClass){$div.addClass(options.wrapperClass)}if(divSpanConfig.spanClass){$span.addClass(divSpanConfig.spanClass)}id=attrOrProp($el,"id");if(options.useID&&id){attrOrProp($div,"id",options.idPrefix+"-"+id)}if(divSpanConfig.spanHtml){$span.html(divSpanConfig.spanHtml)}$div=divSpanWrap($el,$div,divSpanConfig.divWrap);$span=divSpanWrap($el,$span,divSpanConfig.spanWrap);classUpdateDisabled($div,$el,options);return{div:$div,span:$span}}function wrapWithWrapperClass($el,options){var $span;if(!options.wrapperClass){return null}$span=$("<span />").addClass(options.wrapperClass);$span=divSpanWrap($el,$span,"wrap");return $span}function highContrast(){var c,$div,el,rgb;rgb="rgb(120,2,153)";$div=$('<div style="width:0;height:0;color:'+rgb+'">');$("body").append($div);el=$div.get(0);if(window.getComputedStyle){c=window.getComputedStyle(el,"").color}else{c=(el.currentStyle||el.style||{}).color}$div.remove();return c.replace(/ /g,"")!==rgb}function htmlify(text){if(!text){return""}return $("<span />").text(text).html()}function isMsie(){return navigator.cpuClass&&!navigator.product}function isMsieSevenOrNewer(){if(typeof window.XMLHttpRequest!=="undefined"){return true}return false}function isMultiselect($el){var elSize;if($el[0].multiple){return true}elSize=attrOrProp($el,"size");if(!elSize||elSize<=1){return false}return true}function returnFalse(){return false}function noSelect($elem,options){var none="none";bindMany($elem,options,{"selectstart dragstart mousedown":returnFalse});$elem.css({MozUserSelect:none,msUserSelect:none,webkitUserSelect:none,userSelect:none})}function setFilename($el,$filenameTag,options){var filename=$el.val();if(filename===""){filename=options.fileDefaultHtml}else{filename=filename.split(/[\/\\]+/);filename=filename[filename.length-1]}$filenameTag.text(filename)}function swap($elements,newCss,callback){var restore,item;restore=[];$elements.each(function(){var name;for(name in newCss){if(Object.prototype.hasOwnProperty.call(newCss,name)){restore.push({el:this,name:name,old:this.style[name]});this.style[name]=newCss[name]}}});callback();while(restore.length){item=restore.pop();item.el.style[item.name]=item.old}}function sizingInvisible($el,callback){var targets;targets=$el.parents();targets.push($el[0]);targets=targets.not(":visible");swap(targets,{visibility:"hidden",display:"block",position:"absolute"},callback)}function unwrapUnwrapUnbindFunction($el,options){return function(){$el.unwrap().unwrap().unbind(options.eventNamespace)}}var allowStyling=true,highContrastTest=false,uniformHandlers=[{match:function($el){return $el.is("a, button, :submit, :reset, input[type='button']")},apply:function($el,options){var $div,defaultSpanHtml,ds,getHtml,doingClickEvent;defaultSpanHtml=options.submitDefaultHtml;if($el.is(":reset")){defaultSpanHtml=options.resetDefaultHtml}if($el.is("a, button")){getHtml=function(){return $el.html()||defaultSpanHtml}}else{getHtml=function(){return htmlify(attrOrProp($el,"value"))||defaultSpanHtml}}ds=divSpan($el,options,{divClass:options.buttonClass,spanHtml:getHtml()});$div=ds.div;bindUi($el,$div,options);doingClickEvent=false;bindMany($div,options,{"click touchend":function(){var ev,res,target,href;if(doingClickEvent){return}if($el.is(":disabled")){return}doingClickEvent=true;if($el[0].dispatchEvent){ev=document.createEvent("MouseEvents");ev.initEvent("click",true,true);res=$el[0].dispatchEvent(ev);if($el.is("a")&&res){target=attrOrProp($el,"target");href=attrOrProp($el,"href");if(!target||target==="_self"){document.location.href=href}else{window.open(href,target)}}}else{$el.click()}doingClickEvent=false}});noSelect($div,options);return{remove:function(){$div.after($el);$div.remove();$el.unbind(options.eventNamespace);return $el},update:function(){classClearStandard($div,options);classUpdateDisabled($div,$el,options);$el.detach();ds.span.html(getHtml()).append($el)}}}},{match:function($el){return $el.is(":checkbox")},apply:function($el,options){var ds,$div,$span;ds=divSpan($el,options,{divClass:options.checkboxClass});$div=ds.div;$span=ds.span;bindUi($el,$div,options);bindMany($el,options,{"click touchend":function(){classUpdateChecked($span,$el,options)}});classUpdateChecked($span,$el,options);return{remove:unwrapUnwrapUnbindFunction($el,options),update:function(){classClearStandard($div,options);$span.removeClass(options.checkedClass);classUpdateChecked($span,$el,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){return $el.is(":file")},apply:function($el,options){var ds,$div,$filename,$button;ds=divSpan($el,options,{divClass:options.fileClass,spanClass:options.fileButtonClass,spanHtml:options.fileButtonHtml,spanWrap:"after"});$div=ds.div;$button=ds.span;$filename=$("<span />").html(options.fileDefaultHtml);$filename.addClass(options.filenameClass);$filename=divSpanWrap($el,$filename,"after");if(!attrOrProp($el,"size")){attrOrProp($el,"size",$div.width()/10)}function filenameUpdate(){setFilename($el,$filename,options)}bindUi($el,$div,options);filenameUpdate();if(isMsie()){bindMany($el,options,{click:function(){$el.trigger("change");setTimeout(filenameUpdate,0)}})}else{bindMany($el,options,{change:filenameUpdate})}noSelect($filename,options);noSelect($button,options);return{remove:function(){$filename.remove();$button.remove();return $el.unwrap().unbind(options.eventNamespace)},update:function(){classClearStandard($div,options);setFilename($el,$filename,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){if($el.is("input")){var t=(" "+attrOrProp($el,"type")+" ").toLowerCase(),allowed=" color date datetime datetime-local email month number password search tel text time url week ";return allowed.indexOf(t)>=0}return false},apply:function($el,options){var elType,$wrapper;elType=attrOrProp($el,"type");$el.addClass(options.inputClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);if(options.inputAddTypeAsClass){$el.addClass(elType)}return{remove:function(){$el.removeClass(options.inputClass);if(options.inputAddTypeAsClass){$el.removeClass(elType)}if($wrapper){$el.unwrap()}},update:returnFalse}}},{match:function($el){return $el.is(":radio")},apply:function($el,options){var ds,$div,$span;ds=divSpan($el,options,{divClass:options.radioClass});$div=ds.div;$span=ds.span;bindUi($el,$div,options);bindMany($el,options,{"click touchend":function(){$.uniform.update($(':radio[name="'+attrOrProp($el,"name")+'"]'))}});classUpdateChecked($span,$el,options);return{remove:unwrapUnwrapUnbindFunction($el,options),update:function(){classClearStandard($div,options);classUpdateChecked($span,$el,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){if($el.is("select")&&!isMultiselect($el)){return true}return false},apply:function($el,options){var ds,$div,$span,origElemWidth;if(options.selectAutoWidth){sizingInvisible($el,function(){origElemWidth=$el.width()})}ds=divSpan($el,options,{divClass:options.selectClass,spanHtml:($el.find(":selected:first")||$el.find("option:first")).html(),spanWrap:"before"});$div=ds.div;$span=ds.span;if(options.selectAutoWidth){sizingInvisible($el,function(){swap($([$span[0],$div[0]]),{display:"block"},function(){var spanPad;spanPad=$span.outerWidth()-$span.width();$div.width(origElemWidth+spanPad);$span.width(origElemWidth)})})}else{$div.addClass("fixedWidth")}bindUi($el,$div,options);bindMany($el,options,{change:function(){$span.html($el.find(":selected").html());$div.removeClass(options.activeClass)},"click touchend":function(){var selHtml=$el.find(":selected").html();if($span.html()!==selHtml){$el.trigger("change")}},keyup:function(){$span.html($el.find(":selected").html())}});noSelect($span,options);return{remove:function(){$span.remove();$el.unwrap().unbind(options.eventNamespace);return $el},update:function(){if(options.selectAutoWidth){$.uniform.restore($el);$el.uniform(options)}else{classClearStandard($div,options);$span.html($el.find(":selected").html());classUpdateDisabled($div,$el,options)}}}}},{match:function($el){if($el.is("select")&&isMultiselect($el)){return true}return false},apply:function($el,options){var $wrapper;$el.addClass(options.selectMultiClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);return{remove:function(){$el.removeClass(options.selectMultiClass);if($wrapper){$el.unwrap()}},update:returnFalse}}},{match:function($el){return $el.is("textarea")},apply:function($el,options){var $wrapper;$el.addClass(options.textareaClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);return{remove:function(){$el.removeClass(options.textareaClass);if($wrapper){$el.unwrap()}},update:returnFalse}}}];if(isMsie()&&!isMsieSevenOrNewer()){allowStyling=false}$.uniform={defaults:{activeClass:"active",autoHide:true,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:true,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:false,selectAutoWidth:true,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:true,wrapperClass:null},elements:[]};$.fn.uniform=function(options){var el=this;options=$.extend({},$.uniform.defaults,options);if(!highContrastTest){highContrastTest=true;if(highContrast()){allowStyling=false}}if(!allowStyling){return this}if(options.resetSelector){$(options.resetSelector).mouseup(function(){window.setTimeout(function(){$.uniform.update(el)},10)})}return this.each(function(){var $el=$(this),i,handler,callbacks;if($el.data("uniformed")){$.uniform.update($el);return}for(i=0;i<uniformHandlers.length;i=i+1){handler=uniformHandlers[i];if(handler.match($el,options)){callbacks=handler.apply($el,options);$el.data("uniformed",callbacks);$.uniform.elements.push($el.get(0));return}}})};$.uniform.restore=$.fn.uniform.restore=function(elem){if(elem===undef){elem=$.uniform.elements}$(elem).each(function(){var $el=$(this),index,elementData;elementData=$el.data("uniformed");if(!elementData){return}elementData.remove();index=$.inArray(this,$.uniform.elements);if(index>=0){$.uniform.elements.splice(index,1)}$el.removeData("uniformed")})};$.uniform.update=$.fn.uniform.update=function(elem){if(elem===undef){elem=$.uniform.elements}$(elem).each(function(){var $el=$(this),elementData;elementData=$el.data("uniformed");if(!elementData){return}elementData.update($el,elementData.options)})}}(jQuery)});define("lib/vendor/jquery-cookie/jquery-cookie",[],function(require,exports,module){!function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date;s.setDate(s.getDate()+q)}o=c.json?JSON.stringify(o):String(o);return document.cookie=[c.raw?p:encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend({},g,{expires:-1}));return true}return false}})});define("lib/vendor/jquery-json/2.4/jquery-json",[],function(require,exports,module){!function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var pairs,k,name,val,type=$.type(o);if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return String(o)}if(type==="string"){return $.quoteString(o)}if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(type==="date"){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||"null")}return"["+pairs.join(",")+"]"}if(typeof o==="object"){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type!=="function"&&type!=="undefined"){val=$.toJSON(o[k]);pairs.push(name+":"+val)}}}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+str+")")}throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+str+'"'}}(jQuery)});define("lib/vendor/moment/moment",[],function(require,exports,module){!function(undefined){var moment,VERSION="2.0.0",round=Math.round,i,languages={},hasModule=typeof module!=="undefined"&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseMultipleFormatChunker=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenSixDigits=/[+\-]?\d{1,6}/,parseTokenWord=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,isoRegex=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return leftZeroFill(~~(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(a/60),2)+":"+leftZeroFill(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(10*a/6),4)},X:function(){return this.unix()}};function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func){return function(a){return this.lang().ordinal(func.call(this,a))}}while(ordinalizeTokens.length){i=ordinalizeTokens.pop();formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i])}while(paddedTokens.length){i=paddedTokens.pop();formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2)}formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3);function Language(){}function Moment(config){extend(this,config)}function Duration(duration){var data=this._data={},years=duration.years||duration.year||duration.y||0,months=duration.months||duration.month||duration.M||0,weeks=duration.weeks||duration.week||duration.w||0,days=duration.days||duration.day||duration.d||0,hours=duration.hours||duration.hour||duration.h||0,minutes=duration.minutes||duration.minute||duration.m||0,seconds=duration.seconds||duration.second||duration.s||0,milliseconds=duration.milliseconds||duration.millisecond||duration.ms||0;this._milliseconds=milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=days+weeks*7;this._months=months+years*12;data.milliseconds=milliseconds%1e3;seconds+=absRound(milliseconds/1e3);data.seconds=seconds%60;minutes+=absRound(seconds/60);data.minutes=minutes%60;hours+=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);days+=weeks*7;data.days=days%30;months+=absRound(days/30);data.months=months%12;years+=absRound(months/12);data.years=years}function extend(a,b){for(var i in b){if(b.hasOwnProperty(i)){a[i]=b[i]}}return a}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function leftZeroFill(number,targetLength){var output=number+"";while(output.length<targetLength){output="0"+output}return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding){var ms=duration._milliseconds,d=duration._days,M=duration._months,currentDate;if(ms){mom._d.setTime(+mom+ms*isAdding)}if(d){mom.date(mom.date()+d*isAdding)}if(M){currentDate=mom.date();mom.date(1).month(mom.month()+M*isAdding).date(Math.min(currentDate,mom.daysInMonth()))}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function compareArrays(array1,array2){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(~~array1[i]!==~~array2[i]){diffs++}}return diffs+lengthDiff}Language.prototype={set:function(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop}else{this["_"+i]=prop}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex,output;if(!this._monthsParse){this._monthsParse=[]}for(i=0;i<12;i++){if(!this._monthsParse[i]){mom=moment([2e3,i]);regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._monthsParse[i].test(monthName)){return i}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});this._longDateFormat[key]=output}return output},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return typeof output==="function"?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return typeof output==="function"?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}};function loadLang(key,values){values.abbr=key;if(!languages[key]){languages[key]=new Language}languages[key].set(values);return languages[key]}function getLangDefinition(key){if(!key){return moment.fn._lang}if(!languages[key]&&hasModule){require("./lang/"+key)}return languages[key]}function removeFormattingTokens(input){if(input.match(/\[.*\]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=typeof array[i].call==="function"?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){var i=5;function replaceLongDateFormatTokens(input){return m.lang().longDateFormat(input)||input}while(i--&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens)}if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}return formatFunctions[format](m)}function getParseRegexForToken(token){switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"YYYYY":return parseTokenSixDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return parseTokenWord;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return new RegExp(token.replace("\\",""))}}function addTimeToArrayFromToken(token,input,config){var a,b,datePartArray=config._a;switch(token){case"M":case"MM":datePartArray[1]=input==null?0:~~input-1;break;case"MMM":case"MMMM":a=getLangDefinition(config._l).monthsParse(input);if(a!=null){datePartArray[1]=a}else{config._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(input!=null){datePartArray[2]=~~input}break;case"YY":datePartArray[0]=~~input+(~~input>68?1900:2e3);break;case"YYYY":case"YYYYY":datePartArray[0]=~~input;break;case"a":case"A":config._isPm=(input+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":datePartArray[3]=~~input;break;case"m":case"mm":datePartArray[4]=~~input;break;case"s":case"ss":datePartArray[5]=~~input;break;case"S":case"SS":case"SSS":datePartArray[6]=~~(("0."+input)*1e3);break;case"X":config._d=new Date(parseFloat(input)*1e3);break;case"Z":case"ZZ":config._useUTC=true;a=(input+"").match(parseTimezoneChunker);if(a&&a[1]){config._tzh=~~a[1]}if(a&&a[2]){config._tzm=~~a[2]}if(a&&a[0]==="+"){config._tzh=-config._tzh;config._tzm=-config._tzm}break}if(input==null){config._isValid=false}}function dateFromArray(config){var i,date,input=[];if(config._d){return}for(i=0;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}input[3]+=config._tzh||0;input[4]+=config._tzm||0;date=new Date(0);if(config._useUTC){date.setUTCFullYear(input[0],input[1],input[2]);date.setUTCHours(input[3],input[4],input[5],input[6])}else{date.setFullYear(input[0],input[1],input[2]);date.setHours(input[3],input[4],input[5],input[6])}config._d=date}function makeDateFromStringAndFormat(config){var tokens=config._f.match(formattingTokens),string=config._i,i,parsedInput;config._a=[];for(i=0;i<tokens.length;i++){parsedInput=(getParseRegexForToken(tokens[i]).exec(string)||[])[0];if(parsedInput){string=string.slice(string.indexOf(parsedInput)+parsedInput.length)}if(formatTokenFunctions[tokens[i]]){addTimeToArrayFromToken(tokens[i],parsedInput,config)}}if(config._isPm&&config._a[3]<12){config._a[3]+=12}if(config._isPm===false&&config._a[3]===12){config._a[3]=0}dateFromArray(config)}function makeDateFromStringAndArray(config){var tempConfig,tempMoment,bestMoment,scoreToBeat=99,i,currentDate,currentScore;while(config._f.length){tempConfig=extend({},config);tempConfig._f=config._f.pop();makeDateFromStringAndFormat(tempConfig);tempMoment=new Moment(tempConfig);if(tempMoment.isValid()){bestMoment=tempMoment;break}currentScore=compareArrays(tempConfig._a,tempMoment.toArray());if(currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempMoment}}extend(config,bestMoment)}function makeDateFromString(config){var i,string=config._i;if(isoRegex.exec(string)){config._f="YYYY-MM-DDT";for(i=0;i<4;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}}if(parseTokenTimezone.exec(string)){config._f+=" Z"}makeDateFromStringAndFormat(config)
}else{config._d=new Date(string)}}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);if(input===undefined){config._d=new Date}else if(matched){config._d=new Date(+matched[1])}else if(typeof input==="string"){makeDateFromString(config)}else if(isArray(input)){config._a=input.slice(0);dateFromArray(config)}else{config._d=input instanceof Date?new Date(+input):new Date(input)}}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=seconds<45&&["s",seconds]||minutes===1&&["m"]||minutes<45&&["mm",minutes]||hours===1&&["h"]||hours<22&&["hh",hours]||days===1&&["d"]||days<=25&&["dd",days]||days<=45&&["M"]||days<345&&["MM",round(days/30)]||years===1&&["y"]||["yy",years];args[2]=withoutSuffix;args[3]=milliseconds>0;args[4]=lang;return substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();if(daysToDayOfWeek>end){daysToDayOfWeek-=7}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}return Math.ceil(moment(mom).add("d",daysToDayOfWeek).dayOfYear()/7)}function makeMoment(config){var input=config._i,format=config._f;if(input===null||input===""){return null}if(typeof input==="string"){config._i=input=getLangDefinition().preparse(input)}if(moment.isMoment(input)){config=extend({},input);config._d=new Date(+input._d)}else if(format){if(isArray(format)){makeDateFromStringAndArray(config)}else{makeDateFromStringAndFormat(config)}}else{makeDateFromInput(config)}return new Moment(config)}moment=function(input,format,lang){return makeMoment({_i:input,_f:format,_l:lang,_isUTC:false})};moment.utc=function(input,format,lang){return makeMoment({_useUTC:true,_isUTC:true,_l:lang,_i:input,_f:format})};moment.unix=function(input){return moment(input*1e3)};moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber=typeof input==="number",duration=isDuration?input._data:isNumber?{}:input,ret;if(isNumber){if(key){duration[key]=input}else{duration.milliseconds=input}}ret=new Duration(duration);if(isDuration&&input.hasOwnProperty("_lang")){ret._lang=input._lang}return ret};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.lang=function(key,values){var i;if(!key){return moment.fn._lang._abbr}if(values){loadLang(key,values)}else if(!languages[key]){getLangDefinition(key)}moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key)};moment.langData=function(key){if(key&&key._lang&&key._lang._abbr){key=key._lang._abbr}return getLangDefinition(key)};moment.isMoment=function(obj){return obj instanceof Moment};moment.isDuration=function(obj){return obj instanceof Duration};moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return moment.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return!!this._isValid},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;if(typeof input==="string"){dur=moment.duration(+val,input)}else{dur=moment.duration(input,val)}addOrSubtractDurationFromMoment(this,dur,1);return this},subtract:function(input,val){var dur;if(typeof input==="string"){dur=moment.duration(+val,input)}else{dur=moment.duration(input,val)}addOrSubtractDurationFromMoment(this,dur,-1);return this},diff:function(input,units,asFloat){var that=this._isUTC?moment(input).utc():moment(input).local(),zoneDiff=(this.zone()-that.zone())*6e4,diff,output;if(units){units=units.replace(/s$/,"")}if(units==="year"||units==="month"){diff=(this.daysInMonth()+that.daysInMonth())*432e5;output=(this.year()-that.year())*12+(this.month()-that.month());output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff;if(units==="year"){output=output/12}}else{diff=this-that-zoneDiff;output=units==="second"?diff/1e3:units==="minute"?diff/6e4:units==="hour"?diff/36e5:units==="day"?diff/864e5:units==="week"?diff/6048e5:diff}return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().startOf("day"),"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){var year=this.year();return year%4===0&&year%100!==0||year%400===0},isDST:function(){return this.zone()<moment([this.year()]).zone()||this.zone()<moment([this.year(),5]).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return input==null?day:this.add({d:input-day})},startOf:function(units){units=units.replace(/s$/,"");switch(units){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.day(0)}return this},endOf:function(units){return this.startOf(units).add(units.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)===+moment(input).startOf(units)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return moment.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add("d",input-dayOfYear)},isoWeek:function(input){var week=weekOfYear(this,1,4);return input==null?week:this.add("d",(input-week)*7)},week:function(input){var week=this.lang().week(this);return input==null?week:this.add("d",(input-week)*7)},lang:function(key){if(key===undefined){return this._lang}else{this._lang=getLangDefinition(key);return this}}};function makeGetterAndSetter(name,key){moment.fn[name]=moment.fn[name+"s"]=function(input){var utc=this._isUTC?"UTC":"";if(input!=null){this._d["set"+utc+key](input);return this}else{return this._d["get"+utc+key]()}}}for(i=0;i<proxyGettersAndSetters.length;i++){makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i])}makeGetterAndSetter("year","FullYear");moment.fn.days=moment.fn.day;moment.fn.weeks=moment.fn.week;moment.fn.isoWeeks=moment.fn.isoWeek;moment.duration.fn=Duration.prototype={weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());if(withSuffix){output=this.lang().pastFuture(difference,output)}return this.lang().postformat(output)},lang:moment.fn.lang};function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}for(i in unitMillisecondFactors){if(unitMillisecondFactors.hasOwnProperty(i)){makeDurationAsGetter(i,unitMillisecondFactors[i]);makeDurationGetter(i.toLowerCase())}}makeDurationAsGetter("Weeks",6048e5);moment.lang("en",{ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});if(hasModule){module.exports=moment}if(typeof ender==="undefined"){this["moment"]=moment}if(typeof define==="function"&&define.amd){define("moment",[],function(){return moment})}}.call(this)});define("lib/com/form",[],function(require,exports,module){var g=window;function Form(selector,options){var self=this;this.options={isAjaxRequest:true};this.init=function(){$.extend(true,this.options,options);this.disabled=false;this.container=selector instanceof jQuery?selector:$(selector);this.submitButton=this.options.submitButton||this.container.find(".btn[type='submit']");if(!(this.submitButton instanceof jQuery))this.submitButton=$(selector+" "+this.options.submitButton);this.reset();this.initValidationRules();this.initEvent();return this};this.showLoading=function(){this.disabled=true;this.submitButton.addClass("disabled").prop("disabled",true);return this};this.hideLoading=function(){this.disabled=false;this.submitButton.removeClass("disabled").removeAttr("disabled");return this};this.initEvent=function(){this.submitButton.click(function(){if(self.disabled)return;self.submit()});this.container.submit(function(){if(self.disabled)return false;self.submit();return false})};this.reset=function(){this.hideLoading();if(this.container[0].reset!==undefined)this.container[0].reset();this.container.find(".help-block").each(function(){var tip=$(this).data("tip");if(tip){$(this).text(tip).addClass("tip")}else{$(this).empty()}});return this};this.val=function(data){function getValue(name){if(data[name]){return data[name]}var split=(name+"").split(".");if($.isPlainObject(data[split[0]])){return data[split[0]][split[1]]}return null}function setValue($element,value){if($element.is("select")){$element.find("option[value='"+value+"']").prop("selected",true)}else if($element.is(":radio")){$element.prop("checked",$element.val()===value.toString());$.uniform.update($element)}else if($element.is(":checkbox")){var checked=false;if($.isArray(value)){for(var i=0;i<value.length;i++){if($element.val()===value[i].toString()){checked=true}}}else{checked=$element.val()===value.toString()}$element.prop("checked",checked);$.uniform.update($element)}else{$element.val(value)}}this.container.find("input,textarea,select").each(function(index){var name=$(this).attr("name");var value=getValue(name);if(name&&value!==null){setValue($(this),value)}});return this};this.initValidationRules=function(){if(!this.container.validate)return false;var reserveOptions={errorElement:"span",errorClass:"help-block",focusInvalid:true,ignore:"",rules:{},invalidHandler:function(event,validator){},highlight:function(element){},unhighlight:function(element){},success:function(label){label.closest(".form-group").removeClass("has-error")},submitHandler:function(form){return false}};$.extend(reserveOptions,this.options.validate);this.container.validate(reserveOptions);return this};this.submit=function(){this.showLoading();var data=this.container.serializeArray();var handleSubmit=this.options.submitModelEvent;var handleSubmitParams=this.options.submitModelParams;var handleDataFormat=this.options.submitDataFormat;var handleSubmitError=this.options.submitError;var handleSubmitSuccess=this.options.submitSuccess;if(handleDataFormat!==undefined)data=handleDataFormat(data,this.container);if(!this.validate()){setTimeout(function(){self.hideLoading()},500);return false}var params=[data,function(resp,valid){self.complete();if(!valid){if(handleSubmitError!==undefined)handleSubmitError(resp,valid);return}if(handleSubmitSuccess!==undefined)handleSubmitSuccess(resp,valid)}];if(handleSubmitParams!==undefined)params=handleSubmitParams.apply(this,params);if(handleSubmit!==undefined)handleSubmit.apply(this,params);if(this.options.isAjaxRequest)return false;return this};this.getFormData=function(){var data=this.container.serializeArray();var handleDataFormat=this.options.submitDataFormat;if(handleDataFormat!==undefined)data=handleDataFormat(data,this.container);return data};this.validate=function(){var $form=this.container;var validate=this.options.validate;var failA=false;var failB=false;var data=this.container.serializeArray();if($form.valid!==undefined)failA=!$form.valid();if(validate&&validate.custom!==undefined)failB=!validate.custom(data,$form);if(failA||failB)return false;return true};this.complete=function(data,valid){this.hideLoading();return this}}g[PagurianAlias].form=function(selector,options){return new Form(selector,options).init()}});define("lib/com/alert",[],function(require,exports,module){var g=window;var types=["success","info","error","warn"];function Alert(){var timer;this.show=function(message,type){var className=type||"success";var messageDom='<div class="global-message '+className+'">'+message+"</div>";var $headerMessageWrap=$(".global-message").length>0?$(".global-message").html(message).removeClass().addClass("global-message "+className):$(messageDom);if(className!=="success"){var visibleModal=false;$(".modal.in").each(function(){$(this).find(".modal-message").html(messageDom);visibleModal=true});if(visibleModal){return this}}$("body").append($headerMessageWrap);$headerMessageWrap.css({"margin-left":"-"+$headerMessageWrap.outerWidth()/2+"px"});clearTimeout(timer);timer=setTimeout(function(){$headerMessageWrap.remove()},3e3);return this}}g[PagurianAlias].alert=function(message,type){return(new Alert).show(message,type)};$.each(types,function(index,type){g[PagurianAlias].alert[type]=function(message){g[PagurianAlias].alert(message,type)}})});define("lib/com/dialog",[],function(require,exports,module){var g=window;var template=require("lib/tpl/dialog.tpl");function Dialog(selector,options){var timer;var self=this;function resize(){var scrollHeight=self.body.height();var overHeight=214;var contentHeight=$(window).height()-overHeight;if(options.width){var padding=36;self.content.width(options.width+padding);self.content.parent().width(options.width+padding)}if(scrollHeight>=contentHeight){self.body.css("max-height",contentHeight)}self.body.scrollTop(0)}this.id=$p.tool.newId();this.language={zh_CN:{title:"提示信息",buttonSubmit:"确定",buttonCancel:"取消",body:"你好，我是一个模式对话框。"},en_US:{title:"Title",buttonSubmit:"Confirm",buttonCancel:"Cancel",body:"Hello, I am a dialog ."}};this.reset=function(){if(this.form){this.form[0].reset();this.form.find(".help-block").each(function(){var tip=$(this).data("tip");if(tip){$(this).text(tip).addClass("tip")}else{$(this).empty()}})}this.container.find(".submit-waiting").empty();this.container.find(".modal-message").empty();this.container.find(".btn").removeClass("disabled").removeAttr("disabled");this.container.find(".form-group").removeClass("has-error");this.whisper.empty().show()};this.init=function(){var dialogBody;if(!$p.tool.isString(options.body)){dialogBody=options.body;options.body=""}options.id=this.id;this.htmlTpl=$p.tpl(template,$.extend(this.language[$p.language||"zh_CN"],options));$("body").append(this.htmlTpl);this.container=$("#modal"+this.id);this.whisper=$("#whisper"+this.id);this.form=this.container.find("form").length?this.container.find("form"):null;this.body=this.container.find(".modal-body");this.content=this.container.find(".modal-content");this.submitButton=$("#btn_submit"+this.id);this.cancelButton=$("#btn_cancel"+this.id);this.container.addClass(options.className);if(dialogBody){this.body.append(dialogBody)}this.initEvent();if(options.preload!==undefined)options.preload(this);return this};this.showLoading=function(){this.submitButton.addClass("disabled").prop("disabled",true);this.container.find(".submit-waiting").html('<i class="fa fa-spinner fa-spin"></i>');return this};this.hideLoading=function(){this.submitButton.removeClass("disabled").removeAttr("disabled");this.container.find(".submit-waiting").empty();return this};this.submitForm=function(){var data;if(self.form){data=self.form.serializeArray();var failA=self.form.valid!==undefined?!self.form.valid():false;var failB=options.validate!==undefined&&!options.validate(self,data,self.params);if(failA||failB)return this}if(options.submit!==undefined)options.submit(self,data,self.params);this.showLoading();return this};this.initEvent=function(){if(selector){$(document).delegate(selector,"click",function(){if($(this).hasClass("disabled")||$(this).attr("disabled")){return}var params=$(this).data("params");var $form=self.form;self.params=eval("("+params+")")||{};self.show()})}if(this.form){this.form.submit(function(){self.submitForm();return false})}this.submitButton.click(function(){self.submitForm()});this.cancelButton.click(function(){if(options.cancel!==undefined)options.cancel(self,self.params)})};this.complete=function(){this.hideLoading();return this};this.show=function(){this.reset();this.container.modal("show");if(options.initForm!==undefined)options.initForm(this,this.form,this.params);setTimeout(resize,200);return this};this.hide=function(){this.container.modal("hide");return this};this.showWhisper=function(message,type){var $whisper=this.whisper.html(message).show();var className={info:"whisper-success",error:"whisper-error"};$whisper.removeClass().addClass("whisper "+className[type||"info"]);clearTimeout(timer);timer=setTimeout(function(){$whisper.empty().hide()},3e3);return this}}g[PagurianAlias].dialog=function(selector,options){if(arguments.length===1){return new Dialog(null,arguments[0]).init()}return new Dialog(selector,options).init()}});define("lib/tpl/dialog.tpl",[],'<div class="modal fade" id="modal{id}">\n    <div class="modal-dialog ">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>\n                <h4 class="modal-title">{title}</h4>\n            </div>\n            <div class="modal-body">\n                <div class="modal-message"></div>\n                {body}\n            </div>\n            <div class="modal-footer">\n                <div id="whisper{id}" class="whisper whisper-success"></div>\n                <span class="submit-waiting"></span>\n                <button id="btn_submit{id}" class="btn btn-primary" type="button">{buttonSubmit}</button>\n                <button id="btn_cancel{id}" data-dismiss="modal" class="btn btn-default" type="button">{buttonCancel}</button>\n            </div>\n        </div>\n    </div>\n</div>\n');define("lib/com/select",[],function(require,exports,module){var g=window;function Select(){this.init=function(selector,options){var dataList=options.data;var elements=$(selector);elements.empty();var selected="";for(var i=0;i<dataList.length;i++){selected="";if(options.active===dataList[i].id){selected='selected="selected"'}elements.append("<option value='"+dataList[i].id+"' "+selected+">"+dataList[i].name+"</option>")}return this}}g[PagurianAlias].select=function(selector,options){return(new Select).init(selector,options)}});define("lib/com/checkboxes",[],function(require,exports,module){var g=window;function Checkboxes(selector,options){this.container=$(selector);this.init=function(){var that=this;this.container.addClass("checkbox-list "+(options.className||""));this.load(options);this.container.on("click","input[type='checkbox']",function(){var $input=$(this);var checkedItem={value:$input.val(),text:$input.data("text"),checked:$input.is(":checked")};for(var i=0;i<that.items.length;i++){if(that.items[i].value.toString()===$input.val()){that.items[i].checked=$input.is(":checked")}}if($.isFunction(options.click)){options.click(checkedItem,that.getCheckedItems())}});return this};this.load=function(data){this.items=[];this.name=data.name;this.container.empty();var item,i;for(i=0;i<data.items.length;i++){this.items.push($.extend({},data.items[i]))}for(i=0;i<this.items.length;i++){item=['<label class="checkbox-item" ><input type="checkbox"','name="'+this.name+'"','value="'+this.items[i].value+'"','data-text="'+this.items[i].text+'"'];if(this.items[i].checked){item.push("checked=checked")}if(this.items[i].disabled){item.push("disabled=true")}item.push("/> "+this.items[i].text+"</label>");this.container.append(item.join(" "))}if(jQuery().uniform){this.container.find("input[type='checkbox']").uniform()}return this};this.checkAll=function(){this.check(true);return this};this.uncheckAll=function(){this.check(false);return this};this.check=function(flag){var elements=this.container.find("input[type='checkbox']");elements.prop("checked",flag);if(jQuery().uniform){$.uniform.update(elements)}};this.getItems=function(){return this.items};this.getCheckedItems=function(){var checkedItems=[];for(var i=0;i<this.items.length;i++){if(this.items[i].checked){checkedItems.push(this.items[i])}}return checkedItems};this.destroy=function(){this.container.empty()}}g[PagurianAlias].checkboxes=function(selector,options){return new Checkboxes(selector,options).init()}});define("lib/tool/tool",[],function(require,exports,module){var g=window;g[PagurianAlias].tool={newId:function(){return"_"+(Math.random()*1e18).toString(36).slice(0,5).toUpperCase()},isArray:function(o){return Object.prototype.toString.call(o)==="[object Array]"},isObject:function(o){return Object.prototype.toString.call(o)==="[object Object]"},isNumber:function(value){return/^[0-9]+$/.test(value)},isNull:function(o){return Object.prototype.toString.call(o)==="[object Null]"},isFunction:function(o){return typeof o==="function"},isString:function(o){return Object.prototype.toString.call(o)==="[object String]"},encode:function(value){return encodeURIComponent(value)},decode:function(value){return decodeURIComponent(value)},encodeHtml:function(str){var s="";if(str.length===0)return"";s=str.replace(/&/g,"&amp;");s=s.replace(/</g,"&lt;");s=s.replace(/>/g,"&gt;");s=s.replace(/ /g,"&nbsp;");s=s.replace(/\'/g,"&#39;");s=s.replace(/\"/g,"&quot;");s=s.replace(/\n/g,"<br>");return s},decodeHtml:function(str){var s="";if(!str||str.length===0)return"";str+="";s=str.replace(/&amp;/g,"&");s=s.replace(/&lt;/g,"<");s=s.replace(/&gt;/g,">");s=s.replace(/&nbsp;/g," ");s=s.replace(/&#39;/g,"'");s=s.replace(/&quot;/g,'"');s=s.replace(/<br>/g,"\n");return s},objectToUrlParams:function(params){var str_params="",url_split="";for(var i in params){if(typeof params[i]!=="function"){if(typeof params[i]==="object"){for(var j=0;j<params[i].length;j++){str_params+=url_split+i+"="+this.encode(this.encode(params[i][j]));url_split="&"}continue}str_params+=url_split+i+"="+this.encode(this.encode(params[i]));url_split="&"}}return str_params},toDecimal:function(arg,num){if($p.tool.isNull(arg)||arg===undefined||arg==="--"){return"--"}if(!arg||arg==="--"){return"0.00"}try{return arg.toFixed(num||2)}catch(e){return arg}return arg},formatTime:function(timestamp){if($p.tool.isNull(timestamp)){return"--"}if(!timestamp){return"00:00:00"}var ss=Math.round(timestamp);if(!ss){return"00:00:00"}var t3=ss%60;var t2=parseInt(ss/60);var t1=0;if(t2>=60){t1=parseInt(t2/60);t2=t2%60}return(t1<10?"0"+t1:t1)+":"+(t2<10?"0"+t2:t2)+":"+(t3<10?"0"+t3:t3)},formatDateRange:function(daterange,type){var times=daterange.split("~");switch(type){case"HOUR":return moment(times[0]).format("YYYY-MM-DD HH:mm:ss");case"DAY":return moment(times[0]).format("YYYY-MM-DD");case"WEEK":return moment(times[0]).format("YYYY-MM-DD")+" ~ "+moment(times[1]).format("YYYY-MM-DD");case"MONTH":return moment(times[0]).format("YYYY-MM");default:return""}},floatMul:function(arg1,arg2,sign){if($p.tool.isNull(arg1)){return"--"}if(!arg1||!arg2){return"0.00"}var m=0,s1=arg1.toString(),s2=arg2.toString();try{m+=s1.split(".")[1].length}catch(e){}try{m+=s2.split(".")[1].length}catch(e){}var n=Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m);return $p.tool.toDecimal(n)+sign},throttle:function(func,wait,options){var context,args,result;var timeout=null;var previous=0;var _now=Date.now||function(){return(new Date).getTime()};if(!options)options={};var later=function(){previous=options.leading===false?0:_now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}},debounce:function(func,wait,immediate){var timeout,args,context,timestamp,result;var _now=Date.now||function(){return(new Date).getTime()};var later=function(){var last=_now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}}}});define("lib/tool/url",[],function(require,exports,module){var g=window;g[PagurianAlias].url={getParameter:function(paramName){var searchString=window.location.search.substring(1),i,val,params=searchString.split("&");for(i=0;i<params.length;i++){val=params[i].split("=");if(val[0]===paramName){return g[PagurianAlias].tool.decode(val[1])}}return null},getReferrer:function(){return document.referrer},format:function(url){if(!url){return""}if(url.substring(0,4)!=="http"){url="http://"+url}return url},forward:function(url){setTimeout(function(){window.location.href=url},1e3);return this},reload:function(){window.location.reload();return this},convertParams:function(params){var str_params="",url_split="";for(var i in params){if(typeof params[i]!=="function"){if(typeof params[i]==="object"){for(var j=0;j<params[i].length;j++){str_params+=url_split+i+"="+encodeURIComponent(encodeURIComponent(params[i][j]));url_split="&"}continue}str_params+=url_split+i+"="+encodeURIComponent(encodeURIComponent(params[i]));url_split="&"}}return str_params},parse:function(url){var a=document.createElement("a");a.href=url;return{source:url,protocol:a.protocol.replace(":",""),host:a.hostname,port:a.port,query:a.search,params:function(){var ret={},seg=a.search.replace(/^\?/,"").split("&"),len=seg.length,i=0,s;for(;i<len;i++){if(!seg[i]){continue}s=seg[i].split("=");ret[s[0]]=s[1]}return ret}(),file:(a.pathname.match(/([^\/?#]+)$/i)||[0,""])[1],hash:a.hash.replace("#",""),path:a.pathname.replace(/^([^\/])/,"/$1"),relative:(a.href.match(/tps?:\/[^\/]+(.+)/)||[0,""])[1],segments:a.pathname.replace(/^\//,"").split("/")}}}});define("lib/tool/str",[],function(require,exports,module){var g=window;g[PagurianAlias].str={underscoreName:function(name){return name.replace(/([A-Z])/g,"_$1").toLowerCase()},camelName:function(name){return name.replace(/\-(\w)/g,function(x){return x.slice(1).toUpperCase()})},format:function(pattern){var pointer=0,i;for(i=1;i<arguments.length;i++){pattern=pattern.split("{"+pointer+"}").join(arguments[i]);pointer++}return pattern}}});define("lib/core/tpl",[],function(require,exports,module){var g=window;var FN={};var ESCAPING_MAP={"\\":"\\\\","\n":"\\n","\r":"\\r","\u2028":"\\u2028","\u2029":"\\u2029","'":"\\'"};function Tpl(){this.render=function(template,data){if(!template)return"";FN[template]=FN[template]||new Function("_","return '"+template.replace(/[\\\n\r\u2028\u2029']/g,function(escape){return ESCAPING_MAP[escape]}).replace(/\{\s*(\w+)\s*\}/g,"'+(_.$1?(_.$1+'').replace(/[&\"<>]/g,function(e){return e}):(_.$1===0?0:''))+'")+"'");return FN[template](data)}}g[PagurianAlias].tpl=function(template,data){var tpl=new Tpl;return tpl.render(template,data)}});define("lib/core/layout",[],function(require,exports,module){var isRTL=false;var isIE8=false;var isIE9=false;var isIE10=false;var sidebarWidth=225;var sidebarCollapsedWidth=35;function _getViewPort(){var e=window,a="inner";if(!("innerWidth"in window)){a="client";e=document.documentElement||document.body}return{width:e[a+"Width"],height:e[a+"Height"]}}function doInit(){if($("body").css("direction")==="rtl"){isRTL=true}isIE8=!!navigator.userAgent.match(/MSIE 8.0/);isIE9=!!navigator.userAgent.match(/MSIE 9.0/);isIE10=!!navigator.userAgent.match(/MSIE 10.0/);if(isIE10){$("html").addClass("ie10")}if(isIE10||isIE9||isIE8){$("html").addClass("ie")}}function doResponsive(){doSidebarAndContentHeight();doAppResizeEvent();doModalHeight()}function doResponsiveOnInit(){doSidebarAndContentHeight()}function doResponsiveOnResize(){var resize;if(isIE8){var currheight;$(window).resize($p.tool.debounce(function(){if(currheight===document.documentElement.clientHeight){return}doResponsive();currheight=document.documentElement.clientHeight},50))}else{$(window).resize($p.tool.debounce(function(){doResponsive()},50))}}function doSidebarAndContentHeight(){var content=$(".page-content");var available_height=$(window).height()-$(".footer").outerHeight()-$(".header").outerHeight();if($(".footer").hasClass("fixed")){$(".footer").removeClass("fixed")}content.css("min-height",available_height+"px")}function doModalHeight(){var modal_body=$(".modal:visible .modal-body");if(modal_body.length<1){return}var available_height=modal_body[0].scrollHeight;var custom_height=114;var footer_height=50;var header_height=50;var content_height=$(window).height()-footer_height-header_height-custom_height;if(available_height>=content_height){modal_body.css("max-height",content_height)}else{modal_body.css("max-height","none")}}function doPortletTools(){$("body").on("click",".portlet > .portlet-title > .tools > a.remove",function(e){e.preventDefault();$(this).closest(".portlet").remove()});$("body").on("click",".portlet > .portlet-title > .tools > .collapse, .portlet .portlet-title > .tools > .expand",function(e){e.preventDefault();var el=$(this).closest(".portlet").children(".portlet-body");if($(this).hasClass("collapse")){$(this).removeClass("collapse").addClass("expand");el.slideUp(200)}else{$(this).removeClass("expand").addClass("collapse");el.slideDown(200)}})}function doUniform(){if(!jQuery().uniform){return}var test=$("input[type=checkbox]:not(.toggle), input[type=radio]:not(.toggle, .star)");if(test.size()>0){test.each(function(){if($(this).parents(".checker").size()===0){$(this).show();$(this).uniform()}})}}function doTooltips(){$(".tooltips").tooltip()}function doDropdowns(){$("body").on("click",".dropdown-menu.hold-on-click",function(e){e.stopPropagation()});$(document).delegate("[data-type='select'] .dropdown-menu a","click",function(){var text=$(this).text();var icon=$(this).parents(".btn-group").find("button>i").prop("outerHTML");$(this).parents(".dropdown-menu").prev().html(text+" "+icon)})}function doDropdownHover(){if($.fn.dropdownHover){$('[data-hover="dropdown"]').dropdownHover()}}function doAlerts(){$("body").on("click",'[data-close="alert"]',function(e){$(this).parent(".alert").hide();e.preventDefault()})}function doPopovers(){$(".popovers").popover()}function doTabs(){$("body").on("shown.bs.tab",".nav.nav-tabs",function(){doSidebarAndContentHeight()});if(location.hash){var tabid=location.hash.substr(1);$('a[href="#'+tabid+'"]').parents(".tab-pane:hidden").each(function(){var tabid=$(this).attr("id");$('a[href="#'+tabid+'"]').click()});$('a[href="#'+tabid+'"]').click()}}function doFixInputPlaceholderForIE(){if(isIE8||isIE9){$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var input=$(this);
if(input.val()===""&&input.attr("placeholder")!==""){input.addClass("placeholder").val(input.attr("placeholder"))}input.focus(function(){if(input.val()===input.attr("placeholder")){input.val("")}});input.blur(function(){if(input.val()===""||input.val()===input.attr("placeholder")){input.val(input.attr("placeholder"))}})})}}function doSelect2(){if(jQuery().select2){$(".select2me").select2({placeholder:"Select",allowClear:true})}}function doHighlightCode(){if(!window.hljs){return}$("pre code").each(function(){var lines=$(this).text().split("\n").length;var $numbering=$("<ul/>").addClass("pre-numbering");$(this).addClass("has-numbering").parent().append($numbering);for(i=1;i<=lines;i++){$numbering.append($("<li/>").text(i))}});$("pre code").each(function(i,block){hljs.highlightBlock(block)})}function doAppResizeEvent(){for(var i=0,len=resizeEventQueue.length;i<len;i++){if("function"===typeof resizeEventQueue[i]){resizeEventQueue[i]()}}}function doSidebarOver(){var $spanner=$(".page-sidebar-spanner");var $sidebar=$(".page-sidebar-wrapper");var menuHeight=$(".page-sidebar-menu").height();var sidebarHeight=$sidebar.height();var top=$sidebar.scrollTop();var left=$(window).scrollLeft();if(top-50+sidebarHeight>=menuHeight){$spanner.removeClass("over")}else{$spanner.addClass("over")}if(left>2){$sidebar.addClass("over")}else{$sidebar.removeClass("over")}}function doSidebarScroll(){resizeEventQueue.push(doSidebarOver);$(".page-sidebar-wrapper").scroll(function(){doSidebarOver()});doSidebarOver()}function doWindowScroll(){$(window).scroll(function(){doSidebarOver()})}function doSidebarToggle(){if(!$(".page-sidebar-wrapper").length){return}var display=$.cookie("sidebar_display")||"show";if(display==="show"){show()}else{hide()}function setCookie(value){display=value;$.cookie("sidebar_display",value,{path:"/"})}function hide(){$("body").addClass("sidebar-hide")}function show(){$("body").removeClass("sidebar-hide")}function toggle(){if(display==="show"){hide();setCookie("hide");return}show();setCookie("show")}$(".page-sidebar-spanner").click(function(){toggle();doAppResizeEvent()})}function doSidebarMenuStatus(){var menuId=$(".page-sidebar-menu").attr("id")||"menu";var items=$.cookie(menuId+"_close_items");items=items?items.split(","):[];$(".page-sidebar-menu>li").each(function(index){index=$(this).data("id");if($.inArray(index,items)>=0){$(this).removeClass("open")}else{$(this).addClass("open")}});return function(){var items=[];$(".page-sidebar-menu>li").each(function(index){if(!$(this).hasClass("open")){items.push($(this).data("id"))}});$.cookie(menuId+"_close_items",items,{path:"/"})}}var resizeEventQueue=[];module.exports={init:function(){doInit();doResponsiveOnResize();doUniform();doResponsiveOnInit();doFixInputPlaceholderForIE();doSelect2();doPortletTools();doAlerts();doDropdowns();doDropdownHover();doTooltips();doPopovers();doTabs();doHighlightCode();doSidebarScroll();doSidebarToggle();doWindowScroll()},fixContentHeight:function(){doSidebarAndContentHeight()},resize:function(callback){resizeEventQueue.push(callback)},activateCurrentMenu:function(){if(window.CONFIG&&CONFIG.appId){$(".page-sidebar-menu li[data-id='"+CONFIG.appId+"']").addClass("active")}},updateUniform:function(){doUniform()},custom:function(){var _doSidebarMenuStatus=doSidebarMenuStatus();$(".page-sidebar-menu>li>a").on("click",function(e){var $li=$(this).parent();if($li.hasClass("open")){$li.removeClass("open");$li.find(".arrow").removeClass("open")}else{$li.addClass("open");$li.find(".arrow").addClass("open")}_doSidebarMenuStatus();doSidebarOver()})}}});define("conf/locale.zh_CN",[],{get:function(key){return this[key]},success:"操作成功",error:"操作失败",undefine:"出现异常，对象不存在",exception:"出现异常，请联系管理员",timeout:"网络请求超时，请稍后重试",disable:"停用",enable:"启用",loading:"加载中"});define("conf/locale.en_US",[],{get:function(key){return this[key]},success:"Successful operation",error:"Operation failure",undefine:"Exception, object is undefined",exception:"Exception",timeout:"Timeout",disable:"Disable",enable:"Enable",loading:"Loading"});define("lib/service",["lib/core/ajax","lib/core/transport","lib/core/validate"],function(require,exports,module){var ajax=require("lib/core/ajax");var transport=require("lib/core/transport");var validate=require("lib/core/validate");function validateRequest(options){if($.inArray(options.type,["get","delete","post","put","patch"])===-1){$p.log("type is undefined");return false}if(!options.url){$p.log("url is undefined");return false}return true}function getOptions(){var options={original:false,bundle:true,data:{}};if(arguments.length===1&&$.isPlainObject(arguments[0])){return $.extend(options,arguments[0])}if(arguments.length===3){options.url=arguments[0];options.data=filterParams(arguments[1]);options.callback=arguments[2];return options}options.type=arguments[0];options.url=arguments[1];options.data=filterParams(arguments[2]);options.callback=arguments[3];return options}function filterParams(params){var data=$.isArray(params)?[]:{};function push(key,value,type){var _temp={name:key,value:value};if($.isArray(data)){_temp&&(_temp.type=type);data.push(_temp);return data}return data[key]=value}$.each(params,function(index,value){if($p.tool.isNumber(index)&&$.isPlainObject(value)){push(value.name,value.value)}else if(!$.isFunction(value)){push(index,value)}});return data}function encode(data){return encodeURI(data)}function appendParam(params,param){var isEmpty=true;if($.isPlainObject(params)){params[param.name]=param.value;return params}if($.isArray(params)){for(var i=0;i<params.length;i++){if(params[i].name===param.name){params[i].value=param.value;isEmpty=false}}if(isEmpty){params.push(param)}}return params}function requestDate(options){if(!validateRequest(options)){return false}if(options.type==="get"){options.data=encode($.param(options.data,true))}else if(options.type==="delete"){options.url=options.url+"?"+encode($.param(options.data,true))}else if($.inArray(options.type,["post","put","patch"])>-1){if(!options.original){options.data=transport.toObject(options.data)}if(options.bundle){options.contentType="application/json";options.data=transport.toJSON(options.data)}}ajax.getJSON(options,function(response){var valid=validate.check(response);response.result=response.result||{};options.callback(response,valid)})}module.exports={validateRespone:function(respone){return validate.check(respone)},get:function(url,params,callback){var options=getOptions.apply(this,arguments);appendParam(options.params,{name:"locale",value:$p.language});appendParam(options.params,{name:"_ts",value:"_"+(Math.random()*1e18).toString(36).slice(0,5)});options.type="get";requestDate(options)},post:function(url,params,callback){var options=getOptions.apply(this,arguments);options.type="post";requestDate(options)},request:function(type,url,params,callback){var options=getOptions.apply(this,arguments);requestDate(options)}}});define("lib/core/ajax",[],function(require,exports,module){function send(options,callback){return $.ajax($.extend({timeout:3e4,success:function(data,textStatus,jqueryXHR){callback(data,textStatus,jqueryXHR)},error:function(jqueryXHR,textStatus,errorThrown){var responeData={error:true};for(var value in jqueryXHR){if($.isFunction(jqueryXHR[value]))continue;responeData[value]=jqueryXHR[value]}callback({code:jqueryXHR.status,result:responeData})}},options))}module.exports={getJSON:function(options,callback){options.dataType="json";return send(options,function(){if(callback!==undefined)callback.apply(this,arguments)})}}});define("lib/core/transport",[],function(require,exports,module){function handleArrayToObject(data){var tempData={};if($.isPlainObject(data)){return data}if(!$.isArray(data)){$p.log("Data is not an array");return null}for(var i=0;i<data.length;i++){if(tempData[data[i].name]){var _item=tempData[data[i].name];if(!$.isArray(_item)){tempData[data[i].name]=[_item]}tempData[data[i].name].push(data[i].value);continue}if(data[i].type==="array"){tempData[data[i].name]=[data[i].value];continue}tempData[data[i].name]=data[i].value}return tempData}function handleObjectStructuredKey(tempData){var finishData={};for(var key in tempData){var keys=key.split(".");var value=tempData[key];if($p.tool.isString(value)){value=$.trim(value)}if(keys.length===1){finishData[key]=value;continue}if($.isArray(value)){finishData[keys[0]]=finishData[keys[0]]||[];for(var i=0,tempValue;i<value.length;i++){tempValue={};tempValue[keys[1]]=value[i];finishData[keys[0]].push(tempValue)}continue}finishData[keys[0]]=finishData[keys[0]]||{};finishData[keys[0]][keys[1]]=value}return finishData}module.exports={toObject:function(data){var tempData=handleArrayToObject(data);var finishData=handleObjectStructuredKey(tempData);return finishData},toJSON:function(data){return $.toJSON({data:data})}}});define("lib/core/validate",[],function(require,exports,module){function handleServerCheck(code){var dot=(code+"").match(/\.\d*/);var postfix="error_200403";if(dot&&dot[0]===".17"){$p.url.reload();return}if(dot){postfix+="_"+dot[0].substr(1)}$p.alert($p.locale.handle_exception,"warning");$p.url.forward(CONFIG.ctxPath()+"/"+$p.lib.route[postfix]);return false}function checkFields(data){var fields=data.fields;for(var k in fields){$element=$(".help-block[for^='"+k+"']");$element.removeClass("tip");$element.html(fields[k][0].message)}return false}module.exports={check:function(data){var code=data.code;switch(true){case/200000/.test(code):return true;case/200001/.test(code):$p.alert(data.message,"warning");return false;case/200002/.test(code):return checkFields(data);case/200403/.test(code):return handleServerCheck(code);case/100\d/.test(code):$p.alert($p.locale.handle_exception,"error");return false;case code===0:if(data.result&&data.result.statusText==="timeout"){$p.alert($p.locale.handle_timeout,"error");return false}$p.alert($p.locale.handle_exception,"error");return false;case/400/.test(code):$p.alert($p.locale.params_error,"error");return false;case/404/.test(code):$p.alert($p.locale.handle_exception,"error");return false;case code===405:$p.alert($p.locale.handle_exception,"error");return false;case code===500:$p.alert($p.locale.handle_exception,"error");return false;default:return true}return true}}});define("conf/route",[],{});define("conf/api",[],{postfix:".json",items:{keywords:"keywords",user:"user",succeed:"succeed",dataListData:"datalistdata",sizerData:"sizerdata",summaryData:"summaryData"}});define("modules/summary/model",[],function(require,exports,module){var service=pagurian.lib.service;var api=pagurian.lib.api;function Model(){this.getSummaryData=function(params,callback){service.get(api.summaryData,params,callback)}}module.exports=new Model});define("widgets/summary/module",["widgets/summary/locale/zh_CN","widgets/summary/locale/en_US"],function(require,exports,module){var g=window,locale={};locale.zh_CN=require("widgets/summary/locale/zh_CN");locale.en_US=require("widgets/summary/locale/en_US");var settingPanel=require("widgets/summary/tpl/settingPanel.tpl");var oLanguage=locale[g[PagurianAlias].language||"zh_CN"];function Summary(selector,options){var _version="2016.4.25.1841";var _this=this;var _nameStr=options.name?options.name:"summary";var _id="_"+(Math.random()*1e18).toString(36).slice(0,5).toUpperCase();var _cookieName;var _allColumns,_allRows;var $div_ul,$setting_ul,i,l,j;var MIN_COLUMN_NUM=1;var _saveState=false;var params={set:function(key,value){this[key]=value;if(_saveState){$.cookie("params."+key,value,{expires:7,path:_getCookiePath()})}},get:function(key){if(_saveState){return this[key]||$.cookie("params."+key)}return this[key]}};var _showNum=0;this.selectorStr=selector.substring(1,selector.length);this.summaryName=_nameStr+_id;this.params={};this.maxNum=0;this.minNum=0;this.canChoose=false;this.showSetting=false;this.showColumns=[];this._showColumns=[];this.allDatas=[];this.titlesRows=[];this.options={cName:"cName",saveState:false,allColumns:[],allRows:[],canChoose:false,showSetting:false,dataSource:null,dataParams:{},callbackOpen:null,callbackSubmit:null,callbackCancel:null,callBackPanel:null,callBackGetData:null};this.update=function(params){var _opParams=$.isFunction(_this.options.dataParams)?_this.options.dataParams():_this.options.dataParams;var _params=$.extend(true,{},_opParams,params);drawData(_params);return this};this.resize=function(){adjustHeight();return this};var init=function(){_this.options=$.extend(true,{},_this.options,options);_saveState=_this.options.saveState;_allColumns=$.isArray(_this.options.allColumns)?_this.options.allColumns:[];_allRows=_this.options.allRows;_this.maxNum=_this.options.maxNum?_this.options.maxNum:_allColumns.length;_this.minNum=_this.options.minNum?_this.options.minNum:MIN_COLUMN_NUM;_this.canChoose=_this.options.canChoose;_this.showSetting=_this.options.showSetting;_this.maxNum=_this.maxNum<=_allColumns.length?_this.maxNum:_allColumns.length;if(_this.maxNum>_allColumns.length){_showNum=_allColumns.length}_cookieName=_nameStr+"."+_this.selectorStr;_this.options.allRows.forEach(function(row){if(row.isTitle){_this.titlesRows.push(row.dataName)}});var _arrOptionShowColumns=[];var _objAllColumns={};var _objShowColumns={};for(i=0;i<_allColumns.length;i++){var _columnsName=_allColumns[i][_this.options.cName];_objAllColumns[_columnsName]=true;if(i<_this.maxNum){_arrOptionShowColumns.push(_columnsName)}}var cookieShowColumns=params.get(_cookieName);var _arrCookieShowColumns=cookieShowColumns?cookieShowColumns.split(","):[];_this.showColumns=_arrCookieShowColumns.length===0||!_columnsValidate(_arrCookieShowColumns)?_arrOptionShowColumns:_arrCookieShowColumns;params.set(_cookieName,_this.showColumns.join(","));_this.showColumns.forEach(function(showColumn){_objShowColumns[showColumn]=true});if(_this.canChoose){var cookieChooseColumns=params.get(_cookieName+".chooseColumns");if(!cookieChooseColumns||!_objShowColumns[cookieChooseColumns]){_this.chooseColumns=_this.showColumns[0]}else{_this.chooseColumns=cookieChooseColumns}params.set(_cookieName+".chooseColumns",_this.chooseColumns)}bindEvent();drawDom();function _columnsValidate(colunms){for(var _i=0;_i<colunms.length;_i++){if(!_objAllColumns[colunms[_i]]){return false}}return true}};var drawDom=function(){var $summaryPanelTpl=$('<div class="summary-div-ul li"></div>'),_classBorder=_this.options.canChoose?"border-bottom":"";$summaryPanelTpl.attr("id",getTagId("div_ul"));$summaryPanelTpl.addClass(_showNum).addClass(_classBorder);if(_this.showSetting){oLanguage.maxNum=oLanguage.maxNum.replace("{0}",_this.maxNum);oLanguage.settingWrapId=getTagId("setting_wrap");oLanguage.settingIconId=getTagId("setting_icon");oLanguage.settingPannelId=getTagId("setting_panel");oLanguage.settingUlId=getTagId("setting_ul");oLanguage.btnSubmitId=getTagId("btn_submit");oLanguage.btnCancelId=getTagId("btn_cancel");settingPanel=$p.tpl(settingPanel,oLanguage)}$(selector).append($summaryPanelTpl);if(_this.options.showSetting){$(selector).append(settingPanel)}drawInitDom();var _params=$.isFunction(_this.options.dataParams)?_this.options.dataParams():_this.options.dataParams;drawData(_params)};var bindEvent=function(){if(_this.showSetting){$(selector).on("click"," .summary-setting-icon",function(){expandSettingPanel()});$(selector).on("click"," .summary-setting-wrap .btn-primary",function(){var _needClick=false;expandSettingPanel();_this.showColumns=_this._showColumns;params.set(_cookieName,_this.showColumns.join(","));if(_this.canChoose&&_this.showColumns.indexOf(_this.chooseColumns)<0){_needClick=true;var _chooseColumns=_this.showColumns[0];_this.chooseColumns=_chooseColumns;params.set(_cookieName+".chooseColumns",_chooseColumns)}drawPanel($div_ul);setData(_this.allDatas);adjustHeight();if($.isFunction(_this.options.callbackSubmit)){_this.options.callbackSubmit(_this.showColumns,_this.allDatas)}if(_needClick){$(".jsSummary"+_id+'_content[data-name="'+_this.chooseColumns+'"]').trigger("click")}});$(selector).on("click"," .summary-setting-wrap .btn-default",function(){var $allCheckBoxes=$("#"+getTagId("setting_ul")+' [type="checkbox"]');$allCheckBoxes.prop("checked",false);for(var _i=0;_i<_this.showColumns.length;_i++){$("#"+getTagId("setting_ul")+' [type="checkbox"][value="'+_this.showColumns[_i]+'"]').prop("checked","checked")}updateCheckbox();expandSettingPanel();if(_this.options.callbackCancel){_this.options.callbackCancel()}});$(selector).on("click",'.summary-setting-ul [type="checkbox"]',function(){var $selectCheckBoxes=updateCheckbox();_this._showColumns=[];$selectCheckBoxes.each(function(){_this._showColumns.push($(this).val())})});$(selector).on("click",".summary-setting-panel .summary-reset",function(){var _needClick=false;var _showColunms=[];var checkBoxs=$(selector).find('.summary-setting-ul [type="checkbox"]');checkBoxs.prop("checked",false).prop("disabled",false);expandSettingPanel();_this.allDatas.forEach(function(data,index){if(index<_this.options.maxNum){_showColunms.push(data.cName)}});checkBoxs.each(function(index,checkBox){if(_showColunms.indexOf(checkBox.value)>-1){$(checkBox).prop("checked","checked")}else{$(checkBox).prop("disabled","disabled")}});checkBoxs.uniform();_this.showColumns=_showColunms;params.set(_cookieName,_this.showColumns.join(","));var _chooseColumns=_this.showColumns[0];_this.chooseColumns=_chooseColumns;params.set(_cookieName+".chooseColumns",_chooseColumns);drawPanel($div_ul);setData(_this.allDatas);adjustHeight();if(_needClick){$(".jsSummary"+_id+'_content[data-name="'+_this.chooseColumns+'"]').trigger("click")}});var updateCheckbox=function(){var _$allCheckBoxes=$("#"+getTagId("setting_ul")+' [type="checkbox"]'),_$selectCheckBoxes=$("#"+getTagId("setting_ul")+' [type="checkbox"]:checked'),_$unselectCheckBoxes=$("#"+getTagId("setting_ul")+' [type="checkbox"]:not(:checked)');var checkNum=_$selectCheckBoxes.length;if(checkNum>=_this.maxNum){_$selectCheckBoxes.removeAttr("disabled");_$unselectCheckBoxes.attr("disabled","disabled");if($.uniform){_$allCheckBoxes.uniform.update()}}else{_$allCheckBoxes.removeAttr("disabled");if($.uniform){_$allCheckBoxes.uniform.update()}}if(checkNum===_this.minNum){_$selectCheckBoxes.attr("disabled","disabled");if($.uniform){_$allCheckBoxes.uniform.update()}}return _$selectCheckBoxes}}$(selector).on("click"," .jsSummary"+_id+"_content",function(){var _columnName=$(this).data("name"),_columnData=getColumnData(_columnName),_columnsData=_this.allDatas;if(_this.canChoose){_this.chooseColumns=_columnName;params.set(_cookieName+".chooseColumns",_this.chooseColumns);$("#"+getTagId("div_ul")).find(".summary-div-li").removeClass("choose");$(this).parent().addClass("choose")}if($.isFunction(_this.options.callBackPanel)){_this.options.callBackPanel(_columnName,_columnData,_columnsData)}});$(selector).on("click"," .summary-div-li",function(){var $ul=$(this).find("ul[data-name]");var _columnName=$ul.data("name"),_columnData=getColumnData(_columnName),_columnsData=_this.allDatas;if(_this.canChoose){_this.chooseColumns=_columnName;params.set(_cookieName+".chooseColumns",_this.chooseColumns);$("#"+getTagId("div_ul")).find(".summary-div-li").removeClass("choose");$(this).addClass("choose")}if($.isFunction(_this.options.callBackPanel)){_this.options.callBackPanel(_columnName,_columnData,_columnsData)}})};function drawInitDom(){$div_ul=$("#"+getTagId("div_ul")).empty();$setting_ul=$("#"+getTagId("setting_ul")).empty();drawPanel($div_ul);drawSetting($setting_ul)}function drawPanel(obj){obj.empty();obj.attr("class",function(i,cls){return cls.replace(/li\d+/,"")});obj.addClass("li"+_this.showColumns.length);for(i=0;i<_this.showColumns.length;i++){var _columnsName=_this.showColumns[i];var _columnsConfig=getColumnConfig(_columnsName);var _clickStr=_this.options.callBackPanel?"canClick":"";var $div_li=$('<div class="summary-div-li"></div>');var $div_li_ul=$("<ul></ul>");var $triangle=$('<div class="summary-triangle"></div>');$div_li_ul.attr("data-name",_columnsConfig.cName);$div_li_ul.addClass("jsSummary"+_id+"_content "+_clickStr);for(var k=0;k<_allRows.length;k++){var _class=_allRows[k].klass?_allRows[k].klass:"",_text=_allRows[k].tpl?_allRows[k].tpl.replace("{0}","--"):"--";_text=_allRows[k].isTitle?_columnsConfig.title:_text;var $li=$("<li></li>");$li.addClass(_class);$li.attr("data-name",_allRows[k].dataName);$li.append(_text);$div_li_ul.append($li)}$div_li.append($div_li_ul);if(_this.canChoose){$div_li.append('<div class="summary-triangle"></div>')}obj.append($div_li)}if(_this.canChoose){var $chooseColumns=$(".jsSummary"+_id+'_content[data-name="'+_this.chooseColumns+'"]');$chooseColumns.parent().addClass("choose")}adjustHeight()}function drawSetting(obj){for(i=0,l=_allColumns.length;i<l;i++){var _setting_option_tpl="",_mr=i%2===0?"mr":"";_setting_option_tpl+=' <li class="summary-setting-li '+_mr+'"><label>';_setting_option_tpl+='      <input type="checkbox" value="'+_allColumns[i][_this.options.cName]+'"';for(var j=0;j<_this.showColumns.length;j++){if(_allColumns[i][_this.options.cName]===_this.showColumns[j]){_setting_option_tpl+='checked = "checked"'}}_setting_option_tpl+="/>"+_allColumns[i].title;_setting_option_tpl+="</label></li>";obj.append(_setting_option_tpl)}var $selectCheckBoxes=obj.find('[type="checkbox"]:checked'),$unselectCheckBoxes=obj.find('[type="checkbox"]:not(:checked)');if($selectCheckBoxes.length>=_this.maxNum){$unselectCheckBoxes.attr("disabled","disabled")}if($selectCheckBoxes.length<=_this.minNum){$selectCheckBoxes.attr("disabled","disabled")}var $checkboxes=obj.find('[type="checkbox"]');if($checkboxes.uniform){$checkboxes.uniform()}}function drawData(params){var _datas=[];var _params=$.extend({},params);if(!_this.options.dataSource){var _allColumns=_this.options.allColumns;for(i=0;i<_allColumns.length;i++){var _dataName=_allColumns[i][_this.options.cName],_columnConfig=getColumnConfig(_dataName),_o={cName:_dataName};_o[_this.options.cName+"Title"]=_columnConfig.title;_datas.push(_o)}_this.allDatas=_datas;setData(_datas);adjustHeight();if(_this.canChoose){var _chooseColumnsData=getColumnData(_this.chooseColumns);if($.isFunction(_this.options.callBackGetData)){_this.options.callBackGetData(_this.chooseColumns,_chooseColumnsData,_this.allDatas)}return}if($.isFunction(_this.options.callBackGetData)){_this.options.callBackGetData(_this.allDatas)}return}_this.options.dataSource(_params,function(resp){var _result=resp.result||{};_datas=$.isArray(_result)?_result:_result.items||[];for(i=0;i<_datas.length;i++){var _dataName=_datas[i][_this.options.cName],_columnConfig=getColumnConfig(_dataName);_datas[i][_this.options.cName+"Title"]=_columnConfig.title}_this.allDatas=_datas;setData(_datas);adjustHeight();if(_this.canChoose){var _chooseColumnsData=getColumnData(_this.chooseColumns);if($.isFunction(_this.options.callBackGetData)){_this.options.callBackGetData(_this.chooseColumns,_chooseColumnsData,_this.allDatas)}return}if($.isFunction(_this.options.callBackGetData)){_this.options.callBackGetData(_this.allDatas)}})}function setData(_datas){var $summaryContents=$(".jsSummary"+_id+"_content");var $summaryContentLi=$summaryContents.find("li");var _rowConfigs={};_this.options.allRows.forEach(function(row){_rowConfigs[row.dataName]=row});$summaryContentLi.each(function(index,summaryContent){var _dataName=$(summaryContent).data("name");if(_rowConfigs[_dataName].isTitle){return}var _html="--";if($p.tool.isString(_rowConfigs[_dataName].tpl)){_html=$p.str.format(_rowConfigs[_dataName].tpl,"--")}$(summaryContent).html(_html)});for(i=0;i<$summaryContents.length;i++){var $summaryContent=$($summaryContents[i]),_data=getColumnData($summaryContent.data("name"));for(var _name in _data){var $contentLi=$summaryContent.find('li[data-name="'+_name+'"]'),_rowConfig=getRowConfig(_name);var _html="";if($.isFunction(_rowConfig.render)){_html=_rowConfig.render(_data[_name],_datas)}else if(_rowConfig.tpl){_html=$p.str.format(_rowConfig.tpl,_data[_name])}else{_html=_data[_name]}$contentLi.html(_html)}}}function adjustHeight(){$(".jsSummary"+_id+"_content").find("li").css({height:"auto"});for(i in _allRows){var heights=[],$lis=$(".jsSummary"+_id+"_content").find('li[data-name="'+_allRows[i].dataName+'"]');heights=getAllHeight($lis);var _maxHeight=Math.max.apply(null,heights);$lis.css({height:_maxHeight+"px"})}function getAllHeight($lis){var _heights=[];$lis.each(function(){_heights.push($(this).height())});return _heights}}function expandSettingPanel(){var $settingPanel=$("#"+getTagId("setting_panel"));if($settingPanel.hasClass("open")){$settingPanel.removeClass("open");return}$settingPanel.addClass("open");var $selectCheckBoxes=$("#"+getTagId("setting_ul")+' [type="checkbox"]:checked');_this._showColumns=[];$selectCheckBoxes.each(function(){_this._showColumns.push($(this).val())});if($.isFunction(_this.options.callbackOpen)){_this.options.callbackOpen()}}function getColumnData(cName){var columnData={};for(var _i=0;_i<_this.allDatas.length;_i++){if(cName===_this.allDatas[_i][_this.options.cName]){columnData=_this.allDatas[_i];break}}return columnData}function getColumnConfig(cName){var columnData={};for(var _i=0;_i<_allColumns.length;_i++){if(cName===_allColumns[_i][_this.options.cName]){columnData=_allColumns[_i];break}}return columnData}function getRowConfig(_name){var rowConfig={};for(var _i=0;_i<_allRows.length;_i++){if(_allRows[_i].dataName===_name){rowConfig=_allRows[_i];break}}return rowConfig}function getTagId(tagName){return _nameStr+"_"+tagName+_id}function isArray(obj){return Object.prototype.toString.call(obj)==="[object Array]"}function _getCookiePath(){var _path;var _optionPath=options.cookiePath?options.cookiePath:location.pathname;if(_optionPath==="root"){_path="/"}else{_path=_optionPath}return _path}init()}g[PagurianAlias].summary=function(selector,options){var summary=new Summary(selector,options);return summary}});define("widgets/summary/locale/zh_CN",[],{maxNum:"最多可选择{0}个指标",resetDefault:"恢复系统默认",btnSubmit:"确定",btnCancel:"取消"});define("widgets/summary/locale/en_US",[],{maxNum:"Most can choose {0} target",resetDefault:"Reset",btnSubmit:"Submit",btnCancel:"Cancel"});define("widgets/summary/tpl/settingPanel.tpl",[],'<div id="{settingWrapId}" class="summary-setting-wrap">\n    <a id="{settingIconId}" class="summary-setting-icon" href="javascript:;">\n        <i class="fa fa-cog "></i>\n    </a>\n    <div id="{settingPannelId}" class="summary-setting-panel">\n        <div class="summary-setting-panel-arrows"></div>\n        <div class="summary-setting-panel-body">\n            <div class="summary-setting-panel-text">\n                <span>{maxNum}</span>\n                <a class="summary-reset" href="javascript:;">{resetDefault}</a>\n            </div>\n            <ul id="{settingUlId}" class="summary-setting-ul"></ul>\n        </div>\n        <div class="summary-setting-panel-footer">\n            <button id="{btnSubmitId}" class="btn btn-primary" type="button">{btnSubmit}</button>\n            <button id="{btnCancelId}" class="btn btn-default" type="button">{btnCancel}</button>\n        </div>\n    </div>\n</div>\n');define("plugins/echarts/module",["plugins/echarts/locale/zh_CN","plugins/echarts/locale/en_US","plugins/echarts/chart/line","plugins/echarts/chart/pie","plugins/echarts/chart/bar","plugins/echarts/chart/map"],function(require,exports,module){var g=window;var languages={zh_CN:require("plugins/echarts/locale/zh_CN"),en_US:require("plugins/echarts/locale/en_US")};var lang=pagurian.language||"zh_CN";var locale=languages[lang];var chartOptions={line:require("plugins/echarts/chart/line"),pie:require("plugins/echarts/chart/pie"),bar:require("plugins/echarts/chart/bar"),map:require("plugins/echarts/chart/map")};function Echarts(selector,options){this.version="0.1.1208";this.options={backgroundColor:"#f5f5f5",color:["#fe8463","#9bca63","#fad860","#60c0dd","#0084c6","#d7504b","#c6e579","#26c0c0","#f0805a","#f4e001","#b5c334"]};var nameMapCity={};var nameMapProvince={};var options_all;this.init=function(){if($p.locale.echarts){var chinaProvinceLocale=$p.locale.echarts[lang].china_province;var chinaProvince_zh_CN=$p.locale.echarts.zh_CN.china_province;var chinaCityLocale=$p.locale.echarts[lang].china_city;var chinaCity_zh_CN=$p.locale.echarts.zh_CN.china_city;for(var key in chinaCity_zh_CN){nameMapCity[chinaCity_zh_CN[key]]=chinaCityLocale[key]}for(key in chinaProvinceLocale){nameMapProvince[chinaProvinceLocale[key]]=chinaProvince_zh_CN[key]}}$.extend(true,this.options,options);this.echarts=echarts.init(document.getElementById(selector));this.container=$("#"+selector);this.showLoading();this.chart=this.echarts;return this};this.showLoading=function(effect){this.echarts.showLoading({effect:effect||"spin",textStyle:{color:"#fff"},effectOption:{backgroundColor:"rgba(0, 0, 0, 0.5)"},text:locale.loading});return this};this.hideLoading=function(){this.echarts.hideLoading();this.container.find(".chart-message").remove();return this};this.message=function(status,message){this.hideLoading();this.echarts.clear();var icon="icon-info icon-big";var text=message||locale.empty;if(status==="timeout"){icon="icon-exclamation-circle icon-big red";text+=$p.str.format("<br/><a class='btn btn-default'>{0}</a>",locale.search_reset)}else if(status==="error"){icon="icon-exclamation-circle icon-big red"}this.container.append($p.str.format("<div class='chart-message'><h3><i class='icon {0}' ></i> {1}</h3></div>",icon,text));return this};this.load=function(data,options){if(!this.options.type){this.echarts.hideLoading();this.echarts.clear();this.echarts.setOption($.extend(true,{},this.options,data));return}var type=this.options.type;var _options=$.extend(true,{},chartOptions[type](data),this.options);if($.isFunction(options)){options_all=options(_options)}else{options_all=$.extend(true,_options,options||{})}this.hideLoading();this.echarts.clear();this.echarts.setOption(options_all);return this};this.on=function(eventName,eventListener){this.echarts.on(eventName,eventListener);return this};this.set=function(options){this.echarts.setOption($.extend(true,options_all,options),true)};this.onMapSelectedByChina=function(params){var mapType="china";var count=0;for(var k in params.selected){count++}if(count===1){mapType="china"}else if(nameMapProvince[params.target]){mapType=nameMapProvince[params.target]}this.set({series:[{mapType:mapType,nameMap:nameMapCity}]});this.selected=mapType}}g[PagurianAlias].echarts=function(selector,options){return new Echarts(selector,options).init()}});define("plugins/echarts/locale/zh_CN",[],{loading:"加载中...",empty:"查询结果为空",search_reset:"重新查询",high:"高",low:"低"});define("plugins/echarts/locale/en_US",[],{loading:"Loading...",empty:"No data found",search_reset:"Search",high:"High",low:"Low"});define("plugins/echarts/chart/line",["plugins/echarts/locale/zh_CN","plugins/echarts/locale/en_US"],function(require,exports,module){var locale={zh_CN:require("plugins/echarts/locale/zh_CN"),en_US:require("plugins/echarts/locale/en_US")};var activeLocale=locale[pagurian.language||"zh_CN"];module.exports=function(options){var rows=options.rows||[];var option={title:{x:"center",y:"20",textStyle:{color:"#999",fontWeight:"100"}},calculable:true,tooltip:{trigger:"axis"},grid:{x:90,y:60,x2:60,y2:60},legend:{x:"center",y:"bottom",data:[]},xAxis:[{type:"category",boundaryGap:false,axisLine:{lineStyle:{color:"#CCC"}},splitLine:{show:false,lineStyle:{color:"#DADADA"}},data:[]}],yAxis:[{type:"value",axisLine:{lineStyle:{color:"#CCC"}},splitLine:{lineStyle:{color:"rgba(240, 240, 240, 0.8)"}},splitArea:{show:true,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}}}],series:[]};for(var i=0;i<rows.length;i++){option.legend.data.push(rows[i].name);var series={name:rows[i].name,type:"line",smooth:true,data:rows[i].value,symbol:"emptyCircle",symbolSize:5};$.extend(series,rows[i]);option.series.push(series)}option.xAxis[0].data=options.columns;return option}});define("plugins/echarts/chart/pie",["plugins/echarts/locale/zh_CN","plugins/echarts/locale/en_US"],function(require,exports,module){var locale={zh_CN:require("plugins/echarts/locale/zh_CN"),en_US:require("plugins/echarts/locale/en_US")};
var activeLocale=locale[pagurian.language||"zh_CN"];module.exports=function(options){var dataList=options.data||[];var option={title:{x:"center",y:"20",textStyle:{color:"#999",fontWeight:"100"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{x:"center",y:"bottom",data:[]},calculable:false,series:[{name:"",type:"pie",radius:"60%",minAngle:3,startAngle:0,center:["50%","50%"],data:[]}]};$.extend(option.series[0],options);for(var i=0;i<dataList.length;i++){option.legend.data.push(dataList[i].name)}this.option=option;return option}});define("plugins/echarts/chart/bar",["plugins/echarts/locale/zh_CN","plugins/echarts/locale/en_US"],function(require,exports,module){var locale={zh_CN:require("plugins/echarts/locale/zh_CN"),en_US:require("plugins/echarts/locale/en_US")};var activeLocale=locale[pagurian.language||"zh_CN"];module.exports=function(options){var dataList=options.data||[],config=options.config||{},rows=options.rows,columns=options.columns,horizon=options.horizon||false,valueColumn=horizon?"xAxis":"yAxis",lableColumn=horizon?"yAxis":"xAxis";var option={title:{x:"center",y:"20",textStyle:{color:"#999",fontWeight:"100"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{show:false},calculable:false,series:[]};option[valueColumn]=[{name:"",type:"value",nameTextStyle:{color:"#000"},axisLine:{lineStyle:{color:"#CCC"}},splitLine:{lineStyle:{color:"rgba(240, 240, 240, 0.8)"}},splitArea:{show:true,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}}}];option[lableColumn]=[{type:"category",data:[],boundaryGap:true,axisLine:{lineStyle:{color:"#CCC"}},splitLine:{show:false,lineStyle:{color:"#DADADA"}}}];if(dataList.length){return compatible(option)}if(rows&&rows.length){if(rows.length>1){option.legend={x:"center",y:"bottom",data:[]}}for(i=0;i<rows.length;i++){if(option.legend){option.legend.data.push(rows[i].name)}var series={name:rows[i].name,type:"bar",data:rows[i].value,itemStyle:{normal:{borderRadius:0}}};$.extend(series,rows[i]);option.series.push(series)}option[lableColumn][0].data=options.columns}this.option=option;function compatible(option){option.series.push({name:"",type:"bar",itemStyle:{normal:{borderRadius:0}},data:[]});for(i=0;i<dataList.length;i++){option[lableColumn][0].data.push(dataList[i].name);option.series[0].data.push(dataList[i].value)}if(options.name){option[valueColumn][0].name=options.name;option.series[0].name=options.name}return option}return option}});define("plugins/echarts/chart/map",["plugins/echarts/locale/zh_CN","plugins/echarts/locale/en_US"],function(require,exports,module){var languages={zh_CN:require("plugins/echarts/locale/zh_CN"),en_US:require("plugins/echarts/locale/en_US")};var lang=pagurian.language||"zh_CN";var locale=languages[lang];module.exports=function(options){var mapType=options.mapType||"china";var chinaProvinceLocale=$p.locale.echarts[lang].china_province;var chinaCityLocale=$p.locale.echarts[lang].china_city;var chinaProvince_zh_CN=$p.locale.echarts.zh_CN.china_province;var countryLocale=$p.locale.echarts[lang].country;var country_en_US=$p.locale.echarts.en_US.country;var nameMap={china:function(locale){var list={};for(var key in chinaProvince_zh_CN){list[chinaProvince_zh_CN[key]]=chinaProvinceLocale[key]}return list},world:function(locale){var list={};for(var key in country_en_US){list[country_en_US[key]]=countryLocale[key]}return list}};function getName(key){if(mapType==="world"){return countryLocale[key]||key}if(chinaProvinceLocale[key]){return chinaProvinceLocale[key]}return chinaCityLocale[key]||key}var dataList=options.data||[];var option={color:["#fe8463","#ffede8"],title:{x:"center",y:"20",textStyle:{color:"#999",fontWeight:"100"}},tooltip:{trigger:"item",formatter:options.name+"<br/>{b} : {c} {d}"},dataRange:{orient:"horizontal",min:0,max:0,text:[locale.high,locale.low],calculable:false,color:["#fe8463","#ffede8"],x:"18",y:"420"},series:[{name:"",type:"map",mapType:mapType,selectedMode:"single",nameMap:nameMap[mapType](pagurian.language||"zh_CN"),calculable:false,mapLocation:{y:60},roam:false,itemStyle:{normal:{label:{show:mapType==="china"?true:false,textStyle:{fontSize:pagurian.language==="en_US"?"10":"12"}}},emphasis:{label:{show:true,textStyle:{color:"#fff"}},areaStyle:{color:"#d7504b"}}},data:[]}]};for(var i=0;i<dataList.length;i++){dataList[i].name=getName(dataList[i].name);option.series[0].data.push(dataList[i]);if(dataList[i].value>option.dataRange.max){option.dataRange.max=dataList[i].value}}option.series[0].name=options.name;$.extend(true,option,options.options);this.option=option;return option}});
